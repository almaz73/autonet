import{i as V,c as P,d as B,e as k}from"./favoriteCars-DdJpUpKD.js";import{i as W,g as N,a as C,p as M,d as E}from"./compareCars-Dzpko8KM.js";let u=1;function y(){return location.href.includes("&page")?location.href.slice(0,location.href.lastIndexOf("&page")):location.href}function F(e){const t=document.querySelector("#pager");if(!t)return!1;const o=new URLSearchParams(window.location.search);let i="";u=+o.get("page")||1;const a=u>3?u-3:0;a>0&&(i+=`<a href=${y()}> 1</a> <span> | </span> ... <span> | </span>`);for(let l=1+a;l<e&&!(l-a>5);l++)i+=`<a ${u===l?'class="active"':""} href=${y()}&page=${l}>${l}</a><span> | </span>`;e>5?i+=` ... <span> | </span>  <a href=${y()}&page=${e}>${e}</a><span> | </span> `:e==="1"?i+='<a class="active">1</a>':i+=` <a href=${y()}&page=${e} class=${e!==u?"":"active"}>${e}</a><span> | </span> `,e!==u&&window.screen.width>500&&(i+=`<a href="javascript:nextPage('${u}')"> След.</a>`),t.innerHTML=i}window.nextPage=e=>{let t="&page="+(+e+1);location.href.includes("&page=")?location.href=y()+t:location.href=location.href+t};let d;document.addEventListener("DOMContentLoaded",()=>{d=document.querySelector("cards")});function S(e,t){let o;isNaN(t)||(o=`<div class='cart' id='galery_${t}' >
              <div class='cart__slide'>                    
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${e.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
                  <span class='dark-fon'/>                    
              </div>
              <a class="big_link" href='${e.href}' title="перейти">
                  <div class='name'>
                      <br>                      
                      ${e.name}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная рещина" class="tyres_icon " 
                       style="display: ${e.type==="tyres"?"block":"none"}; 
                       opacity: ${e.type==="tyres"&&e.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${e.price?e.price+" ₽":""} </div>
                      <div class='cart__of'>${e.fromPerMonth?"ot "+e.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${e.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${e.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${e.id}')" ondblclick="dblCompare('${e.id}')">
                          <img id="compareId_${e.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${e.id}')">
                          <img id="favoriteId_${e.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),t==="abdul"&&(o="<abdul></abdul>",setTimeout(window.reloadAbdul)),t==="swiper_buy"&&(o='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),d.innerHTML+=o}function R(e,t){const o=document.querySelector("#galery_"+e+" .cart__slide");if(window.current_slide=null,!o)return!1;const i=o.querySelector(".photo"),a=o.querySelector(".cart .red");let l,s,n=0,_=0;i.src=t[n],i.addEventListener("mousemove",f=>{let p=parseInt(f.layerX*100/q/20);_!==p&&(i.src=t[p],_=p),a.style.left=p*20+"%"}),o.addEventListener("mouseleave",()=>{i.src=t[0],a.style.left="0%"}),o.addEventListener("touchstart",f=>l=f.targetTouches[0].pageX-o.offsetLeft),o.addEventListener("touchmove",f=>s=f.targetTouches[0].pageX-o.offsetLeft),o.addEventListener("touchend",()=>{l>s?n++:n--,n>4&&(n=4),n<0&&(n=0),i.src=t[n],a.style.left=n*20+"%"}),o.addEventListener("click",()=>{if(document.body.clientWidth<500)return!1;o.classList.toggle("watch"),window.current_slide=o,L()})}function g(e,t,o){window.compareCars=t,window.favorCars=e,d.innerHTML="",e.forEach((i,a)=>{S(i,a+1),a===2&&location.pathname!=="/personal/favorite-cars/"&&S(null,"abdul"),a===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&S(null,"swiper_buy")}),!d.innerHTML&&location.pathname.includes("favorite")&&(d.innerHTML='<div class="nodata" style="width: 200%;text-align:center">HЕТ ИЗБРАННЫХ АВТОМОБИЛЕЙ </div>'),location.pathname!=="/"&&(d.innerHTML+='<div class="pager">Страницы: <span id="pager"></span></div>'),console.log("totalPages",o),o=o||12,F(o),W(),V(),e.forEach((i,a)=>R(a+1,i.photos))}let b=document.querySelector(".type_views"),q=285,L=()=>{let e=document.querySelector("cards .cart__slide");e&&(q=e.clientWidth),window.current_slide&&(q=window.current_slide.clientWidth)};document.addEventListener("DOMContentLoaded",()=>setTimeout(L,500));window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let e=localStorage.getItem("TYPE_VIEW")||"dot4",t=document.querySelector("."+e);t&&t.classList.add("active"),t&&x({srcElement:{classList:{value:e}}})});b&&b.addEventListener("click",e=>{x(e),localStorage.setItem("TYPE_VIEW",e.srcElement.classList.value.slice(0,4))});function x(e){if(!e||!d)return!1;if(d.classList=[],L(),e.srcElement.classList.value==="dot8"&&d.classList.add("cards","dot8"),e.srcElement.classList.value==="dot4"&&d.classList.add("cards","dot4"),e.srcElement.classList.value==="dot1"&&d.classList.add("cards","dot1"),e.srcElement.classList.add){for(let t in b.children)b.children[t].classList&&b.children[t].classList.remove("active");e.srcElement.classList.add("active")}}document.addEventListener("keydown",e=>{e.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),L())});let h=document.querySelector(".type_views.coin");h&&h.addEventListener("click",()=>{let e=h.querySelector("img").style.rotate!=="180deg";h.querySelector("img").style.rotate=e?"180deg":"0deg",console.log("запрос нужен more = ",e)});let r={};r.Марка=["Все","AUDI","BMV","Brilliance","BYD","Cadilac"];r.Марка.value="";r.Модель=["Все","3 серия","5 серия","X1","X3","X5"];r.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];r["Ширина профиля"]=["Все","155","185","195","205","215","225"];r["Высота профиля"]=["Все","45","55","60","65","70"];r.Диаметр=["Все","13","14","15","16","17"];r.Сезон=["Все","Зима Шип","Лето"];r.Город=["Все","Альметьевск","Казань","Набережные Челны","Нижнекамск","Стерлитамак"];r["Тип кузова"]=["Все","Автобус","Внедорожник","Кроссовер","Купе","Лифтбек","Минивэн","Пикап","Седан","Универсал","Фургон","Хетчбэк"];r.Цвет=["Все","Бежевый","Белый","Голубой","Желтый","Зелёный","Золотой","Коричневый","Красный","Оранжевый","Серебряный","Серый","Синий","Фиолетовый","Чёрный"];r["Тип КПП"]=["Все","Автоматическая","Вариатор","Механическая","Робот"];r["Тип двигателя"]=["Все","Бензиновый","Гибридный","Дизельный","Электро"];r["Тип привода"]=["Все","Задний","Передний","Полный"];r.Руль=["Все","Левый"];r.Диски=["Все","Отсутствуют"];function I(){document.querySelectorAll("comb").forEach(t=>{let o=t.dataset.placeholder,i=r[o];if(i){let p=i.map(H=>'<div data-parent="'+o+'">'+H+"</div>");t.innerHTML=`<div class='big-combo' tabindex='1'>
        <span class='big-comb__selected'>
          <span class='big-comb__placeholder'>${i.value||o}</span>
          <input class='big-comb__input' type="text">
        </span>
        <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
        <div class='big_comb__items' onclick='big_comb_select(event)'>
            ${p.join("")}
        </div>
    </div>`}let a=t.querySelector(".big-combo"),l=t.querySelector(".big_comb__items"),s=t.querySelector(".big-comb__input"),n=t.querySelector(".big-comb__placeholder"),_=t.querySelector(".big-combo img");a&&a.addEventListener("focus",()=>{l.style.display="block",s.style.display="inline",n&&(n.style.display="none"),_.style.rotate="180deg",s.focus(),s.select()}),s&&(s.addEventListener("blur",()=>f()),s.addEventListener("click",()=>f()),s.addEventListener("keydown",p=>p.key==="Escape"&&f()));function f(){l&&(l.style.display="none"),s&&(s.style.display="none"),_&&(_.style.rotate="0deg"),n&&(n.style.display="")}})}P().then(e=>{r.Марка=e.map(t=>t.name),N.push(...e),I()});function Y(e){let t=N.find(o=>o.name===e);t&&B(t.id).then(o=>{r.Модель=o.map(i=>i.name),C.push(...o),I()}),t||(r.Модель=["Неизвестный бренд"],I())}const j=20;function z(e){const t=new URLSearchParams(window.location.search),o=t.get("brandId"),i=t.get("brand");o&&(e.brandId=o,e.brand=i,$("Марка",i));const a=t.get("modelId"),l=t.get("model");a&&(e.modelId=a,e.model=l,$("Модель",l));const s=t.get("page");e.offset=s}function $(e,t){setTimeout(()=>{console.log(e);let o=document.querySelector(`[data-placeholder="${e}"]`);o&&(o.querySelector(".big-comb__placeholder").innerText=t,o.querySelector(".big-comb__placeholder").classList.add("bold"))},2e3)}function O(e,t,o,i){console.log("999 99 ishandEvent",t),t||z(o),console.log("#222 ##### filterParams",o),k(j,o).then(a=>{e=M(a.items);let l=Math.ceil(a.totalCount/j);i(e,a.items,l),document.querySelector("#set_filter span.number").innerHTML=a.totalCount+" "+E(a.totalCount,["предложение","предложения","предложений"]),(t||o.brandId)&&(document.getElementById("set_filter").scrollIntoView({behavior:"smooth",block:"start"}),document.getElementById("brands_dynamic").style.display="none",document.querySelector(".filter-white").style.marginBottom=0,document.querySelector("#vitrina_name").innerHTML="Автомобили "+(o.brand||""))})}function X(e,t){if(console.log("<> <> <> value  = ",e[t].value),c[t]=e[t].value,t==="Марка"){let o=N.find(i=>i.name===e[t].value);o&&(c.brandId=o.id,c.brand=o.name),Y(e[t].value)}if(t==="Модель"){let o=C.find(i=>i.name===e[t].value);o&&(c.modelId=o.id,c["model="]=o.name)}T("ishandEvent")}let c={};function T(e){console.log("ishandEvent",e);let t=document.querySelector(".cars_link"),o=document.querySelector(".view_buttons");location.pathname==="/"?(t&&(t.style.display="block"),localStorage.removeItem("TYPE_VIEW")):(t&&(t.style.display="none"),o&&(o.style.display="block"),localStorage.getItem("TYPE_VIEW")||localStorage.setItem("TYPE_VIEW","dot8"));let i;location.pathname==="/"?(document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",k(7,c).then(a=>{i=M(a.items),E(a.totalCount,["предложение","предложений","предложений"]),document.querySelector("#set_filter span.number").innerHTML=a.totalCount+" "+E(a.totalCount,["предложение","предложения","предложений"]),e||g(i,a.items)})):location.pathname==="/tyres/"?(document.querySelector("#vitrina_name").innerHTML="Каталог шин",i=[{address:"Альметьевск , Герцена 1Б",id:210,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:211,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:212,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:213,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:214,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg"]}],setTimeout(()=>g(i))):location.pathname==="/cars/"?O(i,e,c,g):location.pathname==="/personal/favorite-cars/"?(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",i=localStorage.getItem("FavoriteCars"),i=i?JSON.parse(i):[],setTimeout(()=>g(i))):(document.querySelector("#vitrina_name").innerHTML="111 Автомобили",console.log(" тут карточек нет, либо не сформированы"))}const A=new URLSearchParams(window.location.search),D=A.get("id");D||T();window.getVitrina=T;window.goToCars=function(){let e="?";c.brandId&&(e="?brand="+c.Марка,e+="&brandId="+c.brandId),c.modelId&&(e+="&model="+c.Модель,e+="&modelId="+c.modelId),location.href="/cars/"+e};window.clearFilter=function(){location.href=location.pathname};window.big_comb_select=function(e){let t=e.srcElement.dataset.parent,o=e.srcElement.innerText,i=e.srcElement.parentElement.parentElement;r[t].value=o,i.querySelector(".big-comb__placeholder").innerText=o,i.querySelector(".big-comb__placeholder").classList.add("bold"),i.querySelector(".big-comb__input").value=o,i.querySelector(".big-comb__input").blur(),X(r,t)};let m=document.querySelector(".frame-filter__controls-advanced"),K=document.querySelector(".filter-fields");m&&m.addEventListener("click",()=>{m.classList.length===1?(m.classList.add("active"),K.classList.add("active")):(m.classList.remove("active"),K.classList.remove("active"))});let v=document.querySelector(".f_auto"),w=document.querySelector(".f_tire");if(v&&w){let e=document.querySelector(".f_auto_buttons"),t=document.querySelector(".f_tire_buttons"),o=document.querySelector(".filter__controls-info");v.addEventListener("click",()=>{v.classList.add("active"),w.classList.remove("active"),t&&(t.style.display="none"),e&&(e.style.display="flex"),o&&(o.style.display="none")}),w.addEventListener("click",()=>{w.classList.add("active"),v.classList.remove("active"),e&&(e.style.display="none"),t&&(t.style.display="flex"),o&&(o.style.display="flex")})}
