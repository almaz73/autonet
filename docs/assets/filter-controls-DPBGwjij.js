import{f as L}from"./main-DRGPb5tS.js";const q="https://ext.cartat.ru/exchange";function V(){let t=q+"/api/Auto/GetCarCount";return fetch(t).then(r=>{if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return r.json()}).then(r=>r).catch(r=>{console.error("Произошла ошибка:",r)})}function E(t){let r=q+"/api/Auto/GetList?Limit="+t;return fetch(r).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>e).catch(e=>console.error("Произошла ошибка:",e))}let d=document.querySelector("cards");function b(t,r){let e;isNaN(r)||(e=`<div class='cart' id='galery_${r}' >
              <div class='cart__slide'>                    
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${t.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
                  <span class='dark-fon'/>                    
              </div>
              <a class="big_link" href='${t.href}' title="перейти">
                  <div class='name'>
                      <br>                      
                      ${t.name}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная рещина" class="tyres_icon " 
                       style="display: ${t.type==="tyres"?"block":"none"}; 
                       opacity: ${t.type==="tyres"&&t.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${t.price?t.price+" ₽":""} </div>
                      <div class='cart__of'>${t.fromPerMonth?"ot "+t.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${t.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${t.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${t.id}')" ondblclick="dblCompare('${t.id}')">
                          <img id="compareId_${t.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${t.id}')">
                          <img id="favoriteId_${t.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),r==="abdul"&&(e="<abdul></abdul>",setTimeout(window.reloadAbdul)),r==="swiper_buy"&&(e='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),d.innerHTML+=e}function I(t,r){const e=document.querySelector("#galery_"+t+" .cart__slide");if(window.current_slide=null,!e)return!1;const o=e.querySelector(".photo"),n=e.querySelector(".cart .red");let p,s,a=0,f=0;o.src=r[a],o.addEventListener("mousemove",c=>{let l=parseInt(c.layerX*100/w/20);f!==l&&(o.src=r[l],f=l),n.style.left=l*20+"%"}),e.addEventListener("mouseleave",()=>{o.src=r[0],n.style.left="0%"}),e.addEventListener("touchstart",c=>p=c.targetTouches[0].pageX-e.offsetLeft),e.addEventListener("touchmove",c=>s=c.targetTouches[0].pageX-e.offsetLeft),e.addEventListener("touchend",()=>{p>s?a++:a--,a>4&&(a=4),a<0&&(a=0),o.src=r[a],n.style.left=a*20+"%"}),e.addEventListener("click",()=>{if(document.body.clientWidth<500)return!1;e.classList.toggle("watch"),window.current_slide=e,g()})}function y(t,r){window.compareCars=r,window.favorCars=t,d.innerHTML="",t.forEach((e,o)=>{b(e,o+1),o===2&&location.pathname!=="/personal/favorite-cars/"&&b(null,"abdul"),o===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&b(null,"swiper_buy")}),t.forEach((e,o)=>I(o+1,e.photos)),d.innerHTML||(d.innerHTML="Нет избранных автомобилей...")}let _=document.querySelector(".type_views"),w,g=()=>{let t=document.querySelector("cards .cart__slide");t&&(w=t.clientWidth),window.current_slide&&(w=window.current_slide.clientWidth)};document.addEventListener("DOMContentLoaded",()=>setTimeout(g,500));window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let t=localStorage.getItem("TYPE_VIEW")||"dot4",r=document.querySelector("."+t);r&&r.classList.add("active"),r&&T({srcElement:{classList:{value:t}}})});_&&_.addEventListener("click",t=>{T(t),localStorage.setItem("TYPE_VIEW",t.srcElement.classList.value.slice(0,4))});function T(t){if(d.classList=[],g(),t.srcElement.classList.value==="dot8"&&d.classList.add("cards","dot8"),t.srcElement.classList.value==="dot4"&&d.classList.add("cards","dot4"),t.srcElement.classList.value==="dot1"&&d.classList.add("cards","dot1"),t.srcElement.classList.add){for(let r in _.children)_.children[r].classList&&_.children[r].classList.remove("active");t.srcElement.classList.add("active")}}document.addEventListener("keydown",t=>{t.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),g())});let m=document.querySelector(".type_views.coin");m&&m.addEventListener("click",()=>{let t=m.querySelector("img").style.rotate!=="180deg";m.querySelector("img").style.rotate=t?"180deg":"0deg",console.log("запрос нужен more = ",t)});function $(t,r){console.log("items = ",t),console.log("name = ",r),console.log("items[name].value = ",t[r].value)}function S(t){let r=[];return t.forEach(e=>{let o=e.milleage+" км, ";e.engineCapacity&&(o+=e.engineCapacity),e.gearboxType&&(o+=" "+e.gearboxType),e.enginePower&&(o+=" ("+e.enginePower+"&nbsp;л.с)"),e.bodyType&&(o+=", "+e.bodyType),o+=", "+e.driveType,e.engineType&&(o+=", "+e.engineType);let n=L(parseInt(parseInt(e.price.replace(/ /g,""))/90.12));r.push({address:e.fullAddress,id:e.id,name:e.brand+" "+e.model,href:"/cars/2106/651138/",price:L(e.price),fromPerMonth:n,info:o,photos:e.images})}),r}function j(){let t=document.querySelector(".cars_link"),r=document.querySelector(".view_buttons");location.pathname==="/"?(t.style.display="block",localStorage.setItem("TYPE_VIEW","dot4")):(t.style.display="none",r.style.display="block");let e;location.pathname==="/"?(document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",E(7).then(o=>{e=S(o),y(e,o)})):location.pathname==="/tyres/"?(document.querySelector("#vitrina_name").innerHTML="Каталог шин",e=[{address:"Альметьевск , Герцена 1Б",id:210,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:211,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:212,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:213,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:214,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg"]}],y(e)):location.pathname==="/cars/"?E(12).then(o=>{e=S(o),y(e,o)}):location.pathname==="/personal/favorite-cars/"?(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",e=localStorage.getItem("FavoriteCars"),e=e?JSON.parse(e):[],y(e)):(document.querySelector("#vitrina_name").innerHTML="Автомобили ВАЗ (LADA) с пробегом",console.log(" тут карточек нет, либо не сформированы"))}const x=new URLSearchParams(window.location.search),M=x.get("id");M||j();window.getVitrina=j;window.addFavorite=function(t){let r=window.favorCars.find(s=>s.id===t),e=k(),o=document.querySelector("#favoriteId_"+t),n=o.classList.contains("chosen"),p=e.find(s=>s.id===t);n?location.pathname==="/personal/favorite-cars/"?(o.classList.remove("chosen"),e=e.filter(s=>s.id!==t),localStorage.setItem("FavoriteCars",JSON.stringify(e)),window.getVitrina()):location.href="/personal/favorite-cars/":(o.classList.add("chosen"),p||e.push(r)),e&&(localStorage.setItem("FavoriteCars",JSON.stringify(e)),K(e))};function K(t){(t||k()).forEach(e=>{let o=document.querySelector("#favoriteId_"+e.id);o&&o.classList.add("chosen")})}function k(){let t=localStorage.getItem("FavoriteCars");return t?t=JSON.parse(t):t=[],t}document.addEventListener("DOMContentLoaded",()=>{setTimeout(K,2e3)});let i={};i.Марка=["Все","AUDI","BMV","Brilliance","BYD","Cadilac"];i.Марка.value="";i.Модель=["Все","3 серия","5 серия","X1","X3","X5"];i.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];i["Ширина профиля"]=["Все","155","185","195","205","215","225"];i["Высота профиля"]=["Все","45","55","60","65","70"];i.Диаметр=["Все","13","14","15","16","17"];i.Сезон=["Все","Зима Шип","Лето"];i.Город=["Все","Альметьевск","Казань","Набережные Челны","Нижнекамск","Стерлитамак"];i["Тип кузова"]=["Все","Автобус","Внедорожник","Кроссовер","Купе","Лифтбек","Минивэн","Пикап","Седан","Универсал","Фургон","Хетчбэк"];i.Цвет=["Все","Бежевый","Белый","Голубой","Желтый","Зелёный","Золотой","Коричневый","Красный","Оранжевый","Серебряный","Серый","Синий","Фиолетовый","Чёрный"];i["Тип КПП"]=["Все","Автоматическая","Вариатор","Механическая","Робот"];i["Тип двигателя"]=["Все","Бензиновый","Гибридный","Дизельный","Электро"];i["Тип привода"]=["Все","Задний","Передний","Полный"];i.Руль=["Все","Левый"];i.Диски=["Все","Отсутствуют"];window.addEventListener("load",()=>{document.querySelectorAll("comb").forEach(r=>{let e=r.dataset.placeholder,o=i[e];if(o){let l=o.map(C=>'<div data-parent="'+e+'">'+C+"</div>");r.innerHTML=`<div class='big-combo' tabindex='1'>
        <span class='big-comb__selected'>
          <span class='big-comb__placeholder'>${o.value||e}</span>
          <input class='big-comb__input' type="text">
        </span>
        <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
        <div class='big_comb__items' onclick='big_comb_select(event)'>
            ${l.join("")}
        </div>
    </div>`}let n=r.querySelector(".big-combo"),p=r.querySelector(".big_comb__items"),s=r.querySelector(".big-comb__input"),a=r.querySelector(".big-comb__placeholder"),f=r.querySelector(".big-combo img");n&&n.addEventListener("focus",()=>{p.style.display="block",s.style.display="inline",a.style.display="none",f.style.rotate="180deg",s.focus(),s.select()}),s&&(s.addEventListener("blur",()=>c()),s.addEventListener("click",()=>c()),s.addEventListener("keydown",l=>l.key==="Escape"&&c()));function c(){p.style.display="none",s.style.display="none",a.style.display="",f.style.rotate="0deg"}})});window.big_comb_select=function(t){let r=t.srcElement.dataset.parent,e=t.srcElement.innerText,o=t.srcElement.parentElement.parentElement;i[r].value=e,o.querySelector(".big-comb__placeholder").innerText=e,o.querySelector(".big-comb__placeholder").classList.add("bold"),o.querySelector(".big-comb__input").value=e,o.querySelector(".big-comb__input").blur(),$(i,r)};let u=document.querySelector(".frame-filter__controls-advanced"),N=document.querySelector(".filter-fields");u&&u.addEventListener("click",()=>{u.classList.length===1?(u.classList.add("active"),N.classList.add("active")):(u.classList.remove("active"),N.classList.remove("active"))});let h=document.querySelector(".f_auto"),v=document.querySelector(".f_tire");if(h&&v){let t=document.querySelector(".f_auto_buttons"),r=document.querySelector(".f_tire_buttons"),e=document.querySelector(".filter__controls-info");h.addEventListener("click",()=>{h.classList.add("active"),v.classList.remove("active"),r.style.display="none",t.style.display="flex",e.style.display="none"}),v.addEventListener("click",()=>{v.classList.add("active"),h.classList.remove("active"),t.style.display="none",r.style.display="flex",e.style.display="flex"})}export{V as a};
