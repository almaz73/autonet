import{i as G,d as J,e as X,f as Q,g as Z,h as ee,j as te,k as ie,l as oe,m as B}from"./favoriteCars-hjtfHE--.js";import{i as ae}from"./compareCars-DjUyrNbL.js";import{g as c,a as p,e as W,p as A,d as M}from"./global-func-By-vpF4u.js";let w=1;function q(){return location.href.includes("&page")?location.href.slice(0,location.href.lastIndexOf("&page")):location.href}function re(e){const i=document.querySelector("#pager");if(!i)return!1;let t="";w=+c("page")||1;const o=w>3?w-3:0;o>0&&(t+=`<a href=${q()}> 1</a> <span> | </span> ... <span> | </span>`);for(let r=1+o;r<e&&!(r-o>5);r++)t+=`<a ${w===r?'class="active"':""} href=${q()}&page=${r}>${r}</a><span> | </span>`;e>5?t+=` ... <span> | </span>  <a href=${q()}&page=${e}>${e}</a><span> | </span> `:e==="1"?t+='<a class="active">1</a>':t+=` <a href=${q()}&page=${e} class=${e!==w?"":"active"}>${e}</a><span> | </span> `,e&&e!==w&&window.screen.width>500&&(t+=`<a href="javascript:nextPage('${w}')"> След.</a>`),i.innerHTML=t}window.nextPage=e=>{let i="&page="+(+e+1);location.href.includes("&page=")?location.href=q()+i:location.href=location.href+i};let _;document.addEventListener("DOMContentLoaded",()=>{_=document.querySelector("cards")});function C(e,i){let t;isNaN(i)||(t=`<div class='cart' id='galery_${i}' >
              <img src="/src/images/load.gif" alt="" class="smallloader hide"/>
              <div class='cart__slide'>            
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${e.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
                  <span class='dark-fon'/>
              </div>
              <a class="big_link" href='${e.href}' title="перейти">
                  <div class='name'>
                      <br>                      
                      ${e.name}, ${e.yearReleased}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная резина" class="tyres_icon " 
                       style="display: ${e.type==="tyres"?"block":"none"}; 
                       opacity: ${e.type==="tyres"&&e.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${e.price?e.price+" ₽":""} </div>
                      <div class='cart__of'>${e.fromPerMonth?"ot "+e.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${e.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${e.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${e.id}')" ondblclick="dblCompare('${e.id}')">
                          <img id="compareId_${e.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${e.id}')">
                          <img id="favoriteId_${e.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),i==="abdul"&&(t="<abdul></abdul>",setTimeout(window.reloadAbdul)),i==="swiper_buy"&&(t='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),_.innerHTML+=t}function le(e,i){const t=document.querySelector("#galery_"+e+" .cart__slide");if(window.current_slide=null,!t)return!1;const o=t.querySelector(".photo"),r=t.querySelector(".cart .red");let s,d,n=0,u=0;o.src=i[n],o.addEventListener("mousemove",f=>{let y=parseInt(f.layerX*100/R/20);if(u!==y){j();let h=f.target.parentNode.parentNode.querySelector(".smallloader");o.src=i[y],h.classList.remove("hide"),o.onload=()=>h.classList.add("hide"),u=y}r.style.left=y*20+"%"}),t.addEventListener("mouseleave",()=>{o.src=i[0],r.style.left="0"}),t.addEventListener("touchstart",f=>s=f.targetTouches[0].pageX-t.offsetLeft),t.addEventListener("touchmove",f=>d=f.targetTouches[0].pageX-t.offsetLeft),t.addEventListener("touchend",()=>{s>d?n++:n--,n>4&&(n=4),n<0&&(n=0),o.src=i[n],r.style.left=n*20+"%"}),t.addEventListener("click",()=>{if(document.body.clientWidth<500)return!1;t.classList.toggle("watch"),window.current_slide=t,j()})}function $(e,i,t){if(window.compareCars=i,window.favorCars=e,!_)return!1;_.innerHTML="",e.forEach((o,r)=>{C(o,r+1),r===2&&location.pathname!=="/personal/favorite-cars/"&&C(null,"abdul"),r===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&C(null,"swiper_buy")}),!_.innerHTML&&location.pathname.includes("favorite")&&(_.innerHTML='<div class="nodata" style="width: 200%;text-align:center">HЕТ ИЗБРАННЫХ АВТОМОБИЛЕЙ </div>'),location.pathname!=="/"&&location.pathname!=="/personal/favorite-cars/"&&(_.innerHTML+='<div class="pager">1111 Страницы: <span id="pager"></span></div>'),re(t),ae(),G(),e.forEach((o,r)=>le(r+1,o.photos)),E=document.querySelector(".type_views"),E&&E.addEventListener("click",o=>{O(o),localStorage.setItem("TYPE_VIEW",o.srcElement.classList.value.slice(0,4))})}let E,R=285,j=()=>{console.log(111);let e=document.querySelector("cards .cart__slide");e&&(R=e.clientWidth),window.current_slide&&(R=window.current_slide.clientWidth)};window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let e=localStorage.getItem("TYPE_VIEW")||"dot4",i=document.querySelector("."+e);i&&i.classList.add("active"),i&&O({srcElement:{classList:{value:e}}})});function O(e){if(!e||!_)return!1;if(_.classList=[],j(),e.srcElement.classList.value==="dot8"&&_.classList.add("cards","dot8"),e.srcElement.classList.value==="dot4"&&_.classList.add("cards","dot4"),e.srcElement.classList.value==="dot1"&&_.classList.add("cards","dot1"),e.srcElement.classList.add){for(let i in E.children)E.children[i].classList&&E.children[i].classList.remove("active");e.srcElement.classList.add("active")}}document.addEventListener("keydown",e=>{e.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),j())});let x=document.querySelector(".type_views.coin");x&&x.addEventListener("click",()=>{let e=x.querySelector("img").style.rotate!=="180deg";x.querySelector("img").style.rotate=e?"180deg":"0deg",console.log("запрос нужен more = ",e)});let S=!1,H=function(e){S=e,ne()};const l={};let I={};l.Марка=[];l.Марка.value="";l.Модель=["е выбрана марка "];l.Город=[];l["Тип кузова"]=[];l.Цвет=["Все","Бежевый","Белый","Голубой","Желтый","Зелёный","Золотой","Коричневый","Красный","Оранжевый","Серебряный","Серый","Синий","Фиолетовый","Чёрный"];l["Тип КПП"]=[];l["Тип двигателя"]=[];l["Тип привода"]=[];l.Руль=[];l.Диски=["Все","Отсутствуют"];l.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];l["Ширина профиля"]=["Все","155","185","195","205","215","225"];l["Высота профиля"]=["Все","45","55","60","65","70"];l.Диаметр=["Все","13","14","15","16","17"];l.Сезон=["Все","Зима Шип","Лето"];function z(e){document.querySelectorAll("comb").forEach(t=>{if(e&&t.dataset.placeholder!=="Модель")return!1;let o=t.dataset.placeholder,r=l[o];if(r){let m=y(r,o);t.innerHTML=`<div class='big-combo' tabindex='1' title="${r.value||o}">
    <span class='big-comb__selected'>
      <span class='big-comb__placeholder'>${r.value||o}</span>
      <input class='big-comb__input' type="text">
    </span>
    <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
    <div class='big_comb__items' onclick='big_comb_select(event)'>
        ${m.join("")}
    </div>
</div>`}let s=t.querySelector(".big-combo"),d=t.querySelector(".big_comb__items"),n=t.querySelector(".big-comb__input"),u=t.querySelector(".big-comb__placeholder"),f=t.querySelector(".big-combo img");s&&s.addEventListener("focus",()=>{d.style.display="block",n.style.display="inline",u&&(u.style.display="none"),f.style.rotate="180deg",n.focus(),n.select()}),n&&(n.addEventListener("blur",()=>h()),n.addEventListener("click",()=>h()),n.addEventListener("keydown",m=>m.key==="Escape"&&h()),n.addEventListener("input",m=>{let v=m.target.value;I.Марка||(I=JSON.parse(JSON.stringify(l))),l[o]=I[o].filter(T=>T.includes(m.target.value)),v?d.innerHTML=y(l[o],o).join(""):d.innerHTML=y(I[o],o).join("")}));function y(m,v){return m.map(T=>'<div data-parent="'+v+'">'+T+"</div>")}function h(){d&&(d.style.display="none"),n&&(n.style.display="none"),f&&(f.style.rotate="0deg"),u&&(u.style.display="")}["Марка","Тип кузова","Тип КПП","Тип двигателя","Тип привода","Руль","Модель","Город","Производитель","Ширина профиля","Высота профиля","Диаметр","Сезон","Диски"].includes(u.innerText)||u.classList.add("bold")}),W.emit("dataUpdated",{})}function U(e){let i=p.brandsIds.find(t=>t.name.toUpperCase()===e.toUpperCase());i&&oe(i.id).then(t=>{l.Модель=t.map(o=>o.name),I={},p.modelsIds.push(...t),z("onlyModel")}),i||(l.Модель=["Неизвестный бренд"])}function ne(){Promise.all([new Promise(e=>{J().then(i=>{l.Марка=i.map(o=>o.name),p.brandsIds.push(...i);const t=c("brand");t&&U(t),e()})}),new Promise(e=>{X().then(i=>{l.Город=i,e()})}),S&&new Promise(e=>{Q().then(i=>{l["Тип КПП"]=i.map(t=>t.title),p.gearboxTypes.push(...i),e()})}),S&&new Promise(e=>{Z().then(i=>{l["Тип двигателя"]=i.map(t=>t.title),p.engineTypes.push(...i),e()})}),S&&new Promise(e=>{ee().then(i=>{l["Тип привода"]=i.map(t=>t.title),p.driveTypes.push(...i),e()})}),S&&new Promise(e=>{te().then(i=>{l.Руль=i.map(t=>t.title),p.wheelTypes.push(...i),e()})}),S&&new Promise(e=>{ie().then(i=>{l["Тип кузова"]=i.map(t=>t.title),p.bodyTypes.push(...i),e()})})]).then(e=>{z()}).catch(e=>{console.error("Произошла ошибка:",e)})}const V=20,Y=[];let N,g=!1;function se(e){const i=c("brandId"),t=c("brand");i&&(e.brandId=i,e.brand=t,b("Марка",t));const o=c("modelId"),r=c("model");o&&(e.modelId=o,e.model=r,b("Модель",r));const s=c("city");s&&(e.city=s,b("Город",s));const d=c("gearboxType");d&&(g=!0,e.gearboxType=d,b("Тип КПП",d));const n=c("engineType");n&&(g=!0,e.engineType=n,b("Тип двигателя",n));const u=c("bodyType");u&&(g=!0,e.bodyType=u,b("Тип кузова",u));const f=c("wheelType");f&&(g=!0,e.wheelType=f,b("Руль",f));const y=c("driveType");y&&(g=!0,e.driveType=y,b("Тип привода",y));const h=c("yearReleasedFrom");h&&(e.yearReleasedFrom=h,L("yearReleasedFrom",h));const m=c("yearReleasedTo");m&&(g=!0,e.yearReleasedTo=m,L("yearReleasedTo",m));const v=c("priceTo");v&&(e.priceTo=v,L("priceTo",v));const T=c("milleageFrom");T&&(g=!0,e.milleageFrom=T,L("milleageFrom",T));const K=c("milleageTo");K&&(g=!0,e.milleageTo=K,L("milleageTo",K));const k=c("priceFrom");if(k&&(g=!0,e.priceFrom=k,L("priceFrom",k)),g){let D=document.querySelector(".frame-filter__controls-advanced"),P=document.querySelector(".filter-fields");D.classList.add("active"),P.classList.add("active")}e.offset=c("page"),H(g)}function b(e,i){if(N)return!1;Y.push({name:e,value:i})}W.on("dataUpdated",de);function de(){Y.forEach(e=>{let i=document.querySelector(`[data-placeholder="${e.name}"]`);i&&i.querySelector(".big-comb__placeholder")&&(i.querySelector(".big-comb__placeholder").innerText=e.value,i.querySelector(".big-comb__placeholder").classList.add("bold"))})}function L(e,i){if(N)return!1;let t=document.querySelector(`[onchange="input_chamged('${e}', this.value)"]`);t&&(t.value=i,t.classList.add("bold"))}function ce(e,i,t,o){N=i,N||se(t),B(V,t).then(r=>{e=A(r.items);let s=Math.ceil(r.totalCount/V);o(e,r.items,s),document.querySelector("#set_filter span.number").innerHTML=r.totalCount+" "+M(r.totalCount,["предложение","предложения","предложений"]),(N||t.brandId)&&(pe(),document.getElementById("brands_dynamic").style.display="none",document.querySelector(".filter-white").style.marginBottom=0,document.querySelector("#vitrina_name").innerHTML="Автомобили "+(t.brand||"")+" "+(t.model||"")+" "+(t.city?`(город ${t.city})`:""))})}function pe(){setTimeout(()=>document.querySelector("#filter_cars").removeEventListener("mouseleave",e),3e3),document.querySelector("#filter_cars").addEventListener("mouseleave",e);function e(){document.getElementById("set_filter").scrollIntoView({behavior:"smooth",block:"start"}),document.querySelector("#filter_cars").removeEventListener("mouseleave",e)}}function fe(e,i){if(i==="Марка"){let t=p.brandsIds.find(o=>o.name===e[i].value);t&&(a.brandId=t.id,a.brand=t.name,a.modelId="",a.model="",setTimeout(()=>document.querySelector('[data-placeholder="Модель"] .big-comb__placeholder').innerText="",2e3)),U(e[i].value)}if(i==="Модель"){let t=p.modelsIds.find(o=>o.name===e[i].value);t&&(a.modelId=t.id,a.model=t.name)}if(i==="Город"&&(a.city=e[i].value),i==="Тип КПП"){let t=p.gearboxTypes.find(o=>o.title===e[i].value);a.gearboxType=t.name}if(i==="Тип двигателя"){let t=p.engineTypes.find(o=>o.title===e[i].value);a.engineType=t.name}if(i==="Тип привода"){let t=p.driveTypes.find(o=>o.title===e[i].value);a.driveType=t.name}if(i==="Руль"){let t=p.wheelTypes.find(o=>o.title===e[i].value);a.wheelType=t.name}if(i==="Тип кузова"){let t=p.bodyTypes.find(o=>o.title===e[i].value);a.bodyType=t.name}F("ishandEvent")}function ue(e,i){a[e]=i,F("ishandEvent")}let a={};function F(e){let i=document.querySelector(".cars_link");location.pathname==="/"?(i&&(i.style.display="block"),localStorage.removeItem("TYPE_VIEW")):(i&&(i.style.display="none"),localStorage.getItem("TYPE_VIEW")||localStorage.setItem("TYPE_VIEW","dot8"));let t;location.pathname==="/"?(document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",e||H(!1),B(7,a).then(o=>{t=A(o.items),M(o.totalCount,["предложение","предложений","предложений"]),document.querySelector("#set_filter span.number").innerHTML=o.totalCount+" "+M(o.totalCount,["предложение","предложения","предложений"]),e||$(t,o.items)})):location.pathname==="/tyres/"?(document.querySelector("#vitrina_name").innerHTML="Каталог шин",t=[{address:"Альметьевск , Герцена 1Б",id:210,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:211,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:212,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:213,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:214,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg"]}],setTimeout(()=>$(t))):location.pathname==="/cars/"?ce(t,e,a,$):location.pathname==="/personal/favorite-cars/"?(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",t=localStorage.getItem("FavoriteCars"),t=t?JSON.parse(t):[],setTimeout(()=>$(t))):(document.querySelector("#vitrina_name").innerHTML="Автомобили",console.log(" тут карточек нет, либо не сформированы"))}const ye=c("id");ye||F();window.getVitrina=F;window.goToCars=function(){let e="?";a.brandId&&(e="?brand="+(a.Марка||a.brand),e+="&brandId="+a.brandId),a.modelId&&(e+="&model="+(a.Модель||a.model),e+="&modelId="+a.modelId),a.city&&(e+="&city="+a.city),a.gearboxType&&(e+="&gearboxType="+a.gearboxType),a.engineType&&(e+="&engineType="+a.engineType),a.driveType&&(e+="&driveType="+a.driveType),a.wheelType&&(e+="&wheelType="+a.wheelType),a.bodyType&&(e+="&bodyType="+a.bodyType),a.yearReleasedFrom&&(e+="&yearReleasedFrom="+a.yearReleasedFrom),a.yearReleasedTo&&(e+="&yearReleasedTo="+a.yearReleasedTo),a.priceTo&&(e+="&priceTo="+a.priceTo),a.priceFrom&&(e+="&priceFrom="+a.priceFrom),a.milleageFrom&&(e+="&milleageFrom="+a.milleageFrom),a.milleageTo&&(e+="&milleageTo="+a.milleageTo),location.href="/cars/"+e};window.clearFilter=function(){location.href=location.pathname};document.addEventListener("DOMContentLoaded",()=>{window.big_comb_select=function(r){let s=r.srcElement.dataset.parent,d=r.srcElement.innerText,n=r.srcElement.parentElement.parentElement;l[s].value=d,n.querySelector(".big-comb__placeholder").innerText=d,n.querySelector(".big-comb__placeholder").classList.add("bold"),n.querySelector(".big-comb__input").value=d,n.querySelector(".big-comb__input").blur(),fe(l,s)},window.input_chamged=function(r,s){ue(r,s)};let e=document.querySelector(".frame-filter__controls-advanced"),i=document.querySelector(".filter-fields");e&&e.addEventListener("click",()=>{e.classList.length===1?(e.classList.add("active"),i.classList.add("active"),H(!0)):(e.classList.remove("active"),i.classList.remove("active"))});let t=document.querySelector(".f_auto"),o=document.querySelector(".f_tire");if(t&&o){let r=document.querySelector(".f_auto_buttons"),s=document.querySelector(".f_tire_buttons"),d=document.querySelector(".filter__controls-info");t.addEventListener("click",()=>{t.classList.add("active"),o.classList.remove("active"),s&&(s.style.display="none"),r&&(r.style.display="flex"),d&&(d.style.display="none")}),o.addEventListener("click",()=>{o.classList.add("active"),t.classList.remove("active"),r&&(r.style.display="none"),s&&(s.style.display="flex"),d&&(d.style.display="flex")})}});
