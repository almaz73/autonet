import{i as ee}from"./favoriteCars-B6JjzAIO.js";import{i as te}from"./compareCars-Bxc4puVS.js";import{g as c,l as ie,m as y,n as oe,o as re,q as le,r as ae,u as ne,v as se,w as de,x as ce,y as D,z as x,A as U,p as Y,B as V,C as G}from"./main-DzZIxVIP.js";let w=1;function q(){return location.href.includes("&page")?location.href.slice(0,location.href.lastIndexOf("&page")):location.href}function pe(e){const i=document.querySelector("#pager");if(!i)return!1;let t="";w=+c("page")||1;const o=w>3?w-3:0;o>0&&(t+=`<a href=${q()}> 1</a> <span> | </span> ... <span> | </span>`);for(let l=1+o;l<e&&!(l-o>5);l++)t+=`<a ${w===l?'class="active"':""} href=${q()}&page=${l}>${l}</a><span> | </span>`;e>5?t+=` ... <span> | </span>  <a href=${q()}&page=${e}>${e}</a><span> | </span> `:e==="1"?t+='<a class="active">1</a>':t+=` <a href=${q()}&page=${e} class=${e!==w?"":"active"}>${e}</a><span> | </span> `,e&&e!==w&&window.screen.width>500&&(t+=`<a href="javascript:nextPage('${w}')"> След.</a>`),i.innerHTML=t}window.nextPage=e=>{let i="&page="+(+e+1);location.href.includes("&page=")?location.href=q()+i:location.href=location.href+i};let b;document.addEventListener("DOMContentLoaded",()=>{b=document.querySelector("cards")});function R(e,i){let t;isNaN(i)||(t=`<div class='cart' id='galery_${i}' >
              <img src="/icons/load.gif" alt="" class="smallloader hide"/>
              <div class='cart__slide'>            
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${e.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
                  <span class='dark-fon'>
                    <img src="/icons/load.gif" alt="" class="gloaballoader"/>
                  </span>
              </div>
              <a class="big_link" href='${e.href}' title="перейти">
                  <div class='name'>
                      <br>                      
                      ${e.name}, ${e.yearReleased}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная резина" class="tyres_icon " 
                       style="display: ${e.type==="tyres"?"block":"none"}; 
                       opacity: ${e.type==="tyres"&&e.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${e.price?e.price+" ₽":""} </div>
                      <div class='cart__of'>${e.fromPerMonth?"ot "+e.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${e.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${e.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${e.id}')" ondblclick="dblCompare('${e.id}')">
                          <img id="compareId_${e.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${e.id}')">
                          <img id="favoriteId_${e.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),i==="abdul"&&(t="<abdul></abdul>",setTimeout(window.reloadAbdul)),i==="swiper_buy"&&(t='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),b.innerHTML+=t}function fe(e,i){const t=document.querySelector("#galery_"+e+" .cart__slide");if(window.current_slide=null,!t)return!1;const o=t.querySelector(".photo"),l=t.querySelector(".cart .red");let u,f,s=0,n=0;o.src=i[s],o.addEventListener("mousemove",d=>{let p=parseInt(d.layerX*100/H/20);if(n!==p){$();let m=d.target.parentNode.querySelector(".gloaballoader"),_=d.target.parentNode.parentNode.querySelector(".smallloader");o.src=i[p],_.classList.remove("hide"),m.classList.remove("hide"),o.onload=()=>{_.classList.add("hide"),m.classList.add("hide")},n=p}l.style.left=p*20+"%"}),t.addEventListener("mouseleave",()=>{o.src=i[0],l.style.left="0"}),t.addEventListener("touchstart",d=>u=d.targetTouches[0].pageX-t.offsetLeft),t.addEventListener("touchmove",d=>f=d.targetTouches[0].pageX-t.offsetLeft),t.addEventListener("touchend",()=>{u>f?s++:s--,s>4&&(s=4),s<0&&(s=0),o.src=i[s],l.style.left=s*20+"%"}),t.addEventListener("click",()=>{if(document.body.clientWidth<500)return!1;t.classList.toggle("watch"),window.current_slide=t,$()})}function C(e,i,t){if(window.compareCars=i,window.favorCars=e,!b)return!1;b.innerHTML="",e.forEach((o,l)=>{R(o,l+1),l===2&&location.pathname!=="/personal/favorite-cars/"&&R(null,"abdul"),l===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&R(null,"swiper_buy")}),location.pathname!=="/"&&location.pathname!=="/personal/favorite-cars/"&&(b.innerHTML+='<div class="pager">Страницы: <span id="pager"></span></div>'),pe(t),te(),ee(),e.forEach((o,l)=>fe(l+1,o.photos)),E=document.querySelector(".type_views"),E&&E.addEventListener("click",o=>{P(o),localStorage.setItem("TYPE_VIEW",o.srcElement.classList.value.slice(0,4))})}let E,H=285,$=()=>{let e=document.querySelector("cards .cart__slide");e&&(H=e.clientWidth),window.current_slide&&(H=window.current_slide.clientWidth)};window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let e=localStorage.getItem("TYPE_VIEW")||"dot4",i=document.querySelector("."+e);i&&i.classList.add("active"),i&&P({srcElement:{classList:{value:e}}})});function P(e){if(!e||!b)return!1;if(b.classList=[],$(),e.srcElement.classList.value.includes("dot8")&&b.classList.add("cards","dot8"),e.srcElement.classList.value.includes("dot4")&&b.classList.add("cards","dot4"),e.srcElement.classList.value.includes("dot1")&&b.classList.add("cards","dot1"),e.srcElement.classList.add){for(let i in E.children)E.children[i].classList&&E.children[i].classList.remove("active");e.srcElement.classList.add("active")}}document.addEventListener("keydown",e=>{e.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),$())});let S=!1,B=function(e){S=e,ue()};const a={};let I={};a.Марка=[];a.Марка.value="";a.Модель=["Не выбрана марка "];a.Город=[];a["Тип кузова"]=[];a.Цвет=[];a["Тип КПП"]=[];a["Тип двигателя"]=[];a["Тип привода"]=[];a.Руль=[];a.Диски=["Все","Отсутствуют"];a.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];a["Ширина профиля"]=["Все","155","185","195","205","215","225"];a["Высота профиля"]=["Все","45","55","60","65","70"];a.Диаметр=["Все","13","14","15","16","17"];a.Сезон=["Все","Зима Шип","Лето"];function J(e){document.querySelectorAll("comb").forEach(t=>{if(e&&t.dataset.placeholder!=="Модель")return!1;let o=t.dataset.placeholder,l=a[o];if(l){let _=p(l,o);t.innerHTML=`<div class='big-combo' tabindex='1' title="${l.value||o}">
    <span class='big-comb__selected'>
      <span class='big-comb__placeholder'>${l.value||o}</span>
      <input class='big-comb__input' type="text">
    </span>
    <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
    <div class='big_comb__items' onclick='big_comb_select(event)'>
        ${_.join("")}
    </div>
</div>`}let u=t.querySelector(".big-combo"),f=t.querySelector(".big_comb__items"),s=t.querySelector(".big-comb__input"),n=t.querySelector(".big-comb__placeholder"),d=t.querySelector(".big-combo img");u&&u.addEventListener("focus",()=>{f.style.display="block",s.style.display="inline",n&&(n.style.display="none"),d.style.rotate="180deg",s.focus(),s.select()}),s&&(s.addEventListener("blur",()=>m()),s.addEventListener("click",()=>m()),s.addEventListener("keydown",_=>_.key==="Escape"&&m()),s.addEventListener("input",_=>{let v=_.target.value;I.Марка||(I=JSON.parse(JSON.stringify(a))),a[o]=I[o].filter(T=>T.includes(_.target.value)),v?f.innerHTML=p(a[o],o).join(""):f.innerHTML=p(I[o],o).join("")}));function p(_,v){return _.map(T=>'<div data-parent="'+v+'">'+T+"</div>")}function m(){f&&(f.style.display="none"),s&&(s.style.display="none"),d&&(d.style.rotate="0deg"),n&&(n.style.display="")}["Марка","Тип кузова","Тип КПП","Тип двигателя","Тип привода","Руль","Модель","Город","Цвет","Производитель","Ширина профиля","Высота профиля","Диаметр","Сезон","Диски"].includes(n.innerText)||n.classList.add("bold")}),D.emit("dataUpdated",{})}function X(e){let i=y.brandsIds.find(t=>t.name.toUpperCase()===e.toUpperCase());i&&ce(i.id).then(t=>{a.Модель=t.map(o=>o.name),I={},y.modelsIds.push(...t),J("onlyModel")}),i||(a.Модель=["Неизвестный бренд"])}function ue(){Promise.all([new Promise(e=>{ie().then(i=>{a.Марка=i.map(o=>o.name),y.brandsIds.push(...i);const t=c("brand");t&&X(t),e()})}),new Promise(e=>{oe().then(i=>{a.Город=i,e()})}),S&&new Promise(e=>{re().then(i=>{a["Тип КПП"]=i.map(t=>t.title),y.gearboxTypes.push(...i),e()})}),S&&new Promise(e=>{le().then(i=>{a["Тип двигателя"]=i.map(t=>t.title),y.engineTypes.push(...i),e()})}),S&&new Promise(e=>{ae().then(i=>{a["Тип привода"]=i.map(t=>t.title),y.driveTypes.push(...i),e()})}),S&&new Promise(e=>{ne().then(i=>{a.Руль=i.map(t=>t.title),y.wheelTypes.push(...i),e()})}),S&&new Promise(e=>{se().then(i=>{a["Тип кузова"]=i.map(t=>t.title),y.bodyTypes.push(...i),e()})}),S&&new Promise(e=>{de().then(i=>{a.Цвет=i.map(t=>t.name),y.bodyColors.push(...i),e()})})]).then(e=>{J()}).catch(e=>{console.error("Произошла ошибка:",e)})}const z=20,Q=[];let N,g=!1;function ye(e){const i=c("brandId"),t=c("brand");i&&(e.brandId=i,e.brand=t,h("Марка",t));const o=c("modelId"),l=c("model");o&&(e.modelId=o,e.model=l,h("Модель",l));const u=c("city");u&&(e.city=u,h("Город",u));const f=c("colorId"),s=c("color");f&&(e.colorId=f,h("Цвет",s));const n=c("gearboxType");n&&(g=!0,e.gearboxType=n,h("Тип КПП",n));const d=c("engineType");d&&(g=!0,e.engineType=d,h("Тип двигателя",d));const p=c("bodyType");p&&(g=!0,e.bodyType=p,h("Тип кузова",p));const m=c("wheelType");m&&(g=!0,e.wheelType=m,h("Руль",m));const _=c("driveType");_&&(g=!0,e.driveType=_,h("Тип привода",_));const v=c("yearReleasedFrom");v&&(e.yearReleasedFrom=v,L("yearReleasedFrom",v));const T=c("yearReleasedTo");T&&(g=!0,e.yearReleasedTo=T,L("yearReleasedTo",T));const F=c("priceTo");F&&(e.priceTo=F,L("priceTo",F));const K=c("milleageFrom");K&&(g=!0,e.milleageFrom=K,L("milleageFrom",K));const k=c("milleageTo");k&&(g=!0,e.milleageTo=k,L("milleageTo",k));const M=c("engineCapacity");M&&(g=!0,e.engineCapacity=M,L("engineCapacity",M));const O=c("priceFrom");if(O&&(g=!0,e.priceFrom=O,L("priceFrom",O)),g){let W=document.querySelector(".frame-filter__controls-advanced"),A=document.querySelector(".filter-fields");W&&W.classList.add("active"),A&&A.classList.add("active")}c("priceOrder")&&(e.priceOrder=c("priceOrder")==="true",G(e.priceOrder)),e.offset=c("page"),B(g)}function h(e,i){if(N)return!1;Q.push({name:e,value:i})}D.on("dataUpdated",me);function me(){Q.forEach(e=>{let i=document.querySelector(`[data-placeholder="${e.name}"]`);i&&i.querySelector(".big-comb__placeholder")&&(i.querySelector(".big-comb__placeholder").innerText=e.value,i.querySelector(".big-comb__placeholder").classList.add("bold"))})}function L(e,i){if(N)return!1;let t=document.querySelector(`[onchange="input_chamged('${e}', this.value)"]`);t&&(t.value=i,t.classList.add("bold"))}function _e(e,i,t,o){N=i,N||ye(t);let l=document.querySelector("#set_filter");x(l,!0),U(z,t).then(u=>{e=Y(u.items);let f=Math.ceil(u.totalCount/z);o(e,u.items,f),x(l,!1),document.querySelector("#set_filter span.number").innerHTML=u.totalCount+" "+V(u.totalCount,["предложение","предложения","предложений"]),(N||t.brandId)&&(ge(),document.getElementById("brands_dynamic").style.display="none",document.querySelector(".filter-white").style.marginBottom=0,document.querySelector("#vitrina_name").innerHTML="Автомобили "+(t.brand||"")+" "+(t.model||"")+" "+(t.city?`(город ${t.city})`:""))})}function ge(){setTimeout(()=>document.querySelector("#filter_cars").removeEventListener("mouseleave",e),3e3),document.querySelector("#filter_cars").addEventListener("mouseleave",e);function e(){document.getElementById("set_filter").scrollIntoView({behavior:"smooth",block:"start"}),document.querySelector("#filter_cars").removeEventListener("mouseleave",e)}}function be(e,i){if(i==="Марка"){let t=y.brandsIds.find(o=>o.name===e[i].value);t&&(r.brandId=t.id,r.brand=t.name,r.modelId="",r.model="",setTimeout(()=>document.querySelector('[data-placeholder="Модель"] .big-comb__placeholder').innerText="",2e3)),X(e[i].value)}if(i==="Модель"){let t=y.modelsIds.find(o=>o.name===e[i].value);t&&(r.modelId=t.id,r.model=t.name)}if(i==="Город"&&(r.city=e[i].value),i==="Тип КПП"){let t=y.gearboxTypes.find(o=>o.title===e[i].value);r.gearboxType=t.name}if(i==="Тип двигателя"){let t=y.engineTypes.find(o=>o.title===e[i].value);r.engineType=t.name}if(i==="Тип привода"){let t=y.driveTypes.find(o=>o.title===e[i].value);r.driveType=t.name}if(i==="Руль"){let t=y.wheelTypes.find(o=>o.title===e[i].value);r.wheelType=t.name}if(i==="Тип кузова"){let t=y.bodyTypes.find(o=>o.title===e[i].value);r.bodyType=t.name}if(i==="Цвет"){let t=y.bodyColors.find(o=>o.name===e[i].value);r.colorId=t.id,r.color=t.name}j("ishandEvent")}function Z(e,i){r[e]=i,j("ishandEvent")}let r={};function j(e){let i=document.querySelector(".cars_link");location.pathname==="/"?(i&&(i.style.display="block"),localStorage.removeItem("TYPE_VIEW")):(i&&(i.style.display="none"),localStorage.getItem("TYPE_VIEW")||localStorage.setItem("TYPE_VIEW","dot8"));let t;if(location.pathname==="/"){document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",e||B(!1);let o=document.querySelector("#set_filter");x(o,!0),U(7,r).then(l=>{x(o,!1),t=Y(l.items),V(l.totalCount,["предложение","предложений","предложений"]),document.querySelector("#set_filter span.number").innerHTML=l.totalCount+" "+V(l.totalCount,["предложение","предложения","предложений"]),e||C(t,l.items)})}else location.pathname==="/tyres/"?(document.querySelector("#vitrina_name").innerHTML="Каталог шин",t=[{address:"Альметьевск , Герцена 1Б",id:210,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:211,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:212,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:213,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:214,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg"]}],setTimeout(()=>C(t))):location.pathname==="/cars/"?_e(t,e,r,C):location.pathname==="/personal/favorite-cars/"?(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",t=localStorage.getItem("FavoriteCars"),t=t?JSON.parse(t):[],setTimeout(()=>C(t))):(document.querySelector("#vitrina_name").innerHTML="Автомобили",console.log(" тут карточек нет, либо не сформированы"))}const he=c("id");he||j();window.getVitrina=j;window.goToCars=function(){let e="?";r.brandId&&(e="?brand="+(r.Марка||r.brand),e+="&brandId="+r.brandId),r.modelId&&(e+="&model="+(r.Модель||r.model),e+="&modelId="+r.modelId),r.city&&(e+="&city="+r.city),r.gearboxType&&(e+="&gearboxType="+r.gearboxType),r.engineType&&(e+="&engineType="+r.engineType),r.driveType&&(e+="&driveType="+r.driveType),r.wheelType&&(e+="&wheelType="+r.wheelType),r.bodyType&&(e+="&bodyType="+r.bodyType),r.colorId&&(e+="&colorId="+r.colorId,e+="&color="+r.color),r.yearReleasedFrom&&(e+="&yearReleasedFrom="+r.yearReleasedFrom),r.yearReleasedTo&&(e+="&yearReleasedTo="+r.yearReleasedTo),r.priceTo&&(e+="&priceTo="+r.priceTo),r.priceFrom&&(e+="&priceFrom="+r.priceFrom),r.milleageFrom&&(e+="&milleageFrom="+r.milleageFrom),r.milleageTo&&(e+="&milleageTo="+r.milleageTo),r.engineCapacity&&(e+="&engineCapacity="+r.engineCapacity),r.priceOrder!==null&&r.priceOrder!==void 0&&(e+="&priceOrder="+r.priceOrder),location.href="/cars/"+e};window.clearFilter=function(){location.href=location.pathname};document.addEventListener("DOMContentLoaded",()=>{let e=null,i=document.querySelector(".coin");i&&i.addEventListener("click",()=>{e===!1?e=!0:e===null?e=!1:e===!0&&(e=null),G(e),Z("priceOrder",e)})});document.addEventListener("DOMContentLoaded",()=>{window.big_comb_select=function(n){let d=n.srcElement.dataset.parent,p=n.srcElement.innerText,m=n.srcElement.parentElement.parentElement;a[d].value=p,m.querySelector(".big-comb__placeholder").innerText=p,m.querySelector(".big-comb__placeholder").classList.add("bold"),m.querySelector(".big-comb__input").value=p,m.querySelector(".big-comb__input").blur(),be(a,d)},window.input_chamged=function(n,d){Z(n,d)};let e=null;window.input_on=function(n,d){e&&clearTimeout(e),e=setTimeout(()=>input_chamged(n,d),1e3)};let i=document.querySelector(".frame-filter__controls-advanced"),t=document.querySelector(".filter-fields"),o=document.querySelector("#car-vitrina"),l=document.querySelector("#list1"),u=document.querySelector("#list2");o&&o.addEventListener("mousemove",()=>{l&&(l.style.left="-1000px"),u&&(u.style.left="-1000px")}),i&&i.addEventListener("click",()=>{i.classList.length===1?(i&&i.classList.add("active"),t&&t.classList.add("active"),B(!0)):(i.classList.remove("active"),t&&t.classList.remove("active"));let n=document.querySelector("#deleter");n&&(n.style.left="-1000px")});let f=document.querySelector(".f_auto"),s=document.querySelector(".f_tire");if(f&&s){let n=document.querySelector(".f_auto_buttons"),d=document.querySelector(".f_tire_buttons"),p=document.querySelector(".filter__controls-info");f.addEventListener("click",()=>{f&&f.classList.add("active"),s&&s.classList.remove("active"),d&&(d.style.display="none"),n&&(n.style.display="flex"),p&&(p.style.display="none")}),s.addEventListener("click",()=>{s.classList.add("active"),f.classList.remove("active"),n&&(n.style.display="none"),d&&(d.style.display="flex"),p&&(p.style.display="flex")})}});
