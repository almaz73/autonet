import{i as P,c as x,d as M,e as j}from"./favoriteCars-EQ3GyLFP.js";import{i as C,a as T,b as E,p as K}from"./compareCars-B0V7mOXT.js";let _=1;function V(e){const t=document.querySelector("#pager");if(!t)return!1;const i=new URLSearchParams(window.location.search);i.get("brand");let a="";_=+i.get("page")||1;const l=_>3?_-3:0;l>0&&(a+=`<a href=${location.href.slice(0,location.href.lastIndexOf("&page"))}> 1</a> <span> | </span> ... <span> | </span>`);for(let s=1+l;s<e&&!(s-l>5);s++)a+=`<a ${_===s?'class="active"':""} href=${location.href.slice(0,location.href.lastIndexOf("&page"))}&page=${s}>${s}</a><span> | </span>`;a+=` ... <span> | </span>  <a href=${location.href.slice(0,location.href.lastIndexOf("&page"))}&page=${e}>${e}</a><span> | </span> `,e!==_&&window.screen.width>500&&(a+=`<a href="javascript:nextPage('${_}')"> След.</a>`),t.innerHTML=a}window.nextPage=e=>{let t="&page="+(+e+1);location.href.includes("&page=")?location.href=location.href.slice(0,location.href.lastIndexOf("&page"))+t:location.href=location.href+t};let c;document.addEventListener("DOMContentLoaded",()=>{c=document.querySelector("cards")});function L(e,t){let i;isNaN(t)||(i=`<div class='cart' id='galery_${t}' >
              <div class='cart__slide'>                    
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${e.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
                  <span class='dark-fon'/>                    
              </div>
              <a class="big_link" href='${e.href}' title="перейти">
                  <div class='name'>
                      <br>                      
                      ${e.name}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная рещина" class="tyres_icon " 
                       style="display: ${e.type==="tyres"?"block":"none"}; 
                       opacity: ${e.type==="tyres"&&e.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${e.price?e.price+" ₽":""} </div>
                      <div class='cart__of'>${e.fromPerMonth?"ot "+e.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${e.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${e.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${e.id}')" ondblclick="dblCompare('${e.id}')">
                          <img id="compareId_${e.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${e.id}')">
                          <img id="favoriteId_${e.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),t==="abdul"&&(i="<abdul></abdul>",setTimeout(window.reloadAbdul)),t==="swiper_buy"&&(i='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),c.innerHTML+=i}function H(e,t){const i=document.querySelector("#galery_"+e+" .cart__slide");if(window.current_slide=null,!i)return!1;const a=i.querySelector(".photo"),l=i.querySelector(".cart .red");let s,n,r=0,f=0;a.src=t[r],a.addEventListener("mousemove",d=>{let p=parseInt(d.layerX*100/S/20);f!==p&&(a.src=t[p],f=p),l.style.left=p*20+"%"}),i.addEventListener("mouseleave",()=>{a.src=t[0],l.style.left="0%"}),i.addEventListener("touchstart",d=>s=d.targetTouches[0].pageX-i.offsetLeft),i.addEventListener("touchmove",d=>n=d.targetTouches[0].pageX-i.offsetLeft),i.addEventListener("touchend",()=>{s>n?r++:r--,r>4&&(r=4),r<0&&(r=0),a.src=t[r],l.style.left=r*20+"%"}),i.addEventListener("click",()=>{if(document.body.clientWidth<500)return!1;i.classList.toggle("watch"),window.current_slide=i,w()})}function g(e,t){window.compareCars=t,window.favorCars=e,c.innerHTML="",e.forEach((i,a)=>{L(i,a+1),a===2&&location.pathname!=="/personal/favorite-cars/"&&L(null,"abdul"),a===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&L(null,"swiper_buy")}),!c.innerHTML&&location.pathname.includes("favorite")&&(c.innerHTML='<div class="nodata" style="width: 200%;text-align:center">HЕТ ИЗБРАННЫХ АВТОМОБИЛЕЙ </div>'),location.pathname!=="/"&&(c.innerHTML+='<div class=" pager">Страницы: <span id="pager"></span></div>'),V(355),C(),P(),e.forEach((i,a)=>H(a+1,i.photos))}let m=document.querySelector(".type_views"),S=285,w=()=>{let e=document.querySelector("cards .cart__slide");e&&(S=e.clientWidth),window.current_slide&&(S=window.current_slide.clientWidth)};document.addEventListener("DOMContentLoaded",()=>setTimeout(w,500));window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let e=localStorage.getItem("TYPE_VIEW")||"dot4",t=document.querySelector("."+e);t&&t.classList.add("active"),t&&k({srcElement:{classList:{value:e}}})});m&&m.addEventListener("click",e=>{k(e),localStorage.setItem("TYPE_VIEW",e.srcElement.classList.value.slice(0,4))});function k(e){if(!e||!c)return!1;if(c.classList=[],w(),e.srcElement.classList.value==="dot8"&&c.classList.add("cards","dot8"),e.srcElement.classList.value==="dot4"&&c.classList.add("cards","dot4"),e.srcElement.classList.value==="dot1"&&c.classList.add("cards","dot1"),e.srcElement.classList.add){for(let t in m.children)m.children[t].classList&&m.children[t].classList.remove("active");e.srcElement.classList.add("active")}}document.addEventListener("keydown",e=>{e.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),w())});let h=document.querySelector(".type_views.coin");h&&h.addEventListener("click",()=>{let e=h.querySelector("img").style.rotate!=="180deg";h.querySelector("img").style.rotate=e?"180deg":"0deg",console.log("запрос нужен more = ",e)});let o={};o.Марка=["Все","AUDI","BMV","Brilliance","BYD","Cadilac"];o.Марка.value="";o.Модель=["Все","3 серия","5 серия","X1","X3","X5"];o.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];o["Ширина профиля"]=["Все","155","185","195","205","215","225"];o["Высота профиля"]=["Все","45","55","60","65","70"];o.Диаметр=["Все","13","14","15","16","17"];o.Сезон=["Все","Зима Шип","Лето"];o.Город=["Все","Альметьевск","Казань","Набережные Челны","Нижнекамск","Стерлитамак"];o["Тип кузова"]=["Все","Автобус","Внедорожник","Кроссовер","Купе","Лифтбек","Минивэн","Пикап","Седан","Универсал","Фургон","Хетчбэк"];o.Цвет=["Все","Бежевый","Белый","Голубой","Желтый","Зелёный","Золотой","Коричневый","Красный","Оранжевый","Серебряный","Серый","Синий","Фиолетовый","Чёрный"];o["Тип КПП"]=["Все","Автоматическая","Вариатор","Механическая","Робот"];o["Тип двигателя"]=["Все","Бензиновый","Гибридный","Дизельный","Электро"];o["Тип привода"]=["Все","Задний","Передний","Полный"];o.Руль=["Все","Левый"];o.Диски=["Все","Отсутствуют"];function N(){document.querySelectorAll("comb").forEach(t=>{let i=t.dataset.placeholder,a=o[i];if(a){let p=a.map($=>'<div data-parent="'+i+'">'+$+"</div>");t.innerHTML=`<div class='big-combo' tabindex='1'>
        <span class='big-comb__selected'>
          <span class='big-comb__placeholder'>${a.value||i}</span>
          <input class='big-comb__input' type="text">
        </span>
        <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
        <div class='big_comb__items' onclick='big_comb_select(event)'>
            ${p.join("")}
        </div>
    </div>`}let l=t.querySelector(".big-combo"),s=t.querySelector(".big_comb__items"),n=t.querySelector(".big-comb__input"),r=t.querySelector(".big-comb__placeholder"),f=t.querySelector(".big-combo img");l&&l.addEventListener("focus",()=>{s.style.display="block",n.style.display="inline",r&&(r.style.display="none"),f.style.rotate="180deg",n.focus(),n.select()}),n&&(n.addEventListener("blur",()=>d()),n.addEventListener("click",()=>d()),n.addEventListener("keydown",p=>p.key==="Escape"&&d()));function d(){s&&(s.style.display="none"),n&&(n.style.display="none"),f&&(f.style.rotate="0deg"),r&&(r.style.display="")}})}x().then(e=>{o.Марка=e.map(t=>t.name),T.push(...e),N()});function B(e){let t=T.find(i=>i.name===e);t&&M(t.id).then(i=>{o.Модель=i.map(a=>a.name),E.push(...i),N()}),t||(o.Модель=["Неизвестный бренд"],N())}function W(e,t){if(console.log("name = ",t),console.log("<> <> <> items[name].value = ",e[t].value),u[t]=e[t].value,console.log("2222 global_modelsIds",E),t==="Марка"&&B(e[t].value),t==="Модель"){let i=E.find(a=>a.name===e[t].value);console.log(" = = model",i),i&&(u.modelId=i.id)}q()}let u={};function q(){console.log("getVitrina ::: filterParams =",u);let e=document.querySelector(".cars_link"),t=document.querySelector(".view_buttons");location.pathname==="/"?(e&&(e.style.display="block"),localStorage.setItem("TYPE_VIEW","dot4")):(e&&(e.style.display="none"),t&&(t.style.display="block"));let i;if(location.pathname==="/")document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",j(7,u).then(a=>{console.log("res",a),i=K(a),g(i,a)});else if(location.pathname==="/tyres/")document.querySelector("#vitrina_name").innerHTML="Каталог шин",i=[{address:"Альметьевск , Герцена 1Б",id:210,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:211,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:212,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:213,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:214,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg"]}],setTimeout(()=>g(i));else if(location.pathname==="/cars/"){const l=new URLSearchParams(window.location.search).get("brandId");l&&(u.brandId=l),j(12,u).then(s=>{console.log("555 res=",s),i=K(s),g(i,s)})}else location.pathname==="/personal/favorite-cars/"?(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",i=localStorage.getItem("FavoriteCars"),i=i?JSON.parse(i):[],setTimeout(()=>g(i))):(document.querySelector("#vitrina_name").innerHTML="Автомобили",console.log(" тут карточек нет, либо не сформированы"))}const R=new URLSearchParams(window.location.search),O=R.get("id");O||q();window.getVitrina=q;window.big_comb_select=function(e){let t=e.srcElement.dataset.parent,i=e.srcElement.innerText,a=e.srcElement.parentElement.parentElement;o[t].value=i,a.querySelector(".big-comb__placeholder").innerText=i,a.querySelector(".big-comb__placeholder").classList.add("bold"),a.querySelector(".big-comb__input").value=i,a.querySelector(".big-comb__input").blur(),W(o,t)};let y=document.querySelector(".frame-filter__controls-advanced"),I=document.querySelector(".filter-fields");y&&y.addEventListener("click",()=>{y.classList.length===1?(y.classList.add("active"),I.classList.add("active")):(y.classList.remove("active"),I.classList.remove("active"))});let v=document.querySelector(".f_auto"),b=document.querySelector(".f_tire");if(v&&b){let e=document.querySelector(".f_auto_buttons"),t=document.querySelector(".f_tire_buttons"),i=document.querySelector(".filter__controls-info");v.addEventListener("click",()=>{v.classList.add("active"),b.classList.remove("active"),t&&(t.style.display="none"),e&&(e.style.display="flex"),i&&(i.style.display="none")}),b.addEventListener("click",()=>{b.classList.add("active"),v.classList.remove("active"),e&&(e.style.display="none"),t&&(t.style.display="flex"),i&&(i.style.display="flex")})}
