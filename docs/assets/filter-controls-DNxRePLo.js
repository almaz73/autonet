import{i as Q,d as Z,e as ee,f as te,g as oe,h as ie,j as re,k as le,l as ae,m as ne,n as B}from"./favoriteCars-CC-tudLi.js";import{i as se}from"./compareCars-2XmigLAs.js";import{g as d,a as f,e as W,p as A,d as O,s as z}from"./global-func-DUNaBt0x.js";let L=1;function q(){return location.href.includes("&page")?location.href.slice(0,location.href.lastIndexOf("&page")):location.href}function de(e){const o=document.querySelector("#pager");if(!o)return!1;let t="";L=+d("page")||1;const i=L>3?L-3:0;i>0&&(t+=`<a href=${q()}> 1</a> <span> | </span> ... <span> | </span>`);for(let a=1+i;a<e&&!(a-i>5);a++)t+=`<a ${L===a?'class="active"':""} href=${q()}&page=${a}>${a}</a><span> | </span>`;e>5?t+=` ... <span> | </span>  <a href=${q()}&page=${e}>${e}</a><span> | </span> `:e==="1"?t+='<a class="active">1</a>':t+=` <a href=${q()}&page=${e} class=${e!==L?"":"active"}>${e}</a><span> | </span> `,e&&e!==L&&window.screen.width>500&&(t+=`<a href="javascript:nextPage('${L}')"> След.</a>`),o.innerHTML=t}window.nextPage=e=>{let o="&page="+(+e+1);location.href.includes("&page=")?location.href=q()+o:location.href=location.href+o};let _;document.addEventListener("DOMContentLoaded",()=>{_=document.querySelector("cards")});function M(e,o){let t;isNaN(o)||(t=`<div class='cart' id='galery_${o}' >
              <img src="/icons/load.gif" alt="" class="smallloader hide"/>
              <div class='cart__slide'>            
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${e.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
                  <span class='dark-fon'>
                    <img src="/icons/load.gif" alt="" class="gloaballoader"/>
                  </span>
              </div>
              <a class="big_link" href='${e.href}' title="перейти">
                  <div class='name'>
                      <br>                      
                      ${e.name}, ${e.yearReleased}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная резина" class="tyres_icon " 
                       style="display: ${e.type==="tyres"?"block":"none"}; 
                       opacity: ${e.type==="tyres"&&e.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${e.price?e.price+" ₽":""} </div>
                      <div class='cart__of'>${e.fromPerMonth?"ot "+e.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${e.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${e.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${e.id}')" ondblclick="dblCompare('${e.id}')">
                          <img id="compareId_${e.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${e.id}')">
                          <img id="favoriteId_${e.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),o==="abdul"&&(t="<abdul></abdul>",setTimeout(window.reloadAbdul)),o==="swiper_buy"&&(t='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),_.innerHTML+=t}function ce(e,o){const t=document.querySelector("#galery_"+e+" .cart__slide");if(window.current_slide=null,!t)return!1;const i=t.querySelector(".photo"),a=t.querySelector(".cart .red");let u,y,l=0,c=0;i.src=o[l],i.addEventListener("mousemove",s=>{let p=parseInt(s.layerX*100/R/20);if(c!==p){$();let h=s.target.parentNode.querySelector(".gloaballoader"),m=s.target.parentNode.parentNode.querySelector(".smallloader");i.src=o[p],m.classList.remove("hide"),h.classList.remove("hide"),i.onload=()=>{m.classList.add("hide"),h.classList.add("hide")},c=p}a.style.left=p*20+"%"}),t.addEventListener("mouseleave",()=>{i.src=o[0],a.style.left="0"}),t.addEventListener("touchstart",s=>u=s.targetTouches[0].pageX-t.offsetLeft),t.addEventListener("touchmove",s=>y=s.targetTouches[0].pageX-t.offsetLeft),t.addEventListener("touchend",()=>{u>y?l++:l--,l>4&&(l=4),l<0&&(l=0),i.src=o[l],a.style.left=l*20+"%"}),t.addEventListener("click",()=>{if(document.body.clientWidth<500)return!1;t.classList.toggle("watch"),window.current_slide=t,$()})}function x(e,o,t){if(window.compareCars=o,window.favorCars=e,!_)return!1;_.innerHTML="",e.forEach((i,a)=>{M(i,a+1),a===2&&location.pathname!=="/personal/favorite-cars/"&&M(null,"abdul"),a===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&M(null,"swiper_buy")}),!_.innerHTML&&location.pathname.includes("favorite")&&(_.innerHTML='<div class="nodata" style="width: 200%;text-align:center">HЕТ ИЗБРАННЫХ АВТОМОБИЛЕЙ </div>'),location.pathname!=="/"&&location.pathname!=="/personal/favorite-cars/"&&(_.innerHTML+='<div class="pager">1111 Страницы: <span id="pager"></span></div>'),de(t),se(),Q(),e.forEach((i,a)=>ce(a+1,i.photos)),E=document.querySelector(".type_views"),E&&E.addEventListener("click",i=>{D(i),localStorage.setItem("TYPE_VIEW",i.srcElement.classList.value.slice(0,4))})}let E,R=285,$=()=>{let e=document.querySelector("cards .cart__slide");e&&(R=e.clientWidth),window.current_slide&&(R=window.current_slide.clientWidth)};window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let e=localStorage.getItem("TYPE_VIEW")||"dot4",o=document.querySelector("."+e);o&&o.classList.add("active"),o&&D({srcElement:{classList:{value:e}}})});function D(e){if(!e||!_)return!1;if(_.classList=[],$(),e.srcElement.classList.value==="dot8"&&_.classList.add("cards","dot8"),e.srcElement.classList.value==="dot4"&&_.classList.add("cards","dot4"),e.srcElement.classList.value==="dot1"&&_.classList.add("cards","dot1"),e.srcElement.classList.add){console.log("333");for(let o in E.children)E.children[o].classList&&E.children[o].classList.remove("active");e.srcElement.classList.add("active")}}document.addEventListener("keydown",e=>{e.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),$())});let w=!1,H=function(e){w=e,pe()};const n={};let I={};n.Марка=[];n.Марка.value="";n.Модель=["Не выбрана марка "];n.Город=[];n["Тип кузова"]=[];n.Цвет=[];n["Тип КПП"]=[];n["Тип двигателя"]=[];n["Тип привода"]=[];n.Руль=[];n.Диски=["Все","Отсутствуют"];n.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];n["Ширина профиля"]=["Все","155","185","195","205","215","225"];n["Высота профиля"]=["Все","45","55","60","65","70"];n.Диаметр=["Все","13","14","15","16","17"];n.Сезон=["Все","Зима Шип","Лето"];function U(e){document.querySelectorAll("comb").forEach(t=>{if(e&&t.dataset.placeholder!=="Модель")return!1;let i=t.dataset.placeholder,a=n[i];if(a){let m=p(a,i);t.innerHTML=`<div class='big-combo' tabindex='1' title="${a.value||i}">
    <span class='big-comb__selected'>
      <span class='big-comb__placeholder'>${a.value||i}</span>
      <input class='big-comb__input' type="text">
    </span>
    <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
    <div class='big_comb__items' onclick='big_comb_select(event)'>
        ${m.join("")}
    </div>
</div>`}let u=t.querySelector(".big-combo"),y=t.querySelector(".big_comb__items"),l=t.querySelector(".big-comb__input"),c=t.querySelector(".big-comb__placeholder"),s=t.querySelector(".big-combo img");u&&u.addEventListener("focus",()=>{y.style.display="block",l.style.display="inline",c&&(c.style.display="none"),s.style.rotate="180deg",l.focus(),l.select()}),l&&(l.addEventListener("blur",()=>h()),l.addEventListener("click",()=>h()),l.addEventListener("keydown",m=>m.key==="Escape"&&h()),l.addEventListener("input",m=>{let v=m.target.value;I.Марка||(I=JSON.parse(JSON.stringify(n))),n[i]=I[i].filter(T=>T.includes(m.target.value)),v?y.innerHTML=p(n[i],i).join(""):y.innerHTML=p(I[i],i).join("")}));function p(m,v){return m.map(T=>'<div data-parent="'+v+'">'+T+"</div>")}function h(){y&&(y.style.display="none"),l&&(l.style.display="none"),s&&(s.style.rotate="0deg"),c&&(c.style.display="")}["Марка","Тип кузова","Тип КПП","Тип двигателя","Тип привода","Руль","Модель","Город","Цвет","Производитель","Ширина профиля","Высота профиля","Диаметр","Сезон","Диски"].includes(c.innerText)||c.classList.add("bold")}),W.emit("dataUpdated",{})}function Y(e){let o=f.brandsIds.find(t=>t.name.toUpperCase()===e.toUpperCase());o&&ne(o.id).then(t=>{n.Модель=t.map(i=>i.name),I={},f.modelsIds.push(...t),U("onlyModel")}),o||(n.Модель=["Неизвестный бренд"])}function pe(){Promise.all([new Promise(e=>{Z().then(o=>{n.Марка=o.map(i=>i.name),f.brandsIds.push(...o);const t=d("brand");t&&Y(t),e()})}),new Promise(e=>{ee().then(o=>{n.Город=o,e()})}),w&&new Promise(e=>{te().then(o=>{n["Тип КПП"]=o.map(t=>t.title),f.gearboxTypes.push(...o),e()})}),w&&new Promise(e=>{oe().then(o=>{n["Тип двигателя"]=o.map(t=>t.title),f.engineTypes.push(...o),e()})}),w&&new Promise(e=>{ie().then(o=>{n["Тип привода"]=o.map(t=>t.title),f.driveTypes.push(...o),e()})}),w&&new Promise(e=>{re().then(o=>{n.Руль=o.map(t=>t.title),f.wheelTypes.push(...o),e()})}),w&&new Promise(e=>{le().then(o=>{n["Тип кузова"]=o.map(t=>t.title),f.bodyTypes.push(...o),e()})}),w&&new Promise(e=>{ae().then(o=>{n.Цвет=o.map(t=>t.name),f.bodyColors.push(...o),e()})})]).then(e=>{U()}).catch(e=>{console.error("Произошла ошибка:",e)})}const V=20,P=[];let N,g=!1;function fe(e){const o=d("brandId"),t=d("brand");o&&(e.brandId=o,e.brand=t,b("Марка",t));const i=d("modelId"),a=d("model");i&&(e.modelId=i,e.model=a,b("Модель",a));const u=d("city");u&&(e.city=u,b("Город",u));const y=d("colorId"),l=d("color");y&&(e.colorId=y,b("Цвет",l));const c=d("gearboxType");c&&(g=!0,e.gearboxType=c,b("Тип КПП",c));const s=d("engineType");s&&(g=!0,e.engineType=s,b("Тип двигателя",s));const p=d("bodyType");p&&(g=!0,e.bodyType=p,b("Тип кузова",p));const h=d("wheelType");h&&(g=!0,e.wheelType=h,b("Руль",h));const m=d("driveType");m&&(g=!0,e.driveType=m,b("Тип привода",m));const v=d("yearReleasedFrom");v&&(e.yearReleasedFrom=v,S("yearReleasedFrom",v));const T=d("yearReleasedTo");T&&(g=!0,e.yearReleasedTo=T,S("yearReleasedTo",T));const F=d("priceTo");F&&(e.priceTo=F,S("priceTo",F));const C=d("milleageFrom");C&&(g=!0,e.milleageFrom=C,S("milleageFrom",C));const K=d("milleageTo");K&&(g=!0,e.milleageTo=K,S("milleageTo",K));const k=d("priceFrom");if(k&&(g=!0,e.priceFrom=k,S("priceFrom",k)),g){let J=document.querySelector(".frame-filter__controls-advanced"),X=document.querySelector(".filter-fields");J.classList.add("active"),X.classList.add("active")}d("priceOrder")&&(e.priceOrder=d("priceOrder")==="true",z(e.priceOrder)),e.offset=d("page"),H(g)}function b(e,o){if(N)return!1;P.push({name:e,value:o})}W.on("dataUpdated",ue);function ue(){P.forEach(e=>{let o=document.querySelector(`[data-placeholder="${e.name}"]`);o&&o.querySelector(".big-comb__placeholder")&&(o.querySelector(".big-comb__placeholder").innerText=e.value,o.querySelector(".big-comb__placeholder").classList.add("bold"))})}function S(e,o){if(N)return!1;let t=document.querySelector(`[onchange="input_chamged('${e}', this.value)"]`);t&&(t.value=o,t.classList.add("bold"))}function ye(e,o,t,i){N=o,N||fe(t),B(V,t).then(a=>{e=A(a.items);let u=Math.ceil(a.totalCount/V);i(e,a.items,u),document.querySelector("#set_filter span.number").innerHTML=a.totalCount+" "+O(a.totalCount,["предложение","предложения","предложений"]),(N||t.brandId)&&(me(),document.getElementById("brands_dynamic").style.display="none",document.querySelector(".filter-white").style.marginBottom=0,document.querySelector("#vitrina_name").innerHTML="Автомобили "+(t.brand||"")+" "+(t.model||"")+" "+(t.city?`(город ${t.city})`:""))})}function me(){setTimeout(()=>document.querySelector("#filter_cars").removeEventListener("mouseleave",e),3e3),document.querySelector("#filter_cars").addEventListener("mouseleave",e);function e(){document.getElementById("set_filter").scrollIntoView({behavior:"smooth",block:"start"}),document.querySelector("#filter_cars").removeEventListener("mouseleave",e)}}function _e(e,o){if(o==="Марка"){let t=f.brandsIds.find(i=>i.name===e[o].value);t&&(r.brandId=t.id,r.brand=t.name,r.modelId="",r.model="",setTimeout(()=>document.querySelector('[data-placeholder="Модель"] .big-comb__placeholder').innerText="",2e3)),Y(e[o].value)}if(o==="Модель"){let t=f.modelsIds.find(i=>i.name===e[o].value);t&&(r.modelId=t.id,r.model=t.name)}if(o==="Город"&&(r.city=e[o].value),o==="Тип КПП"){let t=f.gearboxTypes.find(i=>i.title===e[o].value);r.gearboxType=t.name}if(o==="Тип двигателя"){let t=f.engineTypes.find(i=>i.title===e[o].value);r.engineType=t.name}if(o==="Тип привода"){let t=f.driveTypes.find(i=>i.title===e[o].value);r.driveType=t.name}if(o==="Руль"){let t=f.wheelTypes.find(i=>i.title===e[o].value);r.wheelType=t.name}if(o==="Тип кузова"){let t=f.bodyTypes.find(i=>i.title===e[o].value);r.bodyType=t.name}if(o==="Цвет"){let t=f.bodyColors.find(i=>i.name===e[o].value);r.colorId=t.id,r.color=t.name}j("ishandEvent")}function G(e,o){r[e]=o,j("ishandEvent")}let r={};function j(e){let o=document.querySelector(".cars_link");location.pathname==="/"?(o&&(o.style.display="block"),localStorage.removeItem("TYPE_VIEW")):(o&&(o.style.display="none"),localStorage.getItem("TYPE_VIEW")||localStorage.setItem("TYPE_VIEW","dot8"));let t;location.pathname==="/"?(document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",e||H(!1),B(7,r).then(i=>{t=A(i.items),O(i.totalCount,["предложение","предложений","предложений"]),document.querySelector("#set_filter span.number").innerHTML=i.totalCount+" "+O(i.totalCount,["предложение","предложения","предложений"]),e||x(t,i.items)})):location.pathname==="/tyres/"?(document.querySelector("#vitrina_name").innerHTML="Каталог шин",t=[{address:"Альметьевск , Герцена 1Б",id:210,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:211,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:212,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:213,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:214,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg"]}],setTimeout(()=>x(t))):location.pathname==="/cars/"?ye(t,e,r,x):location.pathname==="/personal/favorite-cars/"?(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",t=localStorage.getItem("FavoriteCars"),t=t?JSON.parse(t):[],setTimeout(()=>x(t))):(document.querySelector("#vitrina_name").innerHTML="Автомобили",console.log(" тут карточек нет, либо не сформированы"))}const ge=d("id");ge||j();window.getVitrina=j;window.goToCars=function(){let e="?";r.brandId&&(e="?brand="+(r.Марка||r.brand),e+="&brandId="+r.brandId),r.modelId&&(e+="&model="+(r.Модель||r.model),e+="&modelId="+r.modelId),r.city&&(e+="&city="+r.city),r.gearboxType&&(e+="&gearboxType="+r.gearboxType),r.engineType&&(e+="&engineType="+r.engineType),r.driveType&&(e+="&driveType="+r.driveType),r.wheelType&&(e+="&wheelType="+r.wheelType),r.bodyType&&(e+="&bodyType="+r.bodyType),r.colorId&&(e+="&colorId="+r.colorId,e+="&color="+r.color),r.yearReleasedFrom&&(e+="&yearReleasedFrom="+r.yearReleasedFrom),r.yearReleasedTo&&(e+="&yearReleasedTo="+r.yearReleasedTo),r.priceTo&&(e+="&priceTo="+r.priceTo),r.priceFrom&&(e+="&priceFrom="+r.priceFrom),r.milleageFrom&&(e+="&milleageFrom="+r.milleageFrom),r.milleageTo&&(e+="&milleageTo="+r.milleageTo),r.priceOrder!==null&&(e+="&priceOrder="+r.priceOrder),location.href="/cars/"+e};window.clearFilter=function(){location.href=location.pathname};document.addEventListener("DOMContentLoaded",()=>{let e=null,o=document.querySelector(".coin");o&&o.addEventListener("click",()=>{e===!1?e=!0:e===null?e=!1:e===!0&&(e=null),z(e),G("priceOrder",e)})});document.addEventListener("DOMContentLoaded",()=>{window.big_comb_select=function(l){let c=l.srcElement.dataset.parent,s=l.srcElement.innerText,p=l.srcElement.parentElement.parentElement;n[c].value=s,p.querySelector(".big-comb__placeholder").innerText=s,p.querySelector(".big-comb__placeholder").classList.add("bold"),p.querySelector(".big-comb__input").value=s,p.querySelector(".big-comb__input").blur(),_e(n,c)},window.input_chamged=function(l,c){G(l,c)};let e=document.querySelector(".frame-filter__controls-advanced"),o=document.querySelector(".filter-fields"),t=document.querySelector("#car-vitrina"),i=document.querySelector("#list1"),a=document.querySelector("#list2");t&&t.addEventListener("mousemove",()=>{i&&(i.style.left="-1000px"),a&&(a.style.left="-1000px")}),e&&e.addEventListener("click",()=>{e.classList.length===1?(e.classList.add("active"),o.classList.add("active"),H(!0)):(e.classList.remove("active"),o.classList.remove("active"));let l=document.querySelector("#deleter");l&&(l.style.left="-1000px")});let u=document.querySelector(".f_auto"),y=document.querySelector(".f_tire");if(u&&y){let l=document.querySelector(".f_auto_buttons"),c=document.querySelector(".f_tire_buttons"),s=document.querySelector(".filter__controls-info");u.addEventListener("click",()=>{u.classList.add("active"),y.classList.remove("active"),c&&(c.style.display="none"),l&&(l.style.display="flex"),s&&(s.style.display="none")}),y.addEventListener("click",()=>{y.classList.add("active"),u.classList.remove("active"),l&&(l.style.display="none"),c&&(c.style.display="flex"),s&&(s.style.display="flex")})}});
