import{i as V,c as B,d as W,e as F,f as z,g as R,h as Y,j as A,k as O,l as x}from"./favoriteCars-D3BlehqI.js";import{i as G}from"./compareCars-aUEkwXup.js";import{g as f,a as r,p as C,d as I}from"./global-func-BLfbnEIy.js";let _=1;function g(){return location.href.includes("&page")?location.href.slice(0,location.href.lastIndexOf("&page")):location.href}function D(e){const t=document.querySelector("#pager");if(!t)return!1;let i="";_=+f("page")||1;const o=_>3?_-3:0;o>0&&(i+=`<a href=${g()}> 1</a> <span> | </span> ... <span> | </span>`);for(let a=1+o;a<e&&!(a-o>5);a++)i+=`<a ${_===a?'class="active"':""} href=${g()}&page=${a}>${a}</a><span> | </span>`;e>5?i+=` ... <span> | </span>  <a href=${g()}&page=${e}>${e}</a><span> | </span> `:e==="1"?i+='<a class="active">1</a>':i+=` <a href=${g()}&page=${e} class=${e!==_?"":"active"}>${e}</a><span> | </span> `,e&&e!==_&&window.screen.width>500&&(i+=`<a href="javascript:nextPage('${_}')"> След.</a>`),t.innerHTML=i}window.nextPage=e=>{let t="&page="+(+e+1);location.href.includes("&page=")?location.href=g()+t:location.href=location.href+t};let p;document.addEventListener("DOMContentLoaded",()=>{p=document.querySelector("cards")});function S(e,t){let i;isNaN(t)||(i=`<div class='cart' id='galery_${t}' >
              <div class='cart__slide'>                    
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${e.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
                  <span class='dark-fon'/>                    
              </div>
              <a class="big_link" href='${e.href}' title="перейти">
                  <div class='name'>
                      <br>                      
                      ${e.name}, ${e.yearReleased}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная резина" class="tyres_icon " 
                       style="display: ${e.type==="tyres"?"block":"none"}; 
                       opacity: ${e.type==="tyres"&&e.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${e.price?e.price+" ₽":""} </div>
                      <div class='cart__of'>${e.fromPerMonth?"ot "+e.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${e.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${e.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${e.id}')" ondblclick="dblCompare('${e.id}')">
                          <img id="compareId_${e.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${e.id}')">
                          <img id="favoriteId_${e.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),t==="abdul"&&(i="<abdul></abdul>",setTimeout(window.reloadAbdul)),t==="swiper_buy"&&(i='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),p.innerHTML+=i}function U(e,t){const i=document.querySelector("#galery_"+e+" .cart__slide");if(window.current_slide=null,!i)return!1;const o=i.querySelector(".photo"),a=i.querySelector(".cart .red");let c,n,d=0,m=0;o.src=t[d],o.addEventListener("mousemove",y=>{let u=parseInt(y.layerX*100/q/20);m!==u&&(o.src=t[u],m=u),a.style.left=u*20+"%"}),i.addEventListener("mouseleave",()=>{o.src=t[0],a.style.left="0%"}),i.addEventListener("touchstart",y=>c=y.targetTouches[0].pageX-i.offsetLeft),i.addEventListener("touchmove",y=>n=y.targetTouches[0].pageX-i.offsetLeft),i.addEventListener("touchend",()=>{c>n?d++:d--,d>4&&(d=4),d<0&&(d=0),o.src=t[d],a.style.left=d*20+"%"}),i.addEventListener("click",()=>{if(document.body.clientWidth<500)return!1;i.classList.toggle("watch"),window.current_slide=i,E()})}function v(e,t,i){window.compareCars=t,window.favorCars=e,p.innerHTML="",e.forEach((o,a)=>{S(o,a+1),a===2&&location.pathname!=="/personal/favorite-cars/"&&S(null,"abdul"),a===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&S(null,"swiper_buy")}),!p.innerHTML&&location.pathname.includes("favorite")&&(p.innerHTML='<div class="nodata" style="width: 200%;text-align:center">HЕТ ИЗБРАННЫХ АВТОМОБИЛЕЙ </div>'),location.pathname!=="/"&&(p.innerHTML+='<div class="pager">Страницы: <span id="pager"></span></div>'),D(i),G(),V(),e.forEach((o,a)=>U(a+1,o.photos))}let h=document.querySelector(".type_views"),q=285,E=()=>{let e=document.querySelector("cards .cart__slide");e&&(q=e.clientWidth),window.current_slide&&(q=window.current_slide.clientWidth)};document.addEventListener("DOMContentLoaded",()=>setTimeout(E,500));window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let e=localStorage.getItem("TYPE_VIEW")||"dot4",t=document.querySelector("."+e);t&&t.classList.add("active"),t&&M({srcElement:{classList:{value:e}}})});h&&h.addEventListener("click",e=>{M(e),localStorage.setItem("TYPE_VIEW",e.srcElement.classList.value.slice(0,4))});function M(e){if(!e||!p)return!1;if(p.classList=[],E(),e.srcElement.classList.value==="dot8"&&p.classList.add("cards","dot8"),e.srcElement.classList.value==="dot4"&&p.classList.add("cards","dot4"),e.srcElement.classList.value==="dot1"&&p.classList.add("cards","dot1"),e.srcElement.classList.add){for(let t in h.children)h.children[t].classList&&h.children[t].classList.remove("active");e.srcElement.classList.add("active")}}document.addEventListener("keydown",e=>{e.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),E())});let w=document.querySelector(".type_views.coin");w&&w.addEventListener("click",()=>{let e=w.querySelector("img").style.rotate!=="180deg";w.querySelector("img").style.rotate=e?"180deg":"0deg",console.log("запрос нужен more = ",e)});let l={};l.Марка=[];l.Марка.value="";l.Модель=["е выбрана марка "];l.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];l["Ширина профиля"]=["Все","155","185","195","205","215","225"];l["Высота профиля"]=["Все","45","55","60","65","70"];l.Диаметр=["Все","13","14","15","16","17"];l.Сезон=["Все","Зима Шип","Лето"];l.Город=[];l["Тип кузова"]=[];l.Цвет=["Все","Бежевый","Белый","Голубой","Желтый","Зелёный","Золотой","Коричневый","Красный","Оранжевый","Серебряный","Серый","Синий","Фиолетовый","Чёрный"];l["Тип КПП"]=["Все","Автоматическая","Вариатор","Механическая","Робот"];l["Тип двигателя"]=[];l["Тип привода"]=[];l.Руль=[];l.Диски=["Все","Отсутствуют"];function N(){document.querySelectorAll("comb").forEach(t=>{let i=t.dataset.placeholder,o=l[i];if(o){let u=o.map(H=>'<div data-parent="'+i+'">'+H+"</div>");t.innerHTML=`<div class='big-combo' tabindex='1'>
        <span class='big-comb__selected'>
          <span class='big-comb__placeholder'>${o.value||i}</span>
          <input class='big-comb__input' type="text">
        </span>
        <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
        <div class='big_comb__items' onclick='big_comb_select(event)'>
            ${u.join("")}
        </div>
    </div>`}let a=t.querySelector(".big-combo"),c=t.querySelector(".big_comb__items"),n=t.querySelector(".big-comb__input"),d=t.querySelector(".big-comb__placeholder"),m=t.querySelector(".big-combo img");a&&a.addEventListener("focus",()=>{c.style.display="block",n.style.display="inline",d&&(d.style.display="none"),m.style.rotate="180deg",n.focus(),n.select()}),n&&(n.addEventListener("blur",()=>y()),n.addEventListener("click",()=>y()),n.addEventListener("keydown",u=>u.key==="Escape"&&y()));function y(){c&&(c.style.display="none"),n&&(n.style.display="none"),m&&(m.style.rotate="0deg"),d&&(d.style.display="")}})}function P(e){let t=r.brandsIds.find(i=>i.name.toUpperCase()===e.toUpperCase());t&&O(t.id).then(i=>{l.Модель=i.map(o=>o.name),r.modelsIds.push(...i),N()}),t||(l.Модель=["Неизвестный бренд"],N())}Promise.all([new Promise(e=>{B().then(t=>{l.Марка=t.map(o=>o.name),r.brandsIds.push(...t);const i=f("brand");i&&P(i),e()})}),new Promise(e=>{W().then(t=>{l.Город=t,e()})}),new Promise(e=>{F().then(t=>{l["Тип КПП"]=t.map(i=>i.title),r.gearboxTypes.push(...t),e()})}),new Promise(e=>{z().then(t=>{l["Тип двигателя"]=t.map(i=>i.title),r.engineTypes.push(...t),e()})}),new Promise(e=>{R().then(t=>{l["Тип привода"]=t.map(i=>i.title),r.driveTypes.push(...t),e()})}),new Promise(e=>{Y().then(t=>{l.Руль=t.map(i=>i.title),r.wheelTypes.push(...t),e()})}),new Promise(e=>{A().then(t=>{l["Тип кузова"]=t.map(i=>i.title),r.bodyTypes.push(...t),e()})})]).then(e=>{console.log("555 555"),N()}).catch(e=>{console.error("Произошла ошибка:",e)});const $=20;function X(e){const t=f("brandId"),i=f("brand"),o=f("city"),a=f("gearboxType");t&&(e.brandId=t,e.brand=i,k("Марка",i));const c=f("modelId"),n=f("model");c&&(e.modelId=c,e.model=n,k("Модель",n)),o&&(e.city=o),a&&(e.gearboxType=a),e.offset=f("page")}function k(e,t){setTimeout(()=>{console.log(e);let i=document.querySelector(`[data-placeholder="${e}"]`);i&&(i.querySelector(".big-comb__placeholder").innerText=t,i.querySelector(".big-comb__placeholder").classList.add("bold"))},2e3)}function J(e,t,i,o){t||X(i),x($,i).then(a=>{e=C(a.items);let c=Math.ceil(a.totalCount/$);o(e,a.items,c),document.querySelector("#set_filter span.number").innerHTML=a.totalCount+" "+I(a.totalCount,["предложение","предложения","предложений"]),(t||i.brandId)&&(document.getElementById("set_filter").scrollIntoView({behavior:"smooth",block:"start"}),document.getElementById("brands_dynamic").style.display="none",document.querySelector(".filter-white").style.marginBottom=0,document.querySelector("#vitrina_name").innerHTML="Автомобили "+(i.brand||""))})}function Q(e,t){if(console.log("<> <> <> value  = ",e[t].value),s[t]=e[t].value,t==="Марка"){let i=r.brandsIds.find(o=>o.name===e[t].value);i&&(s.brandId=i.id,s.brand=i.name,s.modelId="",s.model=""),P(e[t].value)}if(t==="Модель"){let i=r.modelsIds.find(o=>o.name===e[t].value);i&&(s.modelId=i.id,s["model="]=i.name)}if(t==="Город"&&(s.city=e[t].value),t==="Тип КПП"){let i=r.gearboxTypes.find(o=>o.title===e[t].value);s.gearboxType=i.name}if(t==="Тип двигателя"){let i=r.engineTypes.find(o=>o.title===e[t].value);s.engineType=i.name}if(t==="Тип привода"){let i=r.driveTypes.find(o=>o.title===e[t].value);s.driveType=i.name}if(t==="Руль"){let i=r.wheelTypes.find(o=>o.title===e[t].value);s.wheelType=i.name}if(t==="Тип кузова"){let i=r.bodyTypes.find(o=>o.title===e[t].value);s.bodyType=i.name}j("ishandEvent")}let s={};function j(e){let t=document.querySelector(".cars_link"),i=document.querySelector(".view_buttons");location.pathname==="/"?(t&&(t.style.display="block"),localStorage.removeItem("TYPE_VIEW")):(t&&(t.style.display="none"),i&&(i.style.display="block"),localStorage.getItem("TYPE_VIEW")||localStorage.setItem("TYPE_VIEW","dot8"));let o;location.pathname==="/"?(document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",x(7,s).then(a=>{o=C(a.items),I(a.totalCount,["предложение","предложений","предложений"]),document.querySelector("#set_filter span.number").innerHTML=a.totalCount+" "+I(a.totalCount,["предложение","предложения","предложений"]),e||v(o,a.items)})):location.pathname==="/tyres/"?(document.querySelector("#vitrina_name").innerHTML="Каталог шин",o=[{address:"Альметьевск , Герцена 1Б",id:210,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:211,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:212,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:213,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:214,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg"]}],setTimeout(()=>v(o))):location.pathname==="/cars/"?J(o,e,s,v):location.pathname==="/personal/favorite-cars/"?(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",o=localStorage.getItem("FavoriteCars"),o=o?JSON.parse(o):[],setTimeout(()=>v(o))):(document.querySelector("#vitrina_name").innerHTML="111 Автомобили",console.log(" тут карточек нет, либо не сформированы"))}const Z=f("id");Z||j();window.getVitrina=j;window.goToCars=function(){let e="?";s.brandId&&(e="?brand="+(s.Марка||s.brand),e+="&brandId="+s.brandId),s.modelId&&(e+="&model="+s.Модель,e+="&modelId="+s.modelId),s.city&&(e+="&city="+s.city),s.gearboxType&&(e+="&gearboxType="+s.gearboxType),s.engineType&&(e+="&engineType="+s.engineType),s.driveType&&(e+="&driveType="+s.driveType),s.wheelType&&(e+="&wheelType="+s.wheelType),s.bodyType&&(e+="&bodyType="+s.bodyType),location.href="/cars/"+e};window.clearFilter=function(){location.href=location.pathname};window.big_comb_select=function(e){let t=e.srcElement.dataset.parent,i=e.srcElement.innerText,o=e.srcElement.parentElement.parentElement;l[t].value=i,o.querySelector(".big-comb__placeholder").innerText=i,o.querySelector(".big-comb__placeholder").classList.add("bold"),o.querySelector(".big-comb__input").value=i,o.querySelector(".big-comb__input").blur(),Q(l,t)};let b=document.querySelector(".frame-filter__controls-advanced"),K=document.querySelector(".filter-fields");b&&b.addEventListener("click",()=>{b.classList.length===1?(b.classList.add("active"),K.classList.add("active")):(b.classList.remove("active"),K.classList.remove("active"))});let T=document.querySelector(".f_auto"),L=document.querySelector(".f_tire");if(T&&L){let e=document.querySelector(".f_auto_buttons"),t=document.querySelector(".f_tire_buttons"),i=document.querySelector(".filter__controls-info");T.addEventListener("click",()=>{T.classList.add("active"),L.classList.remove("active"),t&&(t.style.display="none"),e&&(e.style.display="flex"),i&&(i.style.display="none")}),L.addEventListener("click",()=>{L.classList.add("active"),T.classList.remove("active"),e&&(e.style.display="none"),t&&(t.style.display="flex"),i&&(i.style.display="flex")})}
