import{g as p,l as te,m as ie,n as le,o as oe,q as ae,r as ne,u as re,v as se,w as D,x as _,y as de,z as P,p as j,A as U,B as J,C as ce,D as ue,E as pe,a as fe}from"./main-Bz9XDWjt.js";import{i as ye}from"./swiper-starter-C7y6MEyK.js";let x=1;function k(){return location.href.includes("&page")?location.href.slice(0,location.href.lastIndexOf("&page")):location.href}function me(e){const i=document.querySelector("#pager");if(!i)return!1;let t="";x=+p("page")||1;const l=x>3?x-3:0;l>0&&(t+=`<a href=${k()}> 1</a> <span> | </span> ... <span> | </span>`);for(let a=1+l;a<e&&!(a-l>5);a++)t+=`<a ${x===a?'class="active"':""} href=${k()}&page=${a}>${a}</a><span> | </span>`;e>5?t+=` ... <span> | </span>  <a href=${k()}&page=${e}>${e}</a><span> | </span> `:e==="1"?t+='<a class="active">1</a>':t+=` <a href=${k()}&page=${e} class=${e!==x?"":"active"}>${e}</a><span> | </span> `,e&&e!==x&&window.screen.width>500&&(t+=`<a href="javascript:nextPage('${x}')"> След.</a>`),i.innerHTML=t}window.nextPage=e=>{let i="&page="+(+e+1);location.href.includes("&page=")?location.href=k()+i:location.href=location.href+i};let h=document.querySelector("cards");function N(e,i){let t;isNaN(i)||(t=`<div class='cart' id='galery_${i}' >
              <img src="/icons/load.gif" alt="" class="smallloader hide"/>
              <div class='cart__slide'>            
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${e.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
                  <span class='dark-fon'>
                    <img src="/icons/load.gif" alt="" class="gloaballoader"/>
                  </span>
              </div>
              <a class="big_link" href='${e.href}' title="перейти">
                  <div class='name'>
                      <br>                      
                      ${e.name}, ${e.yearReleased}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная резина" class="tyres_icon " 
                       style="display: ${e.type==="tyres"?"block":"none"}; 
                       opacity: ${e.type==="tyres"&&e.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${e.price?e.price+" ₽":""} </div>
                      <div class='cart__of'>${e.fromPerMonth?"ot "+e.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${e.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${e.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${e.id}')" ondblclick="dblCompare('${e.id}')">
                          <img id="compareId_${e.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${e.id}')">
                          <img id="favoriteId_${e.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),i==="abdul"&&(t="<abdul></abdul>",setTimeout(window.reloadAbdul)),i==="swiper_buy"&&(t='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),h.innerHTML+=t}function ge(e,i){const t=document.querySelector("#galery_"+e+" .cart__slide");if(window.current_slide=null,!t)return!1;const l=t.querySelector(".photo"),a=t.querySelector(".cart .red");let s,m,c=0,r=0;l.src=i[c],l.addEventListener("mousemove",n=>{let u=parseInt(n.layerX*100/B/20);if(r!==u){R();let f=n.target.parentNode.querySelector(".gloaballoader"),y=n.target.parentNode.parentNode.querySelector(".smallloader");l.src=i[u],y.classList.remove("hide"),f.classList.remove("hide"),l.onload=()=>{y.classList.add("hide"),f.classList.add("hide")},r=u}a.style.left=u*20+"%"}),t.addEventListener("mouseleave",()=>{l.src=i[0],a.style.left="0"}),t.addEventListener("touchstart",n=>s=n.targetTouches[0].pageX-t.offsetLeft),t.addEventListener("touchmove",n=>m=n.targetTouches[0].pageX-t.offsetLeft),t.addEventListener("touchend",()=>{s>m?c++:c--,c>4&&(c=4),c<0&&(c=0),l.src=i[c],a.style.left=c*20+"%"}),t.addEventListener("click",()=>{if(document.body.clientWidth<500)return!1;t.classList.toggle("watch"),window.current_slide=t,R()})}function O(e,i,t){if(console.log(11111111),h=document.querySelector("cards"),console.log(h,h),window.compareCars=i,window.favorCars=e,!h)return!1;h.innerHTML="",e.forEach((l,a)=>{N(l,a+1),a===2&&location.pathname!=="/personal/favorite-cars/"&&N(null,"abdul"),a===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&N(null,"swiper_buy")}),e.length||(h.innerHTML+="<abdul></abdul>"),location.pathname!=="/"&&location.pathname!=="/personal/favorite-cars/"&&(h.innerHTML+='<div class="pager">Страницы: <span id="pager"></span></div>'),me(t),initChosen(),initFavotite(),e.forEach((l,a)=>ge(a+1,l.photos)),F=document.querySelector(".type_views"),F&&F.addEventListener("click",l=>{X(l),localStorage.setItem("TYPE_VIEW",l.srcElement.classList.value.slice(0,4))}),setTimeout(ye)}let F,B=285,R=()=>{let e=document.querySelector("cards .cart__slide");e&&(B=e.clientWidth),window.current_slide&&(B=window.current_slide.clientWidth)};window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let e=localStorage.getItem("TYPE_VIEW")||"dot4",i=document.querySelector("."+e);i&&i.classList.add("active"),i&&X({srcElement:{classList:{value:e}}})});function X(e){if(!e||!h)return!1;if(h.classList=[],R(),e.srcElement.classList.value.includes("dot8")&&h.classList.add("cards","dot8"),e.srcElement.classList.value.includes("dot4")&&h.classList.add("cards","dot4"),e.srcElement.classList.value.includes("dot1")&&h.classList.add("cards","dot1"),e.srcElement.classList.add){for(let i in F.children)F.children[i].classList&&F.children[i].classList.remove("active");e.srcElement.classList.add("active")}}document.addEventListener("keydown",e=>{e.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),R())});let C=!1,Y=function(e){C=e,ve()};const d={};let M={};d.Марка=[];d.Марка.value="";d.Модель=["Не выбрана марка "];d.Город=[];d["Тип кузова"]=[];d.Цвет=[];d["Тип КПП"]=[];d["Тип двигателя"]=[];d["Тип привода"]=[];d.Руль=[];d.Диски=["Все","Отсутствуют"];d.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];d["Ширина профиля"]=["Все","155","185","195","205","215","225"];d["Высота профиля"]=["Все","45","55","60","65","70"];d.Диаметр=["Все","13","14","15","16","17"];d.Сезон=["Все","Зима Шип","Лето"];function K(e){document.querySelectorAll("comb").forEach(t=>{if(e&&t.dataset.placeholder!=="Модель")return!1;let l=t.dataset.placeholder,a=d[l];if(a){let y=u(a,l);t.innerHTML=`<div class='big-combo' tabindex='1' title="${a.value||l}">
    <span class='big-comb__selected'>
      <span class='big-comb__placeholder'>${a.value||l}</span>
      <input class='big-comb__input' type="text">
    </span>
    <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
    <div class='big_comb__items' onclick='big_comb_select(event)'>
        ${y.join("")}
    </div>
</div>`}let s=t.querySelector(".big-combo"),m=t.querySelector(".big_comb__items"),c=t.querySelector(".big-comb__input"),r=t.querySelector(".big-comb__placeholder"),n=t.querySelector(".big-combo img");s&&s.addEventListener("focus",()=>{m.style.display="block",c.style.display="inline",r&&(r.style.display="none"),n.style.rotate="180deg",c.focus(),c.select()}),c&&(c.addEventListener("blur",()=>f()),c.addEventListener("click",()=>f()),c.addEventListener("keydown",y=>y.key==="Escape"&&f()),c.addEventListener("input",y=>{let T=y.target.value;M.Марка||(M=JSON.parse(JSON.stringify(d))),d[l]=M[l].filter(w=>w.includes(y.target.value)),T?m.innerHTML=u(d[l],l).join(""):m.innerHTML=u(M[l],l).join("")}));function u(y,T){return y.map(w=>'<div data-parent="'+T+'">'+w+"</div>")}function f(){m&&(m.style.display="none"),c&&(c.style.display="none"),n&&(n.style.rotate="0deg"),r&&(r.style.display="")}["Марка","Тип кузова","Тип КПП","Тип двигателя","Тип привода","Руль","Модель","Город","Цвет","Производитель","Ширина профиля","Высота профиля","Диаметр","Сезон","Диски"].includes(r.innerText)||r.classList.add("bold")}),D.emit("dataUpdated",{})}function Q(e){let i=_.brandsIds.find(t=>t.name.toUpperCase()===e.toUpperCase());i&&de(i.id,t=>{d.Модель=t.map(l=>l.name),M={},_.modelsIds.push(...t),K("onlyModel")}),i||(d.Модель=["Неизвестный бренд"])}function ve(){Promise.all([new Promise(e=>{te(i=>{d.Марка=i.map(l=>l.name),_.brandsIds.push(...i);const t=p("brand");t&&Q(t),e()})}),new Promise(e=>{ie(i=>{i.includes("Все")||i.unshift("Все"),d.Город=i,e()})}),C&&new Promise(e=>{le(i=>{d["Тип КПП"]=i.map(t=>t.title),_.gearboxTypes.push(...i),e()})}),C&&new Promise(e=>{oe(i=>{d["Тип двигателя"]=i.map(t=>t.title),_.engineTypes.push(...i),e()})}),C&&new Promise(e=>{ae(i=>{d["Тип привода"]=i.map(t=>t.title),_.driveTypes.push(...i),e()})}),C&&new Promise(e=>{ne(i=>{d.Руль=i.map(t=>t.title),_.wheelTypes.push(...i),e()})}),C&&new Promise(e=>{re(i=>{d["Тип кузова"]=i.map(t=>t.title),_.bodyTypes.push(...i),e()})}),C&&new Promise(e=>{se(i=>{d.Цвет=i.map(t=>t.name),_.bodyColors.push(...i),e()})})]).then(e=>{K()}).catch(e=>{console.error("Произошла ошибка:",e)})}const z=20,Z=[];let H,L=!1,$=localStorage.getItem("CACHE_SERV");$=JSON.parse($);function _e(e){const i=p("brandId"),t=p("brand");i&&(e.brandId=i,e.brand=t,E("Марка",t));const l=p("modelId"),a=p("model");l&&(e.modelId=l,e.model=a,E("Модель",a));const s=p("city");s&&(e.city=s,E("Город",s));const m=p("colorId"),c=p("color");m&&(e.colorId=m,E("Цвет",c));const r=p("gearboxType");if(r){L=!0,e.gearboxType=r;let g=$["/api/Auto/GetGearboxTypes"],v=g&&g.data.find(q=>q.name===r);E("Тип КПП",v?v.title:r)}const n=p("engineType");if(n){L=!0,e.engineType=n;let g=$["/api/Auto/GetEngineTypes"],v=g&&g.data.find(q=>q.name===n);E("Тип двигателя",v?v.title:n)}const u=p("bodyType");if(u){L=!0,e.bodyType=u;let g=$["/api/Auto/getBodyTypes"],v=g&&g.data.find(q=>q.name===u);E("Тип кузова",v?v.title:u)}const f=p("wheelType");if(f){L=!0,e.wheelType=f;let g=$["/api/Auto/getWheelTypes"],v=g&&g.data.find(q=>q.name===f);E("Руль",v?v.title:f)}const y=p("driveType");if(y){L=!0,e.driveType=y;let g=$["/api/Auto/getDriveTypes"],v=g&&g.data.find(q=>q.name===y);E("Тип привода",v?v.title:f)}const T=p("yearReleasedFrom");T&&(e.yearReleasedFrom=T,I("yearReleasedFrom",T));const w=p("yearReleasedTo");w&&(L=!0,e.yearReleasedTo=w,I("yearReleasedTo",w));const b=p("priceTo");b&&(e.priceTo=b,I("priceTo",b));const S=p("milleageFrom");S&&(L=!0,e.milleageFrom=S,I("milleageFrom",S));const A=p("milleageTo");A&&(L=!0,e.milleageTo=A,I("milleageTo",A));const W=p("engineCapacity");W&&(L=!0,e.engineCapacity=W,I("engineCapacity",W));const V=p("priceFrom");if(V&&(L=!0,e.priceFrom=V,I("priceFrom",V)),L){let g=document.querySelector(".frame-filter__controls-advanced"),v=document.querySelector(".filter-fields");g&&g.classList.add("active"),v&&v.classList.add("active")}p("priceOrder")&&(e.priceOrder=p("priceOrder")==="true",J(e.priceOrder)),e.offset=p("page"),Y(L)}function E(e,i){if(H)return!1;Z.push({name:e,value:i})}D.on("dataUpdated",be);function be(){Z.forEach(e=>{let i=document.querySelector(`[data-placeholder="${e.name}"]`);i&&i.querySelector(".big-comb__placeholder")&&(i.querySelector(".big-comb__placeholder").innerText=e.value,i.querySelector(".big-comb__placeholder").classList.add("bold"))})}function I(e,i){if(H)return!1;let t=document.querySelector(`[onchange="input_chamged('${e}', this.value)"]`);t&&(t.value=i,t.classList.add("bold"))}function he(e,i,t,l){H=i,H||_e(t);let a=document.querySelector("#set_filter");showPreloader(!0,a),t.limit=z,P(t,s=>{e=j(s.items);let m=Math.ceil(s.totalCount/z);if(setTimeout(()=>l(e,s.items,m)),showPreloader(!1,a),U(s.totalCount),H||t.brandId){Te();let c=document.querySelector(".filter-white"),r=document.querySelector("#vitrina_name");document.getElementById("brands_dynamic").style.display="none",c&&(c.style.marginBottom=0),r&&(r.innerHTML="Автомобили "+(t.brand||"")+" "+(t.model||"")+" "+(t.city?`(город ${t.city})`:""))}})}function Te(){setTimeout(()=>document.querySelector("#filter_cars").removeEventListener("mouseleave",e),3e3),document.querySelector("#filter_cars").addEventListener("mouseleave",e);function e(){document.getElementById("set_filter").scrollIntoView({behavior:"smooth",block:"start"}),document.querySelector("#filter_cars").removeEventListener("mouseleave",e)}}function Le(e,i){if(i==="Марка"){let t=_.brandsIds.find(l=>l.name===e[i].value);t&&(o.brandId=t.id,o.brand=t.name,o.modelId="",o.model="",setTimeout(()=>document.querySelector('[data-placeholder="Модель"] .big-comb__placeholder').innerText="",2e3)),Q(e[i].value)}if(i==="Модель"){let t=_.modelsIds.find(l=>l.name===e[i].value);t&&(o.modelId=t.id,o.model=t.name)}if(i==="Город"&&(o.city=e[i].value),i==="Тип КПП"){let t=_.gearboxTypes.find(l=>l.title===e[i].value);o.gearboxType=t.name}if(i==="Тип двигателя"){let t=_.engineTypes.find(l=>l.title===e[i].value);o.engineType=t.name}if(i==="Тип привода"){let t=_.driveTypes.find(l=>l.title===e[i].value);o.driveType=t.name}if(i==="Руль"){let t=_.wheelTypes.find(l=>l.title===e[i].value);o.wheelType=t.name}if(i==="Тип кузова"){let t=_.bodyTypes.find(l=>l.title===e[i].value);o.bodyType=t.name}if(i==="Цвет"){let t=_.bodyColors.find(l=>l.name===e[i].value);o.colorId=t.id,o.color=t.name}G("ishandEvent")}function ee(e,i){o[e]=i,G("ishandEvent")}let o={};function G(e){let i=document.querySelector(".cars_link");location.pathname==="/"?(i&&(i.style.display="block"),localStorage.removeItem("TYPE_VIEW")):(i&&(i.style.display="none"),localStorage.getItem("TYPE_VIEW")||localStorage.setItem("TYPE_VIEW","dot8"));let t;if(location.pathname==="/"){document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",e||Y(!1);let l=document.querySelector("#set_filter");showPreloader(!0,l),o.limit=0,P(o,s=>{showPreloader(!1,l),ue(s.totalCount,["предложение","предложений","предложений"]),U(s.totalCount)});let a=localStorage.getItem("selectedCity")||"";ce(a,s=>{t=j(s),e||O(t,s)})}else location.pathname==="/tyres/"?(document.querySelector("#vitrina_name").innerHTML="Каталог шин",t=pe,setTimeout(()=>O(t))):location.pathname==="/cars/"?he(t,e,o,O):location.pathname==="/personal/favorite-cars/"?(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",t=localStorage.getItem("FavoriteCars"),t=t?JSON.parse(t):[],setTimeout(()=>O(t,t))):(document.querySelector("#vitrina_name").innerHTML="Автомобили",console.log(" тут карточек нет, либо не сформированы"))}window.getVitrina=G;window.goToCars=function(){let e="?";o.brandId&&(e="?brand="+(o.Марка||o.brand),e+="&brandId="+o.brandId),o.modelId&&(e+="&model="+(o.Модель||o.model),e+="&modelId="+o.modelId),o.city&&(e+="&city="+o.city),o.gearboxType&&(e+="&gearboxType="+o.gearboxType),o.engineType&&(e+="&engineType="+o.engineType),o.driveType&&(e+="&driveType="+o.driveType),o.wheelType&&(e+="&wheelType="+o.wheelType),o.bodyType&&(e+="&bodyType="+o.bodyType),o.colorId&&(e+="&colorId="+o.colorId,e+="&color="+o.color),o.yearReleasedFrom&&(e+="&yearReleasedFrom="+o.yearReleasedFrom),o.yearReleasedTo&&(e+="&yearReleasedTo="+o.yearReleasedTo),o.priceTo&&(e+="&priceTo="+o.priceTo),o.priceFrom&&(e+="&priceFrom="+o.priceFrom),o.milleageFrom&&(e+="&milleageFrom="+o.milleageFrom),o.milleageTo&&(e+="&milleageTo="+o.milleageTo),o.engineCapacity&&(e+="&engineCapacity="+o.engineCapacity),o.priceOrder!==null&&o.priceOrder!==void 0&&(e+="&priceOrder="+o.priceOrder),location.href="/cars/"+e};window.clearFilter=function(){location.href=location.pathname};document.addEventListener("DOMContentLoaded",()=>{let e=null,i=document.querySelector(".coin");i&&i.addEventListener("click",()=>{e===!1?e=!0:e===null?e=!1:e===!0&&(e=null),J(e),ee("priceOrder",e)})});document.addEventListener("DOMContentLoaded",()=>{window.big_comb_select=function(r){let n=r.srcElement.dataset.parent,u=r.srcElement.innerText,f=r.srcElement.parentElement.parentElement;d[n].value=u,f.querySelector(".big-comb__placeholder").innerText=u,f.querySelector(".big-comb__placeholder").classList.add("bold"),f.querySelector(".big-comb__input").value=u,f.querySelector(".big-comb__input").blur(),Le(d,n)},window.input_chamged=function(r,n){ee(r,n)};let e=null;window.input_on=function(r,n){e&&clearTimeout(e),e=setTimeout(()=>input_chamged(r,n),1e3)};let i=document.querySelector(".frame-filter__controls-advanced"),t=document.querySelector(".filter-fields"),l=document.querySelector("#car-vitrina"),a=document.querySelector("#list1"),s=document.querySelector("#list2");if(!a){a=document.querySelector("#list1_1"),s=document.querySelector("#list2_2");let r=[];fe(n=>r=n),window.onCard=function(n){let u=n.querySelector("input"),f,y,T=n.getBoundingClientRect();if(f=document.body.offsetWidth>1200?180:40,y=document.body.offsetWidth>1200?40:-10,document.body.offsetWidth<600&&(f=-10,y=150),n.querySelector("span")&&n.querySelector("span").innerHTML&&["Год от:"].includes(n.querySelector("span").innerHTML)){if(!a.innerHTML){for(let b=+r.from;b<=+r.to;b++)a.innerHTML+=`<a>${b}</a>`;a.querySelectorAll("a").forEach(b=>{b.addEventListener("click",S=>{u.value=S.target.innerText,input_chamged("yearReleasedFrom",S.target.innerText),a.style.left="-1000px"})})}a.style.left=T.x-f+"px",a.style.top=T.y-y+window.scrollY-473+"px",s.style.left="-1000px"}else if(n.querySelector("span")&&n.querySelector("span").innerHTML&&["Год до:"].includes(n.querySelector("span").innerHTML)){if(!s.innerHTML){for(let b=+r.from;b<=+r.to;b++)s.innerHTML+=`<a>${b}</a>`;s.querySelectorAll("a").forEach(b=>{b.addEventListener("click",S=>{u.value=S.target.innerText,input_chamged("yearReleasedTo",S.target.innerText),s.style.left="-1000px"})})}s.style.left=T.x-f+"px",s.style.top=T.y-y+window.scrollY-473+"px",a.style.left="-1000px"}else a.style.left="-1000px",s.style.left="-1000px";n.querySelector("input")&&n.querySelector("input").focus(),setTimeout(()=>{a.style.left="-1000px",s.style.left="-1000px"},5e3)}}l&&l.addEventListener("mousemove",()=>{a&&(a.style.left="-1000px"),s&&(s.style.left="-1000px")}),i&&i.addEventListener("click",()=>{i.classList.length===1?(i&&i.classList.add("active"),t&&t.classList.add("active"),Y(!0)):(i.classList.remove("active"),t&&t.classList.remove("active"));let r=document.querySelector("#deleter");r&&(r.style.left="-1000px")});let m=document.querySelector(".f_auto"),c=document.querySelector(".f_tire");if(m&&c){let r=document.querySelector(".f_auto_buttons"),n=document.querySelector(".f_tire_buttons"),u=document.querySelector(".filter__controls-info");m.addEventListener("click",()=>{m&&m.classList.add("active"),c&&c.classList.remove("active"),n&&(n.style.display="none"),r&&(r.style.display="flex"),u&&(u.style.display="none")}),c.addEventListener("click",()=>{c.classList.add("active"),m.classList.remove("active"),r&&(r.style.display="none"),n&&(n.style.display="flex"),u&&(u.style.display="flex")})}});
