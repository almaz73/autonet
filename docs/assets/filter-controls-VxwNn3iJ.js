import{g as c,l as ie,m as le,n as ae,o as oe,q as ne,r as re,u as se,v as de,w as U,x as g,y as ce,z as M,A as Y,p as J,B as K,C as P,D as ue,E as pe}from"./main-28HHxfg3.js";import{i as fe}from"./swiper-starter-BbhTmDld.js";let E=1;function $(){return location.href.includes("&page")?location.href.slice(0,location.href.lastIndexOf("&page")):location.href}function me(e){const i=document.querySelector("#pager");if(!i)return!1;let t="";E=+c("page")||1;const l=E>3?E-3:0;l>0&&(t+=`<a href=${$()}> 1</a> <span> | </span> ... <span> | </span>`);for(let o=1+l;o<e&&!(o-l>5);o++)t+=`<a ${E===o?'class="active"':""} href=${$()}&page=${o}>${o}</a><span> | </span>`;e>5?t+=` ... <span> | </span>  <a href=${$()}&page=${e}>${e}</a><span> | </span> `:e==="1"?t+='<a class="active">1</a>':t+=` <a href=${$()}&page=${e} class=${e!==E?"":"active"}>${e}</a><span> | </span> `,e&&e!==E&&window.screen.width>500&&(t+=`<a href="javascript:nextPage('${E}')"> След.</a>`),i.innerHTML=t}window.nextPage=e=>{let i="&page="+(+e+1);location.href.includes("&page=")?location.href=$()+i:location.href=location.href+i};let h=document.querySelector("cards");function D(e,i){let t;isNaN(i)||(t=`<div class='cart' id='galery_${i}' >
              <img src="/icons/load.gif" alt="" class="smallloader hide"/>
              <div class='cart__slide'>            
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${e.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
                  <span class='dark-fon'>
                    <img src="/icons/load.gif" alt="" class="gloaballoader"/>
                  </span>
              </div>
              <a class="big_link" href='${e.href}' title="перейти">
                  <div class='name'>
                      <br>                      
                      ${e.name}, ${e.yearReleased}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная резина" class="tyres_icon " 
                       style="display: ${e.type==="tyres"?"block":"none"}; 
                       opacity: ${e.type==="tyres"&&e.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${e.price?e.price+" ₽":""} </div>
                      <div class='cart__of'>${e.fromPerMonth?"ot "+e.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${e.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${e.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${e.id}')" ondblclick="dblCompare('${e.id}')">
                          <img id="compareId_${e.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${e.id}')">
                          <img id="favoriteId_${e.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),i==="abdul"&&(t="<abdul></abdul>",setTimeout(window.reloadAbdul)),i==="swiper_buy"&&(t='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),h.innerHTML+=t}function ye(e,i){const t=document.querySelector("#galery_"+e+" .cart__slide");if(window.current_slide=null,!t)return!1;const l=t.querySelector(".photo"),o=t.querySelector(".cart .red");let f,p,s=0,n=0;l.src=i[s],l.addEventListener("mousemove",d=>{let u=parseInt(d.layerX*100/z/20);if(n!==u){R();let m=d.target.parentNode.querySelector(".gloaballoader"),_=d.target.parentNode.parentNode.querySelector(".smallloader");l.src=i[u],_.classList.remove("hide"),m.classList.remove("hide"),l.onload=()=>{_.classList.add("hide"),m.classList.add("hide")},n=u}o.style.left=u*20+"%"}),t.addEventListener("mouseleave",()=>{l.src=i[0],o.style.left="0"}),t.addEventListener("touchstart",d=>f=d.targetTouches[0].pageX-t.offsetLeft),t.addEventListener("touchmove",d=>p=d.targetTouches[0].pageX-t.offsetLeft),t.addEventListener("touchend",()=>{f>p?s++:s--,s>4&&(s=4),s<0&&(s=0),l.src=i[s],o.style.left=s*20+"%"}),t.addEventListener("click",()=>{if(document.body.clientWidth<500)return!1;t.classList.toggle("watch"),window.current_slide=t,R()})}function O(e,i,t){if(h=h||document.querySelector("cards"),window.compareCars=i,window.favorCars=e,!h)return!1;h.innerHTML="",e.forEach((l,o)=>{D(l,o+1),o===2&&location.pathname!=="/personal/favorite-cars/"&&D(null,"abdul"),o===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&D(null,"swiper_buy")}),location.pathname!=="/"&&location.pathname!=="/personal/favorite-cars/"&&(h.innerHTML+='<div class="pager">Страницы: <span id="pager"></span></div>'),me(t),initChosen(),initFavotite(),e.forEach((l,o)=>ye(o+1,l.photos)),C=document.querySelector(".type_views"),C&&C.addEventListener("click",l=>{X(l),localStorage.setItem("TYPE_VIEW",l.srcElement.classList.value.slice(0,4))}),setTimeout(fe)}let C,z=285,R=()=>{let e=document.querySelector("cards .cart__slide");e&&(z=e.clientWidth),window.current_slide&&(z=window.current_slide.clientWidth)};window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let e=localStorage.getItem("TYPE_VIEW")||"dot4",i=document.querySelector("."+e);i&&i.classList.add("active"),i&&X({srcElement:{classList:{value:e}}})});function X(e){if(!e||!h)return!1;if(h.classList=[],R(),e.srcElement.classList.value.includes("dot8")&&h.classList.add("cards","dot8"),e.srcElement.classList.value.includes("dot4")&&h.classList.add("cards","dot4"),e.srcElement.classList.value.includes("dot1")&&h.classList.add("cards","dot1"),e.srcElement.classList.add){for(let i in C.children)C.children[i].classList&&C.children[i].classList.remove("active");e.srcElement.classList.add("active")}}document.addEventListener("keydown",e=>{e.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),R())});let I=!1,G=function(e){I=e,ve()};const r={};let F={};r.Марка=[];r.Марка.value="";r.Модель=["Не выбрана марка "];r.Город=[];r["Тип кузова"]=[];r.Цвет=[];r["Тип КПП"]=[];r["Тип двигателя"]=[];r["Тип привода"]=[];r.Руль=[];r.Диски=["Все","Отсутствуют"];r.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];r["Ширина профиля"]=["Все","155","185","195","205","215","225"];r["Высота профиля"]=["Все","45","55","60","65","70"];r.Диаметр=["Все","13","14","15","16","17"];r.Сезон=["Все","Зима Шип","Лето"];function Q(e){document.querySelectorAll("comb").forEach(t=>{if(e&&t.dataset.placeholder!=="Модель")return!1;let l=t.dataset.placeholder,o=r[l];if(o){let _=u(o,l);t.innerHTML=`<div class='big-combo' tabindex='1' title="${o.value||l}">
    <span class='big-comb__selected'>
      <span class='big-comb__placeholder'>${o.value||l}</span>
      <input class='big-comb__input' type="text">
    </span>
    <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
    <div class='big_comb__items' onclick='big_comb_select(event)'>
        ${_.join("")}
    </div>
</div>`}let f=t.querySelector(".big-combo"),p=t.querySelector(".big_comb__items"),s=t.querySelector(".big-comb__input"),n=t.querySelector(".big-comb__placeholder"),d=t.querySelector(".big-combo img");f&&f.addEventListener("focus",()=>{p.style.display="block",s.style.display="inline",n&&(n.style.display="none"),d.style.rotate="180deg",s.focus(),s.select()}),s&&(s.addEventListener("blur",()=>m()),s.addEventListener("click",()=>m()),s.addEventListener("keydown",_=>_.key==="Escape"&&m()),s.addEventListener("input",_=>{let L=_.target.value;F.Марка||(F=JSON.parse(JSON.stringify(r))),r[l]=F[l].filter(S=>S.includes(_.target.value)),L?p.innerHTML=u(r[l],l).join(""):p.innerHTML=u(F[l],l).join("")}));function u(_,L){return _.map(S=>'<div data-parent="'+L+'">'+S+"</div>")}function m(){p&&(p.style.display="none"),s&&(s.style.display="none"),d&&(d.style.rotate="0deg"),n&&(n.style.display="")}["Марка","Тип кузова","Тип КПП","Тип двигателя","Тип привода","Руль","Модель","Город","Цвет","Производитель","Ширина профиля","Высота профиля","Диаметр","Сезон","Диски"].includes(n.innerText)||n.classList.add("bold")}),U.emit("dataUpdated",{})}function Z(e){let i=g.brandsIds.find(t=>t.name.toUpperCase()===e.toUpperCase());i&&ce(i.id,t=>{r.Модель=t.map(l=>l.name),F={},g.modelsIds.push(...t),Q("onlyModel")}),i||(r.Модель=["Неизвестный бренд"])}function ve(){Promise.all([new Promise(e=>{ie(i=>{r.Марка=i.map(l=>l.name),g.brandsIds.push(...i);const t=c("brand");t&&Z(t),e()})}),new Promise(e=>{le(i=>{r.Город=i,e()})}),I&&new Promise(e=>{ae(i=>{r["Тип КПП"]=i.map(t=>t.title),g.gearboxTypes.push(...i),e()})}),I&&new Promise(e=>{oe(i=>{r["Тип двигателя"]=i.map(t=>t.title),g.engineTypes.push(...i),e()})}),I&&new Promise(e=>{ne(i=>{r["Тип привода"]=i.map(t=>t.title),g.driveTypes.push(...i),e()})}),I&&new Promise(e=>{re(i=>{r.Руль=i.map(t=>t.title),g.wheelTypes.push(...i),e()})}),I&&new Promise(e=>{se(i=>{r["Тип кузова"]=i.map(t=>t.title),g.bodyTypes.push(...i),e()})}),I&&new Promise(e=>{de(i=>{r.Цвет=i.map(t=>t.name),g.bodyColors.push(...i),e()})})]).then(e=>{Q()}).catch(e=>{console.error("Произошла ошибка:",e)})}const j=20,ee=[];let k,b=!1,x=localStorage.getItem("CACHE_SERV");x=JSON.parse(x);function ge(e){const i=c("brandId"),t=c("brand");i&&(e.brandId=i,e.brand=t,w("Марка",t));const l=c("modelId"),o=c("model");l&&(e.modelId=l,e.model=o,w("Модель",o));const f=c("city");f&&(e.city=f,w("Город",f));const p=c("colorId"),s=c("color");p&&(e.colorId=p,w("Цвет",s));const n=c("gearboxType");if(n){b=!0,e.gearboxType=n;let y=x["/api/Auto/GetGearboxTypes"],v=y&&y.data.find(T=>T.name===n);w("Тип КПП",v?v.title:n)}const d=c("engineType");if(d){b=!0,e.engineType=d;let y=x["/api/Auto/GetEngineTypes"],v=y&&y.data.find(T=>T.name===d);w("Тип двигателя",v?v.title:d)}const u=c("bodyType");if(u){b=!0,e.bodyType=u;let y=x["/api/Auto/getBodyTypes"],v=y&&y.data.find(T=>T.name===u);w("Тип кузова",v?v.title:u)}const m=c("wheelType");if(m){b=!0,e.wheelType=m;let y=x["/api/Auto/getWheelTypes"],v=y&&y.data.find(T=>T.name===m);w("Руль",v?v.title:m)}const _=c("driveType");if(_){b=!0,e.driveType=_;let y=x["/api/Auto/getDriveTypes"],v=y&&y.data.find(T=>T.name===_);w("Тип привода",v?v.title:m)}const L=c("yearReleasedFrom");L&&(e.yearReleasedFrom=L,q("yearReleasedFrom",L));const S=c("yearReleasedTo");S&&(b=!0,e.yearReleasedTo=S,q("yearReleasedTo",S));const H=c("priceTo");H&&(e.priceTo=H,q("priceTo",H));const V=c("milleageFrom");V&&(b=!0,e.milleageFrom=V,q("milleageFrom",V));const N=c("milleageTo");N&&(b=!0,e.milleageTo=N,q("milleageTo",N));const W=c("engineCapacity");W&&(b=!0,e.engineCapacity=W,q("engineCapacity",W));const B=c("priceFrom");if(B&&(b=!0,e.priceFrom=B,q("priceFrom",B)),b){let y=document.querySelector(".frame-filter__controls-advanced"),v=document.querySelector(".filter-fields");y&&y.classList.add("active"),v&&v.classList.add("active")}c("priceOrder")&&(e.priceOrder=c("priceOrder")==="true",P(e.priceOrder)),e.offset=c("page"),G(b)}function w(e,i){if(k)return!1;ee.push({name:e,value:i})}U.on("dataUpdated",_e);function _e(){ee.forEach(e=>{let i=document.querySelector(`[data-placeholder="${e.name}"]`);i&&i.querySelector(".big-comb__placeholder")&&(i.querySelector(".big-comb__placeholder").innerText=e.value,i.querySelector(".big-comb__placeholder").classList.add("bold"))})}function q(e,i){if(k)return!1;let t=document.querySelector(`[onchange="input_chamged('${e}', this.value)"]`);t&&(t.value=i,t.classList.add("bold"))}function be(e,i,t,l){k=i,k||ge(t);let o=document.querySelector("#set_filter");M(o,!0),t.limit=j,Y(t,f=>{e=J(f.items);let p=Math.ceil(f.totalCount/j);if(setTimeout(()=>l(e,f.items,p)),M(o,!1),K(f.totalCount),k||t.brandId){he();let s=document.querySelector(".filter-white"),n=document.querySelector("#vitrina_name");document.getElementById("brands_dynamic").style.display="none",s&&(s.style.marginBottom=0),n&&(n.innerHTML="Автомобили "+(t.brand||"")+" "+(t.model||"")+" "+(t.city?`(город ${t.city})`:""))}})}function he(){setTimeout(()=>document.querySelector("#filter_cars").removeEventListener("mouseleave",e),3e3),document.querySelector("#filter_cars").addEventListener("mouseleave",e);function e(){document.getElementById("set_filter").scrollIntoView({behavior:"smooth",block:"start"}),document.querySelector("#filter_cars").removeEventListener("mouseleave",e)}}function Te(e,i){if(i==="Марка"){let t=g.brandsIds.find(l=>l.name===e[i].value);t&&(a.brandId=t.id,a.brand=t.name,a.modelId="",a.model="",setTimeout(()=>document.querySelector('[data-placeholder="Модель"] .big-comb__placeholder').innerText="",2e3)),Z(e[i].value)}if(i==="Модель"){let t=g.modelsIds.find(l=>l.name===e[i].value);t&&(a.modelId=t.id,a.model=t.name)}if(i==="Город"&&(a.city=e[i].value),i==="Тип КПП"){let t=g.gearboxTypes.find(l=>l.title===e[i].value);a.gearboxType=t.name}if(i==="Тип двигателя"){let t=g.engineTypes.find(l=>l.title===e[i].value);a.engineType=t.name}if(i==="Тип привода"){let t=g.driveTypes.find(l=>l.title===e[i].value);a.driveType=t.name}if(i==="Руль"){let t=g.wheelTypes.find(l=>l.title===e[i].value);a.wheelType=t.name}if(i==="Тип кузова"){let t=g.bodyTypes.find(l=>l.title===e[i].value);a.bodyType=t.name}if(i==="Цвет"){let t=g.bodyColors.find(l=>l.name===e[i].value);a.colorId=t.id,a.color=t.name}A("ishandEvent")}function te(e,i){a[e]=i,A("ishandEvent")}let a={};function A(e){let i=document.querySelector(".cars_link");location.pathname==="/"?(i&&(i.style.display="block"),localStorage.removeItem("TYPE_VIEW")):(i&&(i.style.display="none"),localStorage.getItem("TYPE_VIEW")||localStorage.setItem("TYPE_VIEW","dot8"));let t;if(location.pathname==="/"){document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",e||G(!1);let l=document.querySelector("#set_filter");M(l,!0),a.limit=7,Y(a,o=>{M(l,!1),t=J(o.items),ue(o.totalCount,["предложение","предложений","предложений"]),K(o.totalCount),e||O(t,o.items)})}else location.pathname==="/tyres/"?(document.querySelector("#vitrina_name").innerHTML="Каталог шин",t=pe,setTimeout(()=>O(t))):location.pathname==="/cars/"?be(t,e,a,O):location.pathname==="/personal/favorite-cars/"?(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",t=localStorage.getItem("FavoriteCars"),t=t?JSON.parse(t):[],setTimeout(()=>O(t))):(document.querySelector("#vitrina_name").innerHTML="Автомобили",console.log(" тут карточек нет, либо не сформированы"))}const we=c("id");we||A();window.getVitrina=A;window.goToCars=function(){let e="?";a.brandId&&(e="?brand="+(a.Марка||a.brand),e+="&brandId="+a.brandId),a.modelId&&(e+="&model="+(a.Модель||a.model),e+="&modelId="+a.modelId),a.city&&(e+="&city="+a.city),a.gearboxType&&(e+="&gearboxType="+a.gearboxType),a.engineType&&(e+="&engineType="+a.engineType),a.driveType&&(e+="&driveType="+a.driveType),a.wheelType&&(e+="&wheelType="+a.wheelType),a.bodyType&&(e+="&bodyType="+a.bodyType),a.colorId&&(e+="&colorId="+a.colorId,e+="&color="+a.color),a.yearReleasedFrom&&(e+="&yearReleasedFrom="+a.yearReleasedFrom),a.yearReleasedTo&&(e+="&yearReleasedTo="+a.yearReleasedTo),a.priceTo&&(e+="&priceTo="+a.priceTo),a.priceFrom&&(e+="&priceFrom="+a.priceFrom),a.milleageFrom&&(e+="&milleageFrom="+a.milleageFrom),a.milleageTo&&(e+="&milleageTo="+a.milleageTo),a.engineCapacity&&(e+="&engineCapacity="+a.engineCapacity),a.priceOrder!==null&&a.priceOrder!==void 0&&(e+="&priceOrder="+a.priceOrder),location.href="/cars/"+e};window.clearFilter=function(){location.href=location.pathname};document.addEventListener("DOMContentLoaded",()=>{let e=null,i=document.querySelector(".coin");i&&i.addEventListener("click",()=>{e===!1?e=!0:e===null?e=!1:e===!0&&(e=null),P(e),te("priceOrder",e)})});document.addEventListener("DOMContentLoaded",()=>{window.big_comb_select=function(n){let d=n.srcElement.dataset.parent,u=n.srcElement.innerText,m=n.srcElement.parentElement.parentElement;r[d].value=u,m.querySelector(".big-comb__placeholder").innerText=u,m.querySelector(".big-comb__placeholder").classList.add("bold"),m.querySelector(".big-comb__input").value=u,m.querySelector(".big-comb__input").blur(),Te(r,d)},window.input_chamged=function(n,d){te(n,d)};let e=null;window.input_on=function(n,d){e&&clearTimeout(e),e=setTimeout(()=>input_chamged(n,d),1e3)};let i=document.querySelector(".frame-filter__controls-advanced"),t=document.querySelector(".filter-fields"),l=document.querySelector("#car-vitrina"),o=document.querySelector("#list1"),f=document.querySelector("#list2");l&&l.addEventListener("mousemove",()=>{o&&(o.style.left="-1000px"),f&&(f.style.left="-1000px")}),i&&i.addEventListener("click",()=>{i.classList.length===1?(i&&i.classList.add("active"),t&&t.classList.add("active"),G(!0)):(i.classList.remove("active"),t&&t.classList.remove("active"));let n=document.querySelector("#deleter");n&&(n.style.left="-1000px")});let p=document.querySelector(".f_auto"),s=document.querySelector(".f_tire");if(p&&s){let n=document.querySelector(".f_auto_buttons"),d=document.querySelector(".f_tire_buttons"),u=document.querySelector(".filter__controls-info");p.addEventListener("click",()=>{p&&p.classList.add("active"),s&&s.classList.remove("active"),d&&(d.style.display="none"),n&&(n.style.display="flex"),u&&(u.style.display="none")}),s.addEventListener("click",()=>{s.classList.add("active"),p.classList.remove("active"),n&&(n.style.display="none"),d&&(d.style.display="flex"),u&&(u.style.display="flex")})}});
