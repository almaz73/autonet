import{c as L,a as k}from"./apibase-CWZdDwnH.js";import{f as S}from"./main-zwmTiN8O.js";let d;document.addEventListener("DOMContentLoaded",()=>{d=document.querySelector("cards")});function b(e,i){let t;isNaN(i)||(t=`<div class='cart' id='galery_${i}' >
              <div class='cart__slide'>                    
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${e.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
                  <span class='dark-fon'/>                    
              </div>
              <a class="big_link" href='${e.href}' title="перейти">
                  <div class='name'>
                      <br>                      
                      ${e.name}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная рещина" class="tyres_icon " 
                       style="display: ${e.type==="tyres"?"block":"none"}; 
                       opacity: ${e.type==="tyres"&&e.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${e.price?e.price+" ₽":""} </div>
                      <div class='cart__of'>${e.fromPerMonth?"ot "+e.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${e.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${e.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${e.id}')" ondblclick="dblCompare('${e.id}')">
                          <img id="compareId_${e.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${e.id}')">
                          <img id="favoriteId_${e.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),i==="abdul"&&(t="<abdul></abdul>",setTimeout(window.reloadAbdul)),i==="swiper_buy"&&(t='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),d.innerHTML+=t}function I(e,i){const t=document.querySelector("#galery_"+e+" .cart__slide");if(window.current_slide=null,!t)return!1;const o=t.querySelector(".photo"),n=t.querySelector(".cart .red");let c,s,a=0,p=0;o.src=i[a],o.addEventListener("mousemove",l=>{let f=parseInt(l.layerX*100/w/20);p!==f&&(o.src=i[f],p=f),n.style.left=f*20+"%"}),t.addEventListener("mouseleave",()=>{o.src=i[0],n.style.left="0%"}),t.addEventListener("touchstart",l=>c=l.targetTouches[0].pageX-t.offsetLeft),t.addEventListener("touchmove",l=>s=l.targetTouches[0].pageX-t.offsetLeft),t.addEventListener("touchend",()=>{c>s?a++:a--,a>4&&(a=4),a<0&&(a=0),o.src=i[a],n.style.left=a*20+"%"}),t.addEventListener("click",()=>{if(document.body.clientWidth<500)return!1;t.classList.toggle("watch"),window.current_slide=t,h()})}function y(e,i){window.compareCars=i,window.favorCars=e,d.innerHTML="",e.forEach((t,o)=>{b(t,o+1),o===2&&location.pathname!=="/personal/favorite-cars/"&&b(null,"abdul"),o===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&b(null,"swiper_buy")}),e.forEach((t,o)=>I(o+1,t.photos)),d.innerHTML||(d.innerHTML='<div class="nodata" style="width: 200%;text-align:center">HЕТ ИЗБРАННЫХ АВТОМОБИЛЕЙ </div>')}let u=document.querySelector(".type_views"),w,h=()=>{let e=document.querySelector("cards .cart__slide");e&&(w=e.clientWidth),window.current_slide&&(w=window.current_slide.clientWidth)};document.addEventListener("DOMContentLoaded",()=>setTimeout(h,500));window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let e=localStorage.getItem("TYPE_VIEW")||"dot4",i=document.querySelector("."+e);i&&i.classList.add("active"),i&&q({srcElement:{classList:{value:e}}})});u&&u.addEventListener("click",e=>{q(e),localStorage.setItem("TYPE_VIEW",e.srcElement.classList.value.slice(0,4))});function q(e){if(!e||!d)return!1;if(d.classList=[],h(),e.srcElement.classList.value==="dot8"&&d.classList.add("cards","dot8"),e.srcElement.classList.value==="dot4"&&d.classList.add("cards","dot4"),e.srcElement.classList.value==="dot1"&&d.classList.add("cards","dot1"),e.srcElement.classList.add){for(let i in u.children)u.children[i].classList&&u.children[i].classList.remove("active");e.srcElement.classList.add("active")}}document.addEventListener("keydown",e=>{e.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),h())});let m=document.querySelector(".type_views.coin");m&&m.addEventListener("click",()=>{let e=m.querySelector("img").style.rotate!=="180deg";m.querySelector("img").style.rotate=e?"180deg":"0deg",console.log("запрос нужен more = ",e)});function P(e,i){console.log("items = ",e),console.log("name = ",i),console.log("items[name].value = ",e[i].value)}function E(e){let i=[];return e&&e.forEach(t=>{let o=t.milleage+" км, ";t.engineCapacity&&(o+=t.engineCapacity),t.gearboxType&&(o+=" "+t.gearboxType),t.enginePower&&(o+=" ("+t.enginePower+"&nbsp;л.с)"),t.bodyType&&(o+=", "+t.bodyType),o+=", "+t.driveType,t.engineType&&(o+=", "+t.engineType);let n=S(parseInt(parseInt(t.price.replace(/ /g,""))/90.12));i.push({address:t.fullAddress,id:t.id,name:t.brand+" "+t.model,href:"/cars/car.html?id="+t.id,price:S(t.price),fromPerMonth:n,info:o,photos:t.images})}),i}function j(){let e=document.querySelector(".cars_link"),i=document.querySelector(".view_buttons");location.pathname==="/"?(e&&(e.style.display="block"),localStorage.setItem("TYPE_VIEW","dot4")):(e&&(e.style.display="none"),i&&(i.style.display="block"));let t;if(location.pathname==="/")document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",L(7).then(o=>{t=E(o),y(t,o)});else if(location.pathname==="/tyres/")document.querySelector("#vitrina_name").innerHTML="Каталог шин",t=[{address:"Альметьевск , Герцена 1Б",id:210,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:211,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:212,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:213,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:214,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg"]}],y(t);else if(location.pathname==="/cars/"){const n=new URLSearchParams(window.location.search).get("brand").slice(0,-1);k().then(c=>{let s=c.find(a=>a.name.toLowerCase()===n.toLowerCase());s&&(s=s.brandId),L(12,s).then(a=>{t=E(a),y(t,a)})})}else location.pathname==="/personal/favorite-cars/"?(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",t=localStorage.getItem("FavoriteCars"),t=t?JSON.parse(t):[],y(t)):(document.querySelector("#vitrina_name").innerHTML="Автомобили ВАЗ (LADA) с пробегом",console.log(" тут карточек нет, либо не сформированы"))}const M=new URLSearchParams(window.location.search),$=M.get("id");$||j();window.getVitrina=j;window.addFavorite=function(e){let i=window.favorCars.find(s=>s.id===e),t=T(),o=document.querySelector("#favoriteId_"+e),n=o.classList.contains("chosen"),c=t.find(s=>s.id===e);n?location.pathname==="/personal/favorite-cars/"?(o.classList.remove("chosen"),t=t.filter(s=>s.id!==e),localStorage.setItem("FavoriteCars",JSON.stringify(t)),window.getVitrina()):location.href="/personal/favorite-cars/":(o.classList.add("chosen"),c||t.push(i)),t&&(localStorage.setItem("FavoriteCars",JSON.stringify(t)),K(t))};function K(e){(e||T()).forEach(t=>{let o=document.querySelector("#favoriteId_"+t.id);o&&o.classList.add("chosen")})}function T(){let e=localStorage.getItem("FavoriteCars");return e?e=JSON.parse(e):e=[],e}document.addEventListener("DOMContentLoaded",()=>{setTimeout(K,2e3)});let r={};r.Марка=["Все","AUDI","BMV","Brilliance","BYD","Cadilac"];r.Марка.value="";r.Модель=["Все","3 серия","5 серия","X1","X3","X5"];r.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];r["Ширина профиля"]=["Все","155","185","195","205","215","225"];r["Высота профиля"]=["Все","45","55","60","65","70"];r.Диаметр=["Все","13","14","15","16","17"];r.Сезон=["Все","Зима Шип","Лето"];r.Город=["Все","Альметьевск","Казань","Набережные Челны","Нижнекамск","Стерлитамак"];r["Тип кузова"]=["Все","Автобус","Внедорожник","Кроссовер","Купе","Лифтбек","Минивэн","Пикап","Седан","Универсал","Фургон","Хетчбэк"];r.Цвет=["Все","Бежевый","Белый","Голубой","Желтый","Зелёный","Золотой","Коричневый","Красный","Оранжевый","Серебряный","Серый","Синий","Фиолетовый","Чёрный"];r["Тип КПП"]=["Все","Автоматическая","Вариатор","Механическая","Робот"];r["Тип двигателя"]=["Все","Бензиновый","Гибридный","Дизельный","Электро"];r["Тип привода"]=["Все","Задний","Передний","Полный"];r.Руль=["Все","Левый"];r.Диски=["Все","Отсутствуют"];window.addEventListener("load",()=>{document.querySelectorAll("comb").forEach(i=>{let t=i.dataset.placeholder,o=r[t];if(o){let f=o.map(C=>'<div data-parent="'+t+'">'+C+"</div>");i.innerHTML=`<div class='big-combo' tabindex='1'>
        <span class='big-comb__selected'>
          <span class='big-comb__placeholder'>${o.value||t}</span>
          <input class='big-comb__input' type="text">
        </span>
        <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
        <div class='big_comb__items' onclick='big_comb_select(event)'>
            ${f.join("")}
        </div>
    </div>`}let n=i.querySelector(".big-combo"),c=i.querySelector(".big_comb__items"),s=i.querySelector(".big-comb__input"),a=i.querySelector(".big-comb__placeholder"),p=i.querySelector(".big-combo img");n&&n.addEventListener("focus",()=>{c.style.display="block",s.style.display="inline",a&&(a.style.display="none"),p.style.rotate="180deg",s.focus(),s.select()}),s&&(s.addEventListener("blur",()=>l()),s.addEventListener("click",()=>l()),s.addEventListener("keydown",f=>f.key==="Escape"&&l()));function l(){c&&(c.style.display="none"),s&&(s.style.display="none"),bigCombPlaceholde&&(a.style.display=""),p&&(p.style.rotate="0deg")}})});window.big_comb_select=function(e){let i=e.srcElement.dataset.parent,t=e.srcElement.innerText,o=e.srcElement.parentElement.parentElement;r[i].value=t,o.querySelector(".big-comb__placeholder").innerText=t,o.querySelector(".big-comb__placeholder").classList.add("bold"),o.querySelector(".big-comb__input").value=t,o.querySelector(".big-comb__input").blur(),P(r,i)};let _=document.querySelector(".frame-filter__controls-advanced"),N=document.querySelector(".filter-fields");_&&_.addEventListener("click",()=>{_.classList.length===1?(_.classList.add("active"),N.classList.add("active")):(_.classList.remove("active"),N.classList.remove("active"))});let v=document.querySelector(".f_auto"),g=document.querySelector(".f_tire");if(v&&g){let e=document.querySelector(".f_auto_buttons"),i=document.querySelector(".f_tire_buttons"),t=document.querySelector(".filter__controls-info");v.addEventListener("click",()=>{v.classList.add("active"),g.classList.remove("active"),i&&(i.style.display="none"),e&&(e.style.display="flex"),t&&(t.style.display="none")}),g.addEventListener("click",()=>{g.classList.add("active"),v.classList.remove("active"),e&&(e.style.display="none"),i&&(i.style.display="flex"),t&&(t.style.display="flex")})}
