import{i as Q,c as Z,d as ee,e as te,f as ie,g as oe,h as le,j as ae,k as ne,l as P}from"./favoriteCars-UyRy5S1X.js";import{i as re}from"./compareCars-DjUyrNbL.js";import{g as s,a as d,e as z,p as U,d as V}from"./global-func-By-vpF4u.js";let h=1;function E(){return location.href.includes("&page")?location.href.slice(0,location.href.lastIndexOf("&page")):location.href}function se(e){const t=document.querySelector("#pager");if(!t)return!1;let i="";h=+s("page")||1;const l=h>3?h-3:0;l>0&&(i+=`<a href=${E()}> 1</a> <span> | </span> ... <span> | </span>`);for(let a=1+l;a<e&&!(a-l>5);a++)i+=`<a ${h===a?'class="active"':""} href=${E()}&page=${a}>${a}</a><span> | </span>`;e>5?i+=` ... <span> | </span>  <a href=${E()}&page=${e}>${e}</a><span> | </span> `:e==="1"?i+='<a class="active">1</a>':i+=` <a href=${E()}&page=${e} class=${e!==h?"":"active"}>${e}</a><span> | </span> `,e&&e!==h&&window.screen.width>500&&(i+=`<a href="javascript:nextPage('${h}')"> След.</a>`),t.innerHTML=i}window.nextPage=e=>{let t="&page="+(+e+1);location.href.includes("&page=")?location.href=E()+t:location.href=location.href+t};let y;document.addEventListener("DOMContentLoaded",()=>{y=document.querySelector("cards")});function R(e,t){let i;isNaN(t)||(i=`<div class='cart' id='galery_${t}' >
              <div class='cart__slide'>                    
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${e.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
                  <span class='dark-fon'/>                    
              </div>
              <a class="big_link" href='${e.href}' title="перейти">
                  <div class='name'>
                      <br>                      
                      ${e.name}, ${e.yearReleased}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная резина" class="tyres_icon " 
                       style="display: ${e.type==="tyres"?"block":"none"}; 
                       opacity: ${e.type==="tyres"&&e.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${e.price?e.price+" ₽":""} </div>
                      <div class='cart__of'>${e.fromPerMonth?"ot "+e.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${e.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${e.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${e.id}')" ondblclick="dblCompare('${e.id}')">
                          <img id="compareId_${e.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${e.id}')">
                          <img id="favoriteId_${e.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),t==="abdul"&&(i="<abdul></abdul>",setTimeout(window.reloadAbdul)),t==="swiper_buy"&&(i='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),y.innerHTML+=i}function de(e,t){const i=document.querySelector("#galery_"+e+" .cart__slide");if(window.current_slide=null,!i)return!1;const l=i.querySelector(".photo"),a=i.querySelector(".cart .red");let u,_,r=0,c=0;l.src=t[r],l.addEventListener("mousemove",p=>{let f=parseInt(p.layerX*100/H/20);c!==f&&(l.src=t[f],c=f),a.style.left=f*20+"%"}),i.addEventListener("mouseleave",()=>{l.src=t[0],a.style.left="0%"}),i.addEventListener("touchstart",p=>u=p.targetTouches[0].pageX-i.offsetLeft),i.addEventListener("touchmove",p=>_=p.targetTouches[0].pageX-i.offsetLeft),i.addEventListener("touchend",()=>{u>_?r++:r--,r>4&&(r=4),r<0&&(r=0),l.src=t[r],a.style.left=r*20+"%"}),i.addEventListener("click",()=>{if(document.body.clientWidth<500)return!1;i.classList.toggle("watch"),window.current_slide=i,F()})}function N(e,t,i){if(window.compareCars=t,window.favorCars=e,!y)return!1;y.innerHTML="",e.forEach((l,a)=>{R(l,a+1),a===2&&location.pathname!=="/personal/favorite-cars/"&&R(null,"abdul"),a===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&R(null,"swiper_buy")}),!y.innerHTML&&location.pathname.includes("favorite")&&(y.innerHTML='<div class="nodata" style="width: 200%;text-align:center">HЕТ ИЗБРАННЫХ АВТОМОБИЛЕЙ </div>'),location.pathname!=="/"&&(y.innerHTML+='<div class="pager">Страницы: <span id="pager"></span></div>'),se(i),re(),Q(),e.forEach((l,a)=>de(a+1,l.photos))}let S=document.querySelector(".type_views"),H=285,F=()=>{let e=document.querySelector("cards .cart__slide");e&&(H=e.clientWidth),window.current_slide&&(H=window.current_slide.clientWidth)};document.addEventListener("DOMContentLoaded",()=>setTimeout(F,500));window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let e=localStorage.getItem("TYPE_VIEW")||"dot4",t=document.querySelector("."+e);t&&t.classList.add("active"),t&&Y({srcElement:{classList:{value:e}}})});S&&S.addEventListener("click",e=>{Y(e),localStorage.setItem("TYPE_VIEW",e.srcElement.classList.value.slice(0,4))});function Y(e){if(!e||!y)return!1;if(y.classList=[],F(),e.srcElement.classList.value==="dot8"&&y.classList.add("cards","dot8"),e.srcElement.classList.value==="dot4"&&y.classList.add("cards","dot4"),e.srcElement.classList.value==="dot1"&&y.classList.add("cards","dot1"),e.srcElement.classList.add){for(let t in S.children)S.children[t].classList&&S.children[t].classList.remove("active");e.srcElement.classList.add("active")}}document.addEventListener("keydown",e=>{e.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),F())});let $=document.querySelector(".type_views.coin");$&&$.addEventListener("click",()=>{let e=$.querySelector("img").style.rotate!=="180deg";$.querySelector("img").style.rotate=e?"180deg":"0deg",console.log("запрос нужен more = ",e)});let T=!1,B=function(e){T=e,ce()},n={};n.Марка=[];n.Марка.value="";n.Модель=["е выбрана марка "];n.Город=[];n["Тип кузова"]=[];n.Цвет=["Все","Бежевый","Белый","Голубой","Желтый","Зелёный","Золотой","Коричневый","Красный","Оранжевый","Серебряный","Серый","Синий","Фиолетовый","Чёрный"];n["Тип КПП"]=[];n["Тип двигателя"]=[];n["Тип привода"]=[];n.Руль=[];n.Диски=["Все","Отсутствуют"];n.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];n["Ширина профиля"]=["Все","155","185","195","205","215","225"];n["Высота профиля"]=["Все","45","55","60","65","70"];n.Диаметр=["Все","13","14","15","16","17"];n.Сезон=["Все","Зима Шип","Лето"];function D(e){document.querySelectorAll("comb").forEach(i=>{if(e&&i.dataset.placeholder!=="Модель")return!1;let l=i.dataset.placeholder,a=n[l];if(a){let g=a.map(w=>'<div data-parent="'+l+'">'+w+"</div>");i.innerHTML=`<div class='big-combo' tabindex='1' title="${a.value||l}">
    <span class='big-comb__selected'>
      <span class='big-comb__placeholder'>${a.value||l}</span>
      <input class='big-comb__input' type="text">
    </span>
    <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
    <div class='big_comb__items' onclick='big_comb_select(event)'>
        ${g.join("")}
    </div>
</div>`}let u=i.querySelector(".big-combo"),_=i.querySelector(".big_comb__items"),r=i.querySelector(".big-comb__input"),c=i.querySelector(".big-comb__placeholder"),p=i.querySelector(".big-combo img");u&&u.addEventListener("focus",()=>{_.style.display="block",r.style.display="inline",c&&(c.style.display="none"),p.style.rotate="180deg",r.focus(),r.select()}),r&&(r.addEventListener("blur",()=>f()),r.addEventListener("click",()=>f()),r.addEventListener("keydown",g=>g.key==="Escape"&&f()));function f(){_&&(_.style.display="none"),r&&(r.style.display="none"),p&&(p.style.rotate="0deg"),c&&(c.style.display="")}["Марка","Тип кузова","Тип КПП","Тип двигателя","Тип привода","Руль","Модель","Город","Производитель","Ширина профиля","Высота профиля","Диаметр","Сезон","Диски"].includes(c.innerText)||c.classList.add("bold")}),z.emit("dataUpdated",{})}function O(e){let t=d.brandsIds.find(i=>i.name.toUpperCase()===e.toUpperCase());t&&ne(t.id).then(i=>{n.Модель=i.map(l=>l.name),d.modelsIds.push(...i),D("onlyModel")}),t||(n.Модель=["Неизвестный бренд"])}function ce(){Promise.all([new Promise(e=>{Z().then(t=>{n.Марка=t.map(l=>l.name),d.brandsIds.push(...t);const i=s("brand");i&&O(i),e()})}),new Promise(e=>{ee().then(t=>{n.Город=t,e()})}),T&&new Promise(e=>{te().then(t=>{n["Тип КПП"]=t.map(i=>i.title),d.gearboxTypes.push(...t),e()})}),T&&new Promise(e=>{ie().then(t=>{n["Тип двигателя"]=t.map(i=>i.title),d.engineTypes.push(...t),e()})}),T&&new Promise(e=>{oe().then(t=>{n["Тип привода"]=t.map(i=>i.title),d.driveTypes.push(...t),e()})}),T&&new Promise(e=>{le().then(t=>{n.Руль=t.map(i=>i.title),d.wheelTypes.push(...t),e()})}),T&&new Promise(e=>{ae().then(t=>{n["Тип кузова"]=t.map(i=>i.title),d.bodyTypes.push(...t),e()})})]).then(e=>{D()}).catch(e=>{console.error("Произошла ошибка:",e)})}const W=20,G=[];let I,m=!1;function pe(e){const t=s("brandId"),i=s("brand");t&&(e.brandId=t,e.brand=i,b("Марка",i));const l=s("modelId"),a=s("model");l&&(e.modelId=l,e.model=a,b("Модель",a));const u=s("city");u&&(e.city=u,b("Город",u));const _=s("gearboxType");_&&(m=!0,e.gearboxType=_,b("Тип КПП",_));const r=s("engineType");r&&(m=!0,e.engineType=r,b("Тип двигателя",r));const c=s("bodyType");c&&(m=!0,e.bodyType=c,b("Тип кузова",c));const p=s("wheelType");p&&(m=!0,e.wheelType=p,b("Руль",p));const f=s("driveType");f&&(m=!0,e.driveType=f,b("Тип привода",f));const g=s("yearReleasedFrom");g&&(e.yearReleasedFrom=g,v("yearReleasedFrom",g));const w=s("yearReleasedTo");w&&(m=!0,e.yearReleasedTo=w,v("yearReleasedTo",w));const k=s("priceTo");k&&(e.priceTo=k,v("priceTo",k));const K=s("milleageFrom");K&&(m=!0,e.milleageFrom=K,v("milleageFrom",K));const C=s("milleageTo");C&&(m=!0,e.milleageTo=C,v("milleageTo",C));const M=s("priceFrom");if(M&&(m=!0,e.priceFrom=M,v("priceFrom",M)),m){let X=document.querySelector(".frame-filter__controls-advanced"),J=document.querySelector(".filter-fields");X.classList.add("active"),J.classList.add("active")}e.offset=s("page"),B(m)}function b(e,t){if(I)return!1;G.push({name:e,value:t})}z.on("dataUpdated",fe);function fe(){G.forEach(e=>{let t=document.querySelector(`[data-placeholder="${e.name}"]`);t&&t.querySelector(".big-comb__placeholder")&&(t.querySelector(".big-comb__placeholder").innerText=e.value,t.querySelector(".big-comb__placeholder").classList.add("bold"))})}function v(e,t){if(I)return!1;let i=document.querySelector(`[onchange="input_chamged('${e}', this.value)"]`);i&&(i.value=t,i.classList.add("bold"))}function ye(e,t,i,l){I=t,I||pe(i),P(W,i).then(a=>{e=U(a.items);let u=Math.ceil(a.totalCount/W);l(e,a.items,u),document.querySelector("#set_filter span.number").innerHTML=a.totalCount+" "+V(a.totalCount,["предложение","предложения","предложений"]),(I||i.brandId)&&(document.getElementById("set_filter").scrollIntoView({behavior:"smooth",block:"start"}),document.getElementById("brands_dynamic").style.display="none",document.querySelector(".filter-white").style.marginBottom=0,document.querySelector("#vitrina_name").innerHTML="Автомобили "+(i.brand||"")+" "+(i.model||""))})}function ue(e,t){if(t==="Марка"){let i=d.brandsIds.find(l=>l.name===e[t].value);i&&(o.brandId=i.id,o.brand=i.name,o.modelId="",o.model=""),O(e[t].value)}if(t==="Модель"){let i=d.modelsIds.find(l=>l.name===e[t].value);i&&(o.modelId=i.id,o.model=i.name)}if(t==="Город"&&(o.city=e[t].value),t==="Тип КПП"){let i=d.gearboxTypes.find(l=>l.title===e[t].value);o.gearboxType=i.name}if(t==="Тип двигателя"){let i=d.engineTypes.find(l=>l.title===e[t].value);o.engineType=i.name}if(t==="Тип привода"){let i=d.driveTypes.find(l=>l.title===e[t].value);o.driveType=i.name}if(t==="Руль"){let i=d.wheelTypes.find(l=>l.title===e[t].value);o.wheelType=i.name}if(t==="Тип кузова"){let i=d.bodyTypes.find(l=>l.title===e[t].value);o.bodyType=i.name}q("ishandEvent")}function me(e,t){o[e]=t,q("ishandEvent")}function _e(e){o[e]="",e==="Марка"&&(o.brand=null,o.brandId=null,o.model=null,o.modelId=null),e==="Модель"&&(o.model=null,o.modelId=null),e==="Тип двигателя"&&(o.engineType=null),e==="Город"&&(o.city=null),e==="Тип КПП"&&(o.gearboxType=null),e==="Тип привода"&&(o.driveType=null),e==="Руль"&&(o.wheelType=null),e==="Тип кузова"&&(o.bodyType=null),q("ishandEvent")}let o={};function q(e){let t=document.querySelector(".cars_link"),i=document.querySelector(".view_buttons");location.pathname==="/"?(t&&(t.style.display="block"),localStorage.removeItem("TYPE_VIEW")):(t&&(t.style.display="none"),i&&(i.style.display="block"),localStorage.getItem("TYPE_VIEW")||localStorage.setItem("TYPE_VIEW","dot8"));let l;location.pathname==="/"?(document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",e||B(!1),P(7,o).then(a=>{l=U(a.items),V(a.totalCount,["предложение","предложений","предложений"]),document.querySelector("#set_filter span.number").innerHTML=a.totalCount+" "+V(a.totalCount,["предложение","предложения","предложений"]),e||N(l,a.items)})):location.pathname==="/tyres/"?(document.querySelector("#vitrina_name").innerHTML="Каталог шин",l=[{address:"Альметьевск , Герцена 1Б",id:210,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:211,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:212,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:213,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:214,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg"]}],setTimeout(()=>N(l))):location.pathname==="/cars/"?ye(l,e,o,N):location.pathname==="/personal/favorite-cars/"?(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",l=localStorage.getItem("FavoriteCars"),l=l?JSON.parse(l):[],setTimeout(()=>N(l))):(document.querySelector("#vitrina_name").innerHTML="111 Автомобили",console.log(" тут карточек нет, либо не сформированы"))}const be=s("id");be||q();window.getVitrina=q;window.goToCars=function(){let e="?";o.brandId&&(e="?brand="+(o.Марка||o.brand),e+="&brandId="+o.brandId),o.modelId&&(e+="&model="+(o.Модель||o.model),e+="&modelId="+o.modelId),o.city&&(e+="&city="+o.city),o.gearboxType&&(e+="&gearboxType="+o.gearboxType),o.engineType&&(e+="&engineType="+o.engineType),o.driveType&&(e+="&driveType="+o.driveType),o.wheelType&&(e+="&wheelType="+o.wheelType),o.bodyType&&(e+="&bodyType="+o.bodyType),o.yearReleasedFrom&&(e+="&yearReleasedFrom="+o.yearReleasedFrom),o.yearReleasedTo&&(e+="&yearReleasedTo="+o.yearReleasedTo),o.priceTo&&(e+="&priceTo="+o.priceTo),o.priceFrom&&(e+="&priceFrom="+o.priceFrom),o.milleageFrom&&(e+="&milleageFrom="+o.milleageFrom),o.milleageTo&&(e+="&milleageTo="+o.milleageTo),location.href="/cars/"+e};window.clearFilter=function(){location.href=location.pathname};window.big_comb_select=function(e){let t=e.srcElement.dataset.parent,i=e.srcElement.innerText,l=e.srcElement.parentElement.parentElement;n[t].value=i,l.querySelector(".big-comb__placeholder").innerText=i,l.querySelector(".big-comb__placeholder").classList.add("bold"),l.querySelector(".big-comb__input").value=i,l.querySelector(".big-comb__input").blur(),ue(n,t)};window.input_chamged=function(e,t){me(e,t)};window.comb_cleaned=function(e){_e(e)};let L=document.querySelector(".frame-filter__controls-advanced"),A=document.querySelector(".filter-fields");L&&L.addEventListener("click",()=>{L.classList.length===1?(L.classList.add("active"),A.classList.add("active"),B(!0)):(L.classList.remove("active"),A.classList.remove("active"))});let x=document.querySelector(".f_auto"),j=document.querySelector(".f_tire");if(x&&j){let e=document.querySelector(".f_auto_buttons"),t=document.querySelector(".f_tire_buttons"),i=document.querySelector(".filter__controls-info");x.addEventListener("click",()=>{x.classList.add("active"),j.classList.remove("active"),t&&(t.style.display="none"),e&&(e.style.display="flex"),i&&(i.style.display="none")}),j.addEventListener("click",()=>{j.classList.add("active"),x.classList.remove("active"),e&&(e.style.display="none"),t&&(t.style.display="flex"),i&&(i.style.display="flex")})}
