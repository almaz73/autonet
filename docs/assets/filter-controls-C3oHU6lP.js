import{g as p,l as te,m as ie,n as oe,o as le,q as ae,r as ne,u as re,v as se,w as j,x as h,y as ce,z,A as de,p as D,B as U,C as J,D as ue,E as pe,F as fe,G as ye,a as me}from"./main-DWFtbTbq.js";let x=1;function F(){let e=location.href;return location.href.includes("&page")&&(e=location.href.slice(0,location.href.lastIndexOf("&page"))),e+(e.includes("?")?"":"?")}function ge(e){const t=document.querySelector("#pager");if(!t)return!1;let i="";x=+p("page")||1;const l=x>3?x-3:0;l>0&&(i+=`<a href=${F()}> 1</a> <span> | </span> ... <span> | </span>`);for(let r=1+l;r<e&&!(r-l>5);r++)i+=`<a ${x===r?'class="active"':""} href=${F()}&page=${r}>${r}</a><span> | </span>`;e>5?i+=` ... <span> | </span>  <a href=${F()}&page=${e}>${e}</a><span> | </span> `:e==="1"?i+='<a class="active">1</a>':i+=` <a href=${F()}&page=${e} class=${e!==x?"":"active"}>${e}</a><span> | </span> `,e&&e!==x&&window.screen.width>500&&(i+=`<a href="javascript:nextPage('${x}')"> След.</a>`),t.innerHTML=i}window.nextPage=e=>{let t="&page="+(+e+1);location.href.includes("&page=")?location.href=F()+t:location.href=location.href+t};let w=document.querySelector("cards");function V(e,t){let i;isNaN(t)||(i=`<div class='cart' id='galery_${t}' >
              <div class='cart__slide'>
                  <span class='dark-fon'></span>
                  <div class="fast_show">Быстрый просмотр</div>
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${e.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
              </div>
              <a class="big_link" 
                 href="javascript:openCar('${e.href}','${e.photos[0]}')" 
                 data-href="${e.href}"
                 title="Перейти">
                  <div class='name'>
                      <br>                      
                      ${e.name}, ${e.yearReleased}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная резина" class="tyres_icon " 
                       style="display: ${e.type==="tyres"?"block":"none"}; 
                       opacity: ${e.type==="tyres"&&e.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${e.price?e.price+" ₽":""} </div>
                      <div class='cart__of'>${e.fromPerMonth?"ot "+e.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${e.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${e.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${e.id}')" ondblclick="dblCompare('${e.id}')">
                          <img id="compareId_${e.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${e.id}')">
                          <img id="favoriteId_${e.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),t==="abdul"&&(i="<abdul></abdul>",setTimeout(window.reloadAbdul)),t==="swiper_buy"&&(i='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),w.innerHTML+=i}function ve(e){e.forEach(t=>{const i=new Image;i.src=t})}function _e(e,t){const i=document.querySelector("#galery_"+e+" .cart__slide"),l=i.querySelector(".fast_show"),r=i.querySelector(".dark-fon");if(window.current_slide=null,!i)return!1;const a=i.querySelector(".photo"),m=i.querySelector(".cart .red");let u,s,n=0,f=0;a.src=t[0],a.onerror=()=>a.src="/photo/tmp_auto.webp ",ve([t[1],t[2],t[3],t[4]]);function y(d){let g=parseInt(d.layerX*99.9/B/20);f!==g&&(R(),a.style.opacity=0,setTimeout(()=>{a.style.opacity=1,a.src="/photo/tmp_auto.webp ",a.src=t[g]},73),a.onerror=()=>a.src="/photo/tmp_auto.webp ",f=g),m.style.left=g*20+"%"}a.addEventListener("mousemove",y),i.addEventListener("touchstart",d=>u=d.targetTouches[0].pageX-i.offsetLeft),i.addEventListener("touchmove",d=>s=d.targetTouches[0].pageX-i.offsetLeft),i.addEventListener("touchend",()=>{u>s?n++:n--,n>4&&(n=4),n<0&&(n=0),a.src=t[n],m.style.left=n*20+"%"}),i.addEventListener("click",()=>{window.openCar(document.querySelector("#galery_"+e+" .big_link").dataset.href,t&&t[0])}),l.addEventListener("click",d=>{if(d.stopPropagation(),document.body.clientWidth<500)return!1;i.classList.toggle("watch"),window.current_slide=i,R()}),r.addEventListener("click",d=>{d.stopPropagation(),i.classList.remove("watch")})}window.openCar=function(e,t){localStorage.setItem("CAR_SMALLL_PHOTO",t),setTimeout(()=>location.href=e)};function O(e,t,i){if(w=document.querySelector("cards"),window.compareCars=t,window.favorCars=e,!w)return!1;w.innerHTML="",e.forEach((l,r)=>{V(l,r+1),r===2&&location.pathname!=="/personal/favorite-cars/"&&V(null,"abdul"),r===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&V(null,"swiper_buy")}),e.length||(w.innerHTML+="<abdul></abdul>",setTimeout(window.reloadAbdul)),location.pathname!=="/"&&location.pathname!=="/personal/favorite-cars/"&&(w.innerHTML+='<div class="pager">Страницы: <span id="pager"></span></div>'),ge(i),initChosen(),initFavotite(),e.forEach((l,r)=>_e(r+1,l.photos)),k=document.querySelector(".type_views"),k&&k.addEventListener("click",l=>{X(l),localStorage.setItem("TYPE_VIEW",l.srcElement.classList.value.slice(0,4))})}let k,B=285,R=()=>{let e=document.querySelector("cards .cart__slide");e&&(B=e.clientWidth),window.current_slide&&(B=window.current_slide.clientWidth)};window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let e=localStorage.getItem("TYPE_VIEW")||"dot4",t=document.querySelector("."+e);t&&t.classList.add("active"),t&&X({srcElement:{classList:{value:e}}})});function X(e){if(!e||!w)return!1;if(w.classList=[],R(),e.srcElement.classList.value.includes("dot8")&&w.classList.add("cards","dot8"),e.srcElement.classList.value.includes("dot4")&&w.classList.add("cards","dot4"),e.srcElement.classList.value.includes("dot1")&&w.classList.add("cards","dot1"),e.srcElement.classList.add){for(let t in k.children)k.children[t].classList&&k.children[t].classList.remove("active");e.srcElement.classList.add("active")}}document.addEventListener("keydown",e=>{e.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),R())});let C=!1,G=function(e){C=e,he()};const c={};let M={};c.Марка=[];c.Марка.value="";c.Модель=["Не выбрана марка "];c.Город=[];c["Тип кузова"]=[];c.Цвет=[];c["Тип КПП"]=[];c["Тип двигателя"]=[];c["Тип привода"]=[];c.Руль=[];c.Диски=["Все","Отсутствуют"];c.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];c["Ширина профиля"]=["Все","155","185","195","205","215","225"];c["Высота профиля"]=["Все","45","55","60","65","70"];c.Диаметр=["Все","13","14","15","16","17"];c.Сезон=["Все","Зима Шип","Лето"];function K(e){document.querySelectorAll("comb").forEach(i=>{if(e&&i.dataset.placeholder!=="Модель")return!1;let l=i.dataset.placeholder,r=c[l];if(r){let d=f(r,l);i.innerHTML=`<div class='big-combo' tabindex='1' title="${r.value||l}">
    <span class='big-comb__selected'>
      <span class='big-comb__placeholder'>${r.value||l}</span>
      <input class='big-comb__input' type="text">
    </span>
    <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
    <div class='big_comb__items' onclick='big_comb_select(event)'>
        ${d.join("")}
    </div>
</div>`}let a=i.querySelector(".big-combo"),m=i.querySelector(".big_comb__items"),u=i.querySelector(".big-comb__input"),s=i.querySelector(".big-comb__placeholder"),n=i.querySelector(".big-combo img");a&&a.addEventListener("focus",()=>{m.style.display="block",u.style.display="inline",s&&(s.style.display="none"),n.style.rotate="180deg",u.focus(),u.select()}),u&&(u.addEventListener("blur",()=>y()),u.addEventListener("click",()=>y()),u.addEventListener("keydown",d=>d.key==="Escape"&&y()),u.addEventListener("input",d=>{let g=d.target.value;M.Марка||(M=JSON.parse(JSON.stringify(c))),c[l]=M[l].filter(L=>L.includes(d.target.value)),g?m.innerHTML=f(c[l],l).join(""):m.innerHTML=f(M[l],l).join("")}));function f(d,g){return d.map(L=>'<div data-parent="'+g+'">'+L+"</div>")}function y(){m&&(m.style.display="none"),u&&(u.style.display="none"),n&&(n.style.rotate="0deg"),s&&(s.style.display="")}["Марка","Тип кузова","Тип КПП","Тип двигателя","Тип привода","Руль","Модель","Город","Цвет","Производитель","Ширина профиля","Высота профиля","Диаметр","Сезон","Диски"].includes(s.innerText)||s.classList.add("bold")}),j.emit("dataUpdated",{})}function Q(e){let t=h.brandsIds.find(i=>i.name.toUpperCase()===e.toUpperCase());t&&ce(t.id,i=>{c.Модель=i.map(l=>l.name),M={},h.modelsIds.push(...i),K("onlyModel")}),t||(c.Модель=["Неизвестный бренд"])}function he(){showPreloader(!0),Promise.all([new Promise(e=>{te(t=>{c.Марка=t.map(l=>l.name),h.brandsIds.push(...t);const i=p("brand");i&&Q(i),e()})}),new Promise(e=>{ie(t=>{t.includes("Все")||t.unshift("Все"),c.Город=t,e()})}),C&&new Promise(e=>{oe(t=>{c["Тип КПП"]=t.map(i=>i.title),h.gearboxTypes.push(...t),e()})}),C&&new Promise(e=>{le(t=>{c["Тип двигателя"]=t.map(i=>i.title),h.engineTypes.push(...t),e()})}),C&&new Promise(e=>{ae(t=>{c["Тип привода"]=t.map(i=>i.title),h.driveTypes.push(...t),e()})}),C&&new Promise(e=>{ne(t=>{c.Руль=t.map(i=>i.title),h.wheelTypes.push(...t),e()})}),C&&new Promise(e=>{re(t=>{c["Тип кузова"]=t.map(i=>i.title),h.bodyTypes.push(...t),e()})}),C&&new Promise(e=>{se(t=>{c.Цвет=t.map(i=>i.name),h.bodyColors.push(...t),e()})})]).then(e=>{K(),showPreloader(!1)}).catch(e=>{console.error("Произошла ошибка:",e)})}const Y=20,Z=[];let H,T=!1,$=localStorage.getItem("CACHE_SERV");$=JSON.parse($);function be(e){const t=p("brandId"),i=p("brand");t&&(e.brandId=t,e.brand=i,E("Марка",i));const l=p("modelId"),r=p("model");l&&(e.modelId=l,e.model=r,E("Модель",r));const a=p("city");a&&(e.city=a,E("Город",a));const m=p("colorId"),u=p("color");m&&(e.colorId=m,E("Цвет",u));const s=p("gearboxType");if(s){T=!0,e.gearboxType=s;let v=$["/api/Auto/GetGearboxTypes"],_=v&&v.data.find(q=>q.name===s);E("Тип КПП",_?_.title:s)}const n=p("engineType");if(n){T=!0,e.engineType=n;let v=$["/api/Auto/GetEngineTypes"],_=v&&v.data.find(q=>q.name===n);E("Тип двигателя",_?_.title:n)}const f=p("bodyType");if(f){T=!0,e.bodyType=f;let v=$["/api/Auto/getBodyTypes"],_=v&&v.data.find(q=>q.name===f);E("Тип кузова",_?_.title:f)}const y=p("wheelType");if(y){T=!0,e.wheelType=y;let v=$["/api/Auto/getWheelTypes"],_=v&&v.data.find(q=>q.name===y);E("Руль",_?_.title:y)}const d=p("driveType");if(d){T=!0,e.driveType=d;let v=$["/api/Auto/getDriveTypes"],_=v&&v.data.find(q=>q.name===d);E("Тип привода",_?_.title:y)}const g=p("yearReleasedFrom");g&&(e.yearReleasedFrom=g,I("yearReleasedFrom",g));const L=p("yearReleasedTo");L&&(T=!0,e.yearReleasedTo=L,I("yearReleasedTo",L));const b=p("priceTo");b&&(e.priceTo=b,I("priceTo",b));const S=p("milleageFrom");S&&(T=!0,e.milleageFrom=S,I("milleageFrom",S));const A=p("milleageTo");A&&(T=!0,e.milleageTo=A,I("milleageTo",A));const W=p("engineCapacity");W&&(T=!0,e.engineCapacity=W,I("engineCapacity",W));const P=p("priceFrom");if(P&&(T=!0,e.priceFrom=P,I("priceFrom",P)),T){let v=document.querySelector(".frame-filter__controls-advanced"),_=document.querySelector(".filter-fields");v&&v.classList.add("active"),_&&_.classList.add("active")}p("priceOrder")&&(e.priceOrder=p("priceOrder")==="true",J(e.priceOrder)),e.offset=p("page"),G(T)}function E(e,t){if(H)return!1;Z.push({name:e,value:t})}j.on("dataUpdated",Te);function Te(){Z.forEach(e=>{let t=document.querySelector(`[data-placeholder="${e.name}"]`);t&&t.querySelector(".big-comb__placeholder")&&(t.querySelector(".big-comb__placeholder").innerText=e.value,t.querySelector(".big-comb__placeholder").classList.add("bold"))})}function I(e,t){if(H)return!1;let i=document.querySelector(`[onchange="input_chamged('${e}', this.value)"]`);i&&(i.value=t,i.classList.add("bold"))}function we(e,t,i,l){H=t,H||be(i);let r=document.querySelector("#set_filter");showPreloader(!0,r),i.limit=Y,z(i,a=>{a.items=de(a.items),e=D(a.items);let m=Math.ceil(a.totalCount/Y);if(setTimeout(()=>l(e,a.items,m)),showPreloader(!1,r),U(a.totalCount),H||i.brandId){Le();let u=document.querySelector(".filter-white"),s=document.querySelector("#vitrina_name");document.getElementById("brands_dynamic").style.display="none",u&&(u.style.marginBottom=0),s&&(s.innerHTML="Автомобили "+(i.brand||"")+" "+(i.model||"")+" "+(i.city?`(город ${i.city})`:""))}})}function Le(){setTimeout(()=>document.querySelector("#filter_cars").removeEventListener("mouseleave",e),3e3),document.querySelector("#filter_cars").addEventListener("mouseleave",e);function e(){document.getElementById("set_filter").scrollIntoView({behavior:"smooth",block:"start"}),document.querySelector("#filter_cars").removeEventListener("mouseleave",e)}}function Se(e,t){if(t==="Марка"){let i=h.brandsIds.find(l=>l.name===e[t].value);i&&(o.brandId=i.id,o.brand=i.name,o.modelId="",o.model="",setTimeout(()=>document.querySelector('[data-placeholder="Модель"] .big-comb__placeholder').innerText="",2e3)),Q(e[t].value)}if(t==="Модель"){let i=h.modelsIds.find(l=>l.name===e[t].value);i&&(o.modelId=i.id,o.model=i.name)}if(t==="Город"&&(o.city=e[t].value),t==="Тип КПП"){let i=h.gearboxTypes.find(l=>l.title===e[t].value);o.gearboxType=i.name}if(t==="Тип двигателя"){let i=h.engineTypes.find(l=>l.title===e[t].value);o.engineType=i.name}if(t==="Тип привода"){let i=h.driveTypes.find(l=>l.title===e[t].value);o.driveType=i.name}if(t==="Руль"){let i=h.wheelTypes.find(l=>l.title===e[t].value);o.wheelType=i.name}if(t==="Тип кузова"){let i=h.bodyTypes.find(l=>l.title===e[t].value);o.bodyType=i.name}if(t==="Цвет"){let i=h.bodyColors.find(l=>l.name===e[t].value);o.colorId=i.id,o.color=i.name}N("ishandEvent")}function ee(e,t){o[e]=t,N("ishandEvent")}let o={};function N(e){let t=document.querySelector(".cars_link");location.pathname==="/"?(t&&(t.style.display="block"),localStorage.removeItem("TYPE_VIEW")):(t&&(t.style.display="none"),localStorage.getItem("TYPE_VIEW")||localStorage.setItem("TYPE_VIEW","dot8"));let i;if(location.pathname==="/"){document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",e||G(!1);let l=document.querySelector("#set_filter");showPreloader(!0,l),o.limit=0,z(o,a=>{showPreloader(!1,l),pe(a.totalCount,["предложение","предложений","предложений"]),U(a.totalCount)});let r=localStorage.getItem("selectedCity")||"";ue(r,a=>{a=fe(a),i=D(a),e||O(i,a)})}else location.pathname==="/tyres/"?(document.querySelector("#vitrina_name").innerHTML="Каталог шин",i=ye,setTimeout(()=>O(i))):location.pathname.includes("/cars/")?we(i,e,o,O):location.pathname==="/personal/favorite-cars/"&&(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",i=localStorage.getItem("FavoriteCars"),i=i?JSON.parse(i):[],setTimeout(()=>O(i,i)))}window.getVitrina=N;window.goToCars=function(){let e="?";o.brandId&&(e="?brand="+(o.Марка||o.brand),e+="&brandId="+o.brandId),o.modelId&&(e+="&model="+(o.Модель||o.model),e+="&modelId="+o.modelId),o.city&&(e+="&city="+o.city),o.gearboxType&&(e+="&gearboxType="+o.gearboxType),o.engineType&&(e+="&engineType="+o.engineType),o.driveType&&(e+="&driveType="+o.driveType),o.wheelType&&(e+="&wheelType="+o.wheelType),o.bodyType&&(e+="&bodyType="+o.bodyType),o.colorId&&(e+="&colorId="+o.colorId,e+="&color="+o.color),o.yearReleasedFrom&&(e+="&yearReleasedFrom="+o.yearReleasedFrom),o.yearReleasedTo&&(e+="&yearReleasedTo="+o.yearReleasedTo),o.priceTo&&(e+="&priceTo="+o.priceTo),o.priceFrom&&(e+="&priceFrom="+o.priceFrom),o.milleageFrom&&(e+="&milleageFrom="+o.milleageFrom),o.milleageTo&&(e+="&milleageTo="+o.milleageTo),o.engineCapacity&&(e+="&engineCapacity="+o.engineCapacity),o.priceOrder!==null&&o.priceOrder!==void 0&&(e+="&priceOrder="+o.priceOrder),location.href="/cars/"+e};window.clearFilter=function(){location.href=location.pathname};document.addEventListener("DOMContentLoaded",()=>{let e=null,t=document.querySelector(".coin");t&&t.addEventListener("click",()=>{e===!1?e=!0:e===null?e=!1:e===!0&&(e=null),J(e),ee("priceOrder",e)})});document.addEventListener("DOMContentLoaded",()=>{window.big_comb_select=function(s){let n=s.srcElement.dataset.parent,f=s.srcElement.innerText,y=s.srcElement.parentElement.parentElement;c[n].value=f,y.querySelector(".big-comb__placeholder").innerText=f,y.querySelector(".big-comb__placeholder").classList.add("bold"),y.querySelector(".big-comb__input").value=f,y.querySelector(".big-comb__input").blur(),Se(c,n)},window.input_chamged=function(s,n){ee(s,n)};let e=null;window.input_on=function(s,n){e&&clearTimeout(e),e=setTimeout(()=>input_chamged(s,n),1e3)};let t=document.querySelector(".frame-filter__controls-advanced"),i=document.querySelector(".filter-fields"),l=document.querySelector("#car-vitrina"),r=document.querySelector("#list1"),a=document.querySelector("#list2");if(!r){r=document.querySelector("#list1_1"),a=document.querySelector("#list2_2");let s=[];me(n=>s=n),window.onCard=function(n){let f=n.querySelector("input"),y,d,g=n.getBoundingClientRect();if(y=document.body.offsetWidth>1200?180:40,d=document.body.offsetWidth>1200?40:-10,document.body.offsetWidth<600&&(y=-10,d=150),n.querySelector("span")&&n.querySelector("span").innerHTML&&["Год от:"].includes(n.querySelector("span").innerHTML)){if(!r.innerHTML){for(let b=+s.from;b<=+s.to;b++)r.innerHTML+=`<a>${b}</a>`;r.querySelectorAll("a").forEach(b=>{b.addEventListener("click",S=>{f.value=S.target.innerText,input_chamged("yearReleasedFrom",S.target.innerText),r.style.left="-1000px"})})}r.style.left=g.x-y+"px",r.style.top=g.y-d+window.scrollY-473+"px",a.style.left="-1000px"}else if(n.querySelector("span")&&n.querySelector("span").innerHTML&&["Год до:"].includes(n.querySelector("span").innerHTML)){if(!a.innerHTML){for(let b=+s.from;b<=+s.to;b++)a.innerHTML+=`<a>${b}</a>`;a.querySelectorAll("a").forEach(b=>{b.addEventListener("click",S=>{f.value=S.target.innerText,input_chamged("yearReleasedTo",S.target.innerText),a.style.left="-1000px"})})}a.style.left=g.x-y+"px",a.style.top=g.y-d+window.scrollY-473+"px",r.style.left="-1000px"}else r.style.left="-1000px",a.style.left="-1000px";n.querySelector("input")&&n.querySelector("input").focus(),setTimeout(()=>{r.style.left="-1000px",a.style.left="-1000px"},5e3)}}l&&l.addEventListener("mousemove",()=>{r&&(r.style.left="-1000px"),a&&(a.style.left="-1000px")}),t&&t.addEventListener("click",()=>{t.classList.length===1?(t&&t.classList.add("active"),i&&i.classList.add("active"),G(!0)):(t.classList.remove("active"),i&&i.classList.remove("active"));let s=document.querySelector("#deleter");s&&(s.style.left="-1000px")});let m=document.querySelector(".f_auto"),u=document.querySelector(".f_tire");if(m&&u){let s=document.querySelector(".f_auto_buttons"),n=document.querySelector(".f_tire_buttons"),f=document.querySelector(".filter__controls-info");m.addEventListener("click",()=>{m&&m.classList.add("active"),u&&u.classList.remove("active"),n&&(n.style.display="none"),s&&(s.style.display="flex"),f&&(f.style.display="none")}),u.addEventListener("click",()=>{u.classList.add("active"),m.classList.remove("active"),s&&(s.style.display="none"),n&&(n.style.display="flex"),f&&(f.style.display="flex")})}});
