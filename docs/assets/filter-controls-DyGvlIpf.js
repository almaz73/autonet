import{i as U,c as X,d as J,e as Q,f as Z,g as ee,h as te,j as ie,k as oe,l as z}from"./favoriteCars-UyRy5S1X.js";import{i as ae}from"./compareCars-aUEkwXup.js";import{g as s,a as c,p as A,d as R}from"./global-func-BLfbnEIy.js";let b=1;function L(){return location.href.includes("&page")?location.href.slice(0,location.href.lastIndexOf("&page")):location.href}function le(e){const t=document.querySelector("#pager");if(!t)return!1;let i="";b=+s("page")||1;const o=b>3?b-3:0;o>0&&(i+=`<a href=${L()}> 1</a> <span> | </span> ... <span> | </span>`);for(let l=1+o;l<e&&!(l-o>5);l++)i+=`<a ${b===l?'class="active"':""} href=${L()}&page=${l}>${l}</a><span> | </span>`;e>5?i+=` ... <span> | </span>  <a href=${L()}&page=${e}>${e}</a><span> | </span> `:e==="1"?i+='<a class="active">1</a>':i+=` <a href=${L()}&page=${e} class=${e!==b?"":"active"}>${e}</a><span> | </span> `,e&&e!==b&&window.screen.width>500&&(i+=`<a href="javascript:nextPage('${b}')"> След.</a>`),t.innerHTML=i}window.nextPage=e=>{let t="&page="+(+e+1);location.href.includes("&page=")?location.href=L()+t:location.href=location.href+t};let m;document.addEventListener("DOMContentLoaded",()=>{m=document.querySelector("cards")});function M(e,t){let i;isNaN(t)||(i=`<div class='cart' id='galery_${t}' >
              <div class='cart__slide'>                    
                  <img class='photo' alt=''>
                  <div class='cart__blank'>${e.address}</div>
                  <div class='field'>
                      <div class='red'></div>
                  </div>
                  <span class='dark-fon'/>                    
              </div>
              <a class="big_link" href='${e.href}' title="перейти">
                  <div class='name'>
                      <br>                      
                      ${e.name}, ${e.yearReleased}
                  </div>
                  <img src="/svg/icon_spines.svg" alt="Шипованная резина" class="tyres_icon " 
                       style="display: ${e.type==="tyres"?"block":"none"}; 
                       opacity: ${e.type==="tyres"&&e.winter?1:0}">
                       
                  <div class='cart__price'>
                      <div class='total'>${e.price?e.price+" ₽":""} </div>
                      <div class='cart__of'>${e.fromPerMonth?"ot "+e.fromPerMonth+"  ₽/мес":""}</div>
                  </div>
                  <div class='cart__info'>
                      ${e.info}
                  </div>
                  <div class='cart__box--bottom' style="display: ${e.type==="tyres"?"none":""}">
                      <a href="javascript:addCompare('${e.id}')" ondblclick="dblCompare('${e.id}')">
                          <img id="compareId_${e.id}" src='/icons/compare_cars.svg' alt=''>
                      </a>
                      <a href="javascript:addFavorite('${e.id}')">
                          <img id="favoriteId_${e.id}" src='/icons/penta.svg' alt=''>
                      </a>
                  </div>
              </a>
          </div>`),t==="abdul"&&(i="<abdul></abdul>",setTimeout(window.reloadAbdul)),t==="swiper_buy"&&(i='<div style="min-width: 200px; max-width: 730px"><swiper_buy></swiper_buy></div>',setTimeout(window.reloadLittleSwiper)),m.innerHTML+=i}function re(e,t){const i=document.querySelector("#galery_"+e+" .cart__slide");if(window.current_slide=null,!i)return!1;const o=i.querySelector(".photo"),l=i.querySelector(".cart .red");let f,d,n=0,_=0;o.src=t[n],o.addEventListener("mousemove",p=>{let y=parseInt(p.layerX*100/H/20);_!==y&&(o.src=t[y],_=y),l.style.left=y*20+"%"}),i.addEventListener("mouseleave",()=>{o.src=t[0],l.style.left="0%"}),i.addEventListener("touchstart",p=>f=p.targetTouches[0].pageX-i.offsetLeft),i.addEventListener("touchmove",p=>d=p.targetTouches[0].pageX-i.offsetLeft),i.addEventListener("touchend",()=>{f>d?n++:n--,n>4&&(n=4),n<0&&(n=0),o.src=t[n],l.style.left=n*20+"%"}),i.addEventListener("click",()=>{if(document.body.clientWidth<500)return!1;i.classList.toggle("watch"),window.current_slide=i,$()})}function E(e,t,i){window.compareCars=t,window.favorCars=e,m.innerHTML="",e.forEach((o,l)=>{M(o,l+1),l===2&&location.pathname!=="/personal/favorite-cars/"&&M(null,"abdul"),l===0&&(location.pathname==="/cars/"||location.pathname==="/autosite/cars/")&&M(null,"swiper_buy")}),!m.innerHTML&&location.pathname.includes("favorite")&&(m.innerHTML='<div class="nodata" style="width: 200%;text-align:center">HЕТ ИЗБРАННЫХ АВТОМОБИЛЕЙ </div>'),location.pathname!=="/"&&(m.innerHTML+='<div class="pager">Страницы: <span id="pager"></span></div>'),le(i),ae(),U(),e.forEach((o,l)=>re(l+1,o.photos))}let S=document.querySelector(".type_views"),H=285,$=()=>{let e=document.querySelector("cards .cart__slide");e&&(H=e.clientWidth),window.current_slide&&(H=window.current_slide.clientWidth)};document.addEventListener("DOMContentLoaded",()=>setTimeout($,500));window.addEventListener("resize",()=>window.current_slide&&window.current_slide.classList.remove("watch"));setTimeout(()=>{let e=localStorage.getItem("TYPE_VIEW")||"dot4",t=document.querySelector("."+e);t&&t.classList.add("active"),t&&Y({srcElement:{classList:{value:e}}})});S&&S.addEventListener("click",e=>{Y(e),localStorage.setItem("TYPE_VIEW",e.srcElement.classList.value.slice(0,4))});function Y(e){if(!e||!m)return!1;if(m.classList=[],$(),e.srcElement.classList.value==="dot8"&&m.classList.add("cards","dot8"),e.srcElement.classList.value==="dot4"&&m.classList.add("cards","dot4"),e.srcElement.classList.value==="dot1"&&m.classList.add("cards","dot1"),e.srcElement.classList.add){for(let t in S.children)S.children[t].classList&&S.children[t].classList.remove("active");e.srcElement.classList.add("active")}}document.addEventListener("keydown",e=>{e.key==="Escape"&&window.current_slide&&(window.current_slide.classList.remove("watch"),$())});let q=document.querySelector(".type_views.coin");q&&q.addEventListener("click",()=>{let e=q.querySelector("img").style.rotate!=="180deg";q.querySelector("img").style.rotate=e?"180deg":"0deg",console.log("запрос нужен more = ",e)});let v=!1,B=function(e){v=e,ne()},r={};r.Марка=[];r.Марка.value="";r.Модель=["е выбрана марка "];r.Город=[];r["Тип кузова"]=[];r.Цвет=["Все","Бежевый","Белый","Голубой","Желтый","Зелёный","Золотой","Коричневый","Красный","Оранжевый","Серебряный","Серый","Синий","Фиолетовый","Чёрный"];r["Тип КПП"]=[];r["Тип двигателя"]=[];r["Тип привода"]=[];r.Руль=[];r.Диски=["Все","Отсутствуют"];r.Производитель=["Amtel","Bfgoodrich","Cordiant","Formula","Gislaved","Hankook","Kormoran","Kumho","Nokian"];r["Ширина профиля"]=["Все","155","185","195","205","215","225"];r["Высота профиля"]=["Все","45","55","60","65","70"];r.Диаметр=["Все","13","14","15","16","17"];r.Сезон=["Все","Зима Шип","Лето"];function V(){document.querySelectorAll("comb").forEach(t=>{let i=t.dataset.placeholder,o=r[i];if(o){let y=o.map(T=>'<div data-parent="'+i+'">'+T+"</div>");t.innerHTML=`<div class='big-combo' tabindex='1' title="${o.value||i}">
    <span class='big-comb__selected'>
      <span class='big-comb__placeholder'>${o.value||i}</span>
      <input class='big-comb__input' type="text">
    </span>
    <img src='/svg/arrow-down.svg' alt='arrow' loading='lazy' width='10' height='18'>            
    <div class='big_comb__items' onclick='big_comb_select(event)'>
        ${y.join("")}
    </div>
</div>`}let l=t.querySelector(".big-combo"),f=t.querySelector(".big_comb__items"),d=t.querySelector(".big-comb__input"),n=t.querySelector(".big-comb__placeholder"),_=t.querySelector(".big-combo img");l&&l.addEventListener("focus",()=>{f.style.display="block",d.style.display="inline",n&&(n.style.display="none"),_.style.rotate="180deg",d.focus(),d.select()}),d&&(d.addEventListener("blur",()=>p()),d.addEventListener("click",()=>p()),d.addEventListener("keydown",y=>y.key==="Escape"&&p()));function p(){f&&(f.style.display="none"),d&&(d.style.display="none"),_&&(_.style.rotate="0deg"),n&&(n.style.display="")}["Марка","Тип кузова","Тип КПП","Тип двигателя","Тип привода","Руль","Модель","Город","Производитель","Ширина профиля","Высота профиля","Диаметр","Сезон","Диски"].includes(n.innerText)||n.classList.add("bold")})}function O(e){let t=c.brandsIds.find(i=>i.name.toUpperCase()===e.toUpperCase());t&&oe(t.id).then(i=>{r.Модель=i.map(o=>o.name),c.modelsIds.push(...i),V()}),t||(r.Модель=["Неизвестный бренд"],V())}function ne(){Promise.all([new Promise(e=>{X().then(t=>{r.Марка=t.map(o=>o.name),c.brandsIds.push(...t);const i=s("brand");i&&O(i),e()})}),new Promise(e=>{J().then(t=>{r.Город=t,e()})}),v&&new Promise(e=>{Q().then(t=>{r["Тип КПП"]=t.map(i=>i.title),c.gearboxTypes.push(...t),e()})}),v&&new Promise(e=>{Z().then(t=>{r["Тип двигателя"]=t.map(i=>i.title),c.engineTypes.push(...t),e()})}),v&&new Promise(e=>{ee().then(t=>{r["Тип привода"]=t.map(i=>i.title),c.driveTypes.push(...t),e()})}),v&&new Promise(e=>{te().then(t=>{r.Руль=t.map(i=>i.title),c.wheelTypes.push(...t),e()})}),v&&new Promise(e=>{ie().then(t=>{r["Тип кузова"]=t.map(i=>i.title),c.bodyTypes.push(...t),e()})})]).then(e=>{V()}).catch(e=>{console.error("Произошла ошибка:",e)})}const W=20;let u=!1;function se(e){const t=s("brandId"),i=s("brand");t&&(e.brandId=t,e.brand=i,g("Марка",i));const o=s("modelId"),l=s("model");o&&(e.modelId=o,e.model=l,g("Модель",l));const f=s("city");f&&(e.city=f,g("Город",f));const d=s("gearboxType");d&&(u=!0,e.gearboxType=d,g("Тип КПП",d));const n=s("engineType");n&&(u=!0,e.engineType=n,g("Тип двигателя",n));const _=s("bodyType");_&&(u=!0,e.bodyType=_,g("Тип кузова",_));const p=s("wheelType");p&&(u=!0,e.wheelType=p,g("Руль",p));const y=s("driveType");y&&(u=!0,e.driveType=y,g("Тип привода",y));const T=s("yearReleasedFrom");T&&(e.yearReleasedFrom=T,h("yearReleasedFrom",T));const j=s("yearReleasedTo");j&&(u=!0,e.yearReleasedTo=j,h("yearReleasedTo",j));const k=s("priceTo");k&&(e.priceTo=k,h("priceTo",k));const F=s("milleageFrom");F&&(u=!0,e.milleageFrom=F,h("milleageFrom",F));const K=s("milleageTo");K&&(u=!0,e.milleageTo=K,h("milleageTo",K));const C=s("priceFrom");if(C&&(u=!0,e.priceFrom=C,h("priceFrom",C)),u){let D=document.querySelector(".frame-filter__controls-advanced"),G=document.querySelector(".filter-fields");D.classList.add("active"),G.classList.add("active")}e.offset=s("page"),B(u)}function g(e,t){setTimeout(()=>{console.log(e);let i=document.querySelector(`[data-placeholder="${e}"]`);i&&i.querySelector(".big-comb__placeholder")&&(i.querySelector(".big-comb__placeholder").innerText=t,i.querySelector(".big-comb__placeholder").classList.add("bold"))},2e3)}function h(e,t){setTimeout(()=>{let i=document.querySelector(`[onchange="input_chamged('${e}', this.value)"]`);i&&(i.value=t,i.classList.add("bold"))},2e3)}function de(e,t,i,o){t||se(i),z(W,i).then(l=>{e=A(l.items);let f=Math.ceil(l.totalCount/W);o(e,l.items,f),document.querySelector("#set_filter span.number").innerHTML=l.totalCount+" "+R(l.totalCount,["предложение","предложения","предложений"]),(t||i.brandId)&&(document.getElementById("set_filter").scrollIntoView({behavior:"smooth",block:"start"}),document.getElementById("brands_dynamic").style.display="none",document.querySelector(".filter-white").style.marginBottom=0,document.querySelector("#vitrina_name").innerHTML="Автомобили "+(i.brand||"")+" "+(i.model||""))})}function ce(e,t){if(t==="Марка"){let i=c.brandsIds.find(o=>o.name===e[t].value);i&&(a.brandId=i.id,a.brand=i.name,a.modelId="",a.model=""),O(e[t].value)}if(t==="Модель"){let i=c.modelsIds.find(o=>o.name===e[t].value);i&&(a.modelId=i.id,a.model=i.name)}if(t==="Город"&&(a.city=e[t].value),t==="Тип КПП"){let i=c.gearboxTypes.find(o=>o.title===e[t].value);a.gearboxType=i.name}if(t==="Тип двигателя"){let i=c.engineTypes.find(o=>o.title===e[t].value);a.engineType=i.name}if(t==="Тип привода"){let i=c.driveTypes.find(o=>o.title===e[t].value);a.driveType=i.name}if(t==="Руль"){let i=c.wheelTypes.find(o=>o.title===e[t].value);a.wheelType=i.name}if(t==="Тип кузова"){let i=c.bodyTypes.find(o=>o.title===e[t].value);a.bodyType=i.name}x("ishandEvent")}function pe(e,t){a[e]=t,x("ishandEvent")}let a={};function x(e){let t=document.querySelector(".cars_link"),i=document.querySelector(".view_buttons");location.pathname==="/"?(t&&(t.style.display="block"),localStorage.removeItem("TYPE_VIEW")):(t&&(t.style.display="none"),i&&(i.style.display="block"),localStorage.getItem("TYPE_VIEW")||localStorage.setItem("TYPE_VIEW","dot8"));let o;location.pathname==="/"?(document.querySelector("#vitrina_name").innerHTML="Специальные предложения по цене",e||B(!1),z(7,a).then(l=>{o=A(l.items),R(l.totalCount,["предложение","предложений","предложений"]),document.querySelector("#set_filter span.number").innerHTML=l.totalCount+" "+R(l.totalCount,["предложение","предложения","предложений"]),e||E(o,l.items)})):location.pathname==="/tyres/"?(document.querySelector("#vitrina_name").innerHTML="Каталог шин",o=[{address:"Альметьевск , Герцена 1Б",id:210,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:211,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:212,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:213,type:"tyres",winter:!0,name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"21 091",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00003.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00004.jpg"]},{address:"Альметьевск , Герцена 1Б",id:214,type:"tyres",name:"Viatti Brina Nordico 225/45 R17 Зима шип ",href:"/cars/2106/651138/",price:"15 000",info:"",photos:["/photo-tyres/1/NK0_ff8cd2b6_00004.jpg","/photo-tyres/1/NK0_03b04be8_00002.jpg","/photo-tyres/1/NK0_351bedd2_00002.jpg","/photo-tyres/1/NK0_351bedd2_00003.jpg","/photo-tyres/1/NK0_ff8cd2b6_00003.jpg"]}],setTimeout(()=>E(o))):location.pathname==="/cars/"?de(o,e,a,E):location.pathname==="/personal/favorite-cars/"?(document.querySelector("#vitrina_name").innerHTML="Избранные автомобили",o=localStorage.getItem("FavoriteCars"),o=o?JSON.parse(o):[],setTimeout(()=>E(o))):(document.querySelector("#vitrina_name").innerHTML="111 Автомобили",console.log(" тут карточек нет, либо не сформированы"))}const fe=s("id");fe||x();window.getVitrina=x;window.goToCars=function(){let e="?";a.brandId&&(e="?brand="+(a.Марка||a.brand),e+="&brandId="+a.brandId),a.modelId&&(e+="&model="+(a.Модель||a.model),e+="&modelId="+a.modelId),a.city&&(e+="&city="+a.city),a.gearboxType&&(e+="&gearboxType="+a.gearboxType),a.engineType&&(e+="&engineType="+a.engineType),a.driveType&&(e+="&driveType="+a.driveType),a.wheelType&&(e+="&wheelType="+a.wheelType),a.bodyType&&(e+="&bodyType="+a.bodyType),a.yearReleasedFrom&&(e+="&yearReleasedFrom="+a.yearReleasedFrom),a.yearReleasedTo&&(e+="&yearReleasedTo="+a.yearReleasedTo),a.priceTo&&(e+="&priceTo="+a.priceTo),a.priceFrom&&(e+="&priceFrom="+a.priceFrom),a.milleageFrom&&(e+="&milleageFrom="+a.milleageFrom),a.milleageTo&&(e+="&milleageTo="+a.milleageTo),location.href="/cars/"+e};window.clearFilter=function(){location.href=location.pathname};window.big_comb_select=function(e){let t=e.srcElement.dataset.parent,i=e.srcElement.innerText,o=e.srcElement.parentElement.parentElement;r[t].value=i,o.querySelector(".big-comb__placeholder").innerText=i,o.querySelector(".big-comb__placeholder").classList.add("bold"),o.querySelector(".big-comb__input").value=i,o.querySelector(".big-comb__input").blur(),ce(r,t)};window.input_chamged=function(e,t){pe(e,t)};let w=document.querySelector(".frame-filter__controls-advanced"),P=document.querySelector(".filter-fields");w&&w.addEventListener("click",()=>{w.classList.length===1?(w.classList.add("active"),P.classList.add("active"),B(!0)):(w.classList.remove("active"),P.classList.remove("active"))});let I=document.querySelector(".f_auto"),N=document.querySelector(".f_tire");if(I&&N){let e=document.querySelector(".f_auto_buttons"),t=document.querySelector(".f_tire_buttons"),i=document.querySelector(".filter__controls-info");I.addEventListener("click",()=>{I.classList.add("active"),N.classList.remove("active"),t&&(t.style.display="none"),e&&(e.style.display="flex"),i&&(i.style.display="none")}),N.addEventListener("click",()=>{N.classList.add("active"),I.classList.remove("active"),e&&(e.style.display="none"),t&&(t.style.display="flex"),i&&(i.style.display="flex")})}
